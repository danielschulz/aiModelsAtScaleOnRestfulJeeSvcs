"use strict";function cboladebug(){Cbola.Env.DEBUG=!0,localStorage.setItem("cbolaDebug","1")}function rcboladebug(){Cbola.Env.DEBUG=!1,localStorage.setItem("cbolaDebug","0")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}if(window.Cbola=window.Cbola||{},window.Cbola=window.Cbola||{},Cbola.BrowserTests={},Cbola.isObsoleteBrowser=function(){function e(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/gi.test(r)&&-1===r.search("PC")}function t(){var e=r.match(/Chrom(e|ium)\/([0-9]+)\./);return e?parseInt(e[2],10):!1}function i(){return r.indexOf("Edge")>-1}function o(){var e=r.match("[A|a]ndroid[ |/]([0-9|.]+)"),t=!1;if(null!==e)try{t=e?parseInt(e[1],10):!1}catch(i){t=1}return t>=1}function n(){return"undefined"==typeof window["AudioNode"]}var r=window.navigator.userAgent,a=r.indexOf("MSIE ");if(a>0){var s=parseInt(r.substring(a+5,r.indexOf(".",a)));return 9>=s}var l=t();return!i()&&l&&50>l?!0:e()&&o()&&n()?!0:!1},Cbola.isBrowserSupported=!Cbola.isObsoleteBrowser(),!Cbola.isBrowserSupported){console.log("Cbola:: deprecated browser detected");var proxyEl=document.getElementById("carambola_proxy");if(proxyEl){var proxySrcAttr=proxyEl.getAttribute("src"),proxyElParams=proxySrcAttr?proxySrcAttr.split("?"):[];if(proxyElParams.length>1){proxyElParams=proxyElParams[1];var scriptEl=window.document.createElement("script");scriptEl.src="//route.carambo.la/getHelp?"+proxyElParams,scriptEl.type="text/javascript",document.head.appendChild(scriptEl)}}}!function(e){function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return g.iterable&&(t[Symbol.iterator]=function(){return t}),t}function n(e){this.map={},e instanceof n?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function r(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}})}function s(e){var t=new FileReader,i=a(t);return t.readAsArrayBuffer(e),i}function l(e){var t=new FileReader,i=a(t);return t.readAsText(e),i}function d(e){for(var t=new Uint8Array(e),i=new Array(t.length),o=0;o<t.length;o++)i[o]=String.fromCharCode(t[o]);return i.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(g.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(g.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(g.arrayBuffer&&g.blob&&w(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!v(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?r(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(d(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(u)}),this.json=function(){return this.text().then(JSON.parse)},this}function m(e){var t=e.toUpperCase();return C.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var i=t.body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new n(e.headers)),this.method=e.method,this.mode=e.mode,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",(t.headers||!this.headers)&&(this.headers=new n(t.headers)),this.method=m(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function u(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var i=e.split("="),o=i.shift().replace(/\+/g," "),n=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(o),decodeURIComponent(n))}}),t}function b(e){var t=new n;return e.split(/\r?\n/).forEach(function(e){var i=e.split(":"),o=i.shift().trim();if(o){var n=i.join(":").trim();t.append(o,n)}}),t}function f(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new n(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var g={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(g.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],w=function(e){return e&&DataView.prototype.isPrototypeOf(e)},v=ArrayBuffer.isView||function(e){return e&&y.indexOf(Object.prototype.toString.call(e))>-1};n.prototype.append=function(e,o){e=t(e),o=i(o);var n=this.map[e];this.map[e]=n?n+","+o:o},n.prototype["delete"]=function(e){delete this.map[t(e)]},n.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},n.prototype.set=function(e,o){this.map[t(e)]=i(o)},n.prototype.forEach=function(e,t){for(var i in this.map)this.map.hasOwnProperty(i)&&e.call(t,this.map[i],i,this)},n.prototype.keys=function(){var e=[];return this.forEach(function(t,i){e.push(i)}),o(e)},n.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},n.prototype.entries=function(){var e=[];return this.forEach(function(t,i){e.push([i,t])}),o(e)},g.iterable&&(n.prototype[Symbol.iterator]=n.prototype.entries);var C=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},h.call(p.prototype),h.call(f.prototype),f.prototype.clone=function(){return new f(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},f.error=function(){var e=new f(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];f.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new f(null,{status:t,headers:{location:e}})},e.Headers=n,e.Request=p,e.Response=f,e.fetch=function(e,t){return new Promise(function(i,o){var n=new p(e,t),r=new XMLHttpRequest;r.onload=function(){var e={status:r.status,statusText:r.statusText,headers:b(r.getAllResponseHeaders()||"")};e.url="responseURL"in r?r.responseURL:e.headers.get("X-Request-URL");var t="response"in r?r.response:r.responseText;i(new f(t,e))},r.onerror=function(){o(new TypeError("Network request failed"))},r.ontimeout=function(){o(new TypeError("Network request failed"))},r.open(n.method,n.url,!0),"include"===n.credentials&&(r.withCredentials=!0),"responseType"in r&&g.blob&&(r.responseType="blob"),n.headers.forEach(function(e,t){r.setRequestHeader(t,e)}),r.send("undefined"==typeof n._bodyInit?null:n._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),function(e){function t(){}function i(e,t){return function(){e.apply(t,arguments)}}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function n(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void o._immediateFn(function(){var i=1===e._state?t.onFulfilled:t.onRejected;if(null===i)return void(1===e._state?r:a)(t.promise,e._value);var o;try{o=i(e._value)}catch(n){return void a(t.promise,n)}r(t.promise,o)}))}function r(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void s(e);if("function"==typeof n)return void d(i(n,t),e)}e._state=1,e._value=t,s(e)}catch(r){a(e,r)}}function a(e,t){e._state=2,e._value=t,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,i=e._deferreds.length;i>t;t++)n(e,e._deferreds[t]);e._deferreds=null}function l(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}function d(e,t){var i=!1;try{e(function(e){i||(i=!0,r(t,e))},function(e){i||(i=!0,a(t,e))})}catch(o){if(i)return;i=!0,a(t,o)}}var c=setTimeout;o.prototype["catch"]=function(e){return this.then(null,e)},o.prototype.then=function(e,i){var o=new this.constructor(t);return n(this,new l(e,i,o)),o},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,i){function o(r,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){o(r,e)},i)}t[r]=a,0===--n&&e(t)}catch(l){i(l)}}if(0===t.length)return e([]);for(var n=t.length,r=0;r<t.length;r++)o(r,t[r])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,i){i(e)})},o.race=function(e){return new o(function(t,i){for(var o=0,n=e.length;n>o;o++)e[o].then(t,i)})},o._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){c(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=o:e.Promise||(e.Promise=o)}(this),function(e,t){function i(i,d,c){var p=[];d=1==d?{entropy:!0}:d||{};var y=a(r(d.entropy?[i,l(e)]:null==i?s():i,3),p),w=new o(p),v=function(){for(var e=w.g(m),t=b,i=0;f>e;)e=(e+i)*h,t*=h,i=w.g(1);for(;e>=g;)e/=2,t/=2,i>>>=1;return(e+i)/t};return v.int32=function(){return 0|w.g(4)},v.quick=function(){return w.g(4)/4294967296},v.double=v,a(l(w.S),e),(d.pass||c||function(e,i,o,r){return r&&(r.S&&n(r,w),e.state=function(){return n(w,{})}),o?(t[u]=e,i):e})(v,y,"global"in d?d.global:this==t,d.state)}function o(e){var t,i=e.length,o=this,n=0,r=o.i=o.j=0,a=o.S=[];for(i||(e=[i++]);h>n;)a[n]=n++;for(n=0;h>n;n++)a[n]=a[r=y&r+e[n%i]+(t=a[n])],a[r]=t;(o.g=function(e){for(var t,i=0,n=o.i,r=o.j,a=o.S;e--;)t=a[n=y&n+1],i=i*h+a[y&(a[n]=a[r=y&r+t])+(a[r]=t)];return o.i=n,o.j=r,i})(h)}function n(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function r(e,t){var i,o=[],n=typeof e;if(t&&"object"==n)for(i in e)try{o.push(r(e[i],t-1))}catch(a){}return o.length?o:"string"==n?e:e+"\x00"}function a(e,t){for(var i,o=e+"",n=0;n<o.length;)t[y&n]=y&(i^=19*t[y&n])+o.charCodeAt(n++);return l(t)}function s(){try{var t;return d&&(t=d.randomBytes)?t=t(h):(t=new Uint8Array(h),(c.crypto||c.msCrypto).getRandomValues(t)),l(t)}catch(i){var o=c.navigator,n=o&&o.plugins;return[+new Date,c,n,c.screen,l(e)]}}function l(e){return String.fromCharCode.apply(0,e)}var d,c=this,h=256,m=6,p=52,u="random",b=t.pow(h,m),f=t.pow(2,p),g=2*f,y=h-1;if(t["seed"+u]=i,a(t.random(),e),"object"==typeof module&&module.exports){module.exports=i;try{d=require("crypto")}catch(w){}}else"function"==typeof define&&define.amd&&define(function(){return i})}([],Math),Cbola.tmp_=window._,function(){function e(e,t){return e.set(t[0],t[1]),e}function t(e,t){return e.add(t),e}function i(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function o(e,t,i,o){for(var n=-1,r=null==e?0:e.length;++n<r;){var a=e[n];t(o,a,i(a),e)}return o}function n(e,t){for(var i=-1,o=null==e?0:e.length;++i<o&&!1!==t(e[i],i,e););return e}function r(e,t){for(var i=-1,o=null==e?0:e.length,n=0,r=[];++i<o;){var a=e[i];t(a,i,e)&&(r[n++]=a)}return r}function a(e,t){return!(null==e||!e.length)&&-1<p(e,t,0)}function s(e,t,i){for(var o=-1,n=null==e?0:e.length;++o<n;)if(i(t,e[o]))return!0;return!1}function l(e,t){for(var i=-1,o=null==e?0:e.length,n=Array(o);++i<o;)n[i]=t(e[i],i,e);return n}function d(e,t){for(var i=-1,o=t.length,n=e.length;++i<o;)e[n+i]=t[i];return e}function c(e,t,i,o){var n=-1,r=null==e?0:e.length;for(o&&r&&(i=e[++n]);++n<r;)i=t(i,e[n],n,e);return i}function h(e,t){for(var i=-1,o=null==e?0:e.length;++i<o;)if(t(e[i],i,e))return!0;return!1}function m(e,t,i,o){var n=e.length;for(i+=o?1:-1;o?i--:++i<n;)if(t(e[i],i,e))return i;return-1}function p(e,t,i){if(t===t)e:{--i;for(var o=e.length;++i<o;)if(e[i]===t){e=i;break e}e=-1}else e=m(e,u,i);return e}function u(e){return e!==e}function b(e){return function(t){return null==t?di:t[e]}}function f(e){return function(t){return null==e?di:e[t]}}function g(e,t,i,o,n){return n(e,function(e,n,r){i=o?(o=!1,e):t(i,e,n,r)}),i}function y(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].c;return e}function w(e,t){for(var i=-1,o=Array(e);++i<e;)o[i]=t(i);return o}function v(e){return function(t){return e(t)}}function C(e,t){return l(t,function(t){return e[t]})}function _(e,t){return e.has(t)}function I(e){return"\\"+Ji[e]}function x(e){var t=-1,i=Array(e.size);return e.forEach(function(e,o){i[++t]=[o,e]}),i}function E(e,t){return function(i){return e(t(i))}}function S(e,t){for(var i=-1,o=e.length,n=0,r=[];++i<o;){var a=e[i];a!==t&&"__lodash_placeholder__"!==a||(e[i]="__lodash_placeholder__",r[n++]=i)}return r}function T(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}function A(e){if(Xi.test(e)){for(var t=qi.lastIndex=0;qi.test(e);)++t;e=t}else e=ho(e);return e}function k(e){return Xi.test(e)?e.match(qi)||[]:e.split("")}function L(e){if(Rt(e)&&!Bn(e)&&!(e instanceof N)){if(e instanceof P)return e;if(yo.call(e,"__wrapped__"))return bt(e)}return new P(e)}function O(){}function P(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=di}function N(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function B(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function D(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function M(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function R(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new M;++t<i;)this.add(e[t])}function F(e){this.size=(this.__data__=new D(e)).size}function V(e,t){var i,o=Bn(e),n=!o&&Nn(e),r=!o&&!n&&Dn(e),a=!o&&!n&&!r&&Rn(e),n=(o=o||n||r||a)?w(e.length,String):[],s=n.length;for(i in e)!t&&!yo.call(e,i)||o&&("length"==i||r&&("offset"==i||"parent"==i)||a&&("buffer"==i||"byteLength"==i||"byteOffset"==i)||nt(i,s))||n.push(i);return n}function z(e,t,i){var o=e[t];yo.call(e,t)&&Lt(o,i)&&(i!==di||t in e)||q(e,t,i)}function U(e,t){for(var i=e.length;i--;)if(Lt(e[i][0],t))return i;return-1}function j(e,t,i,o){return hn(e,function(e,n,r){t(o,e,i(e),r)}),o}function W(e,t){return e&&Oe(t,Zt(t),e)}function H(e,t){return e&&Oe(t,Kt(t),e)}function q(e,t,i){"__proto__"==t&&Do?Do(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function G(e,t,i,o,r,a){var s,l=1&t,d=2&t,c=4&t;if(i&&(s=r?i(e,o,r,a):i(e)),s!==di)return s;if(!Mt(e))return e;if(o=Bn(e)){if(s=et(e),!l)return Le(e,s)}else{var h=wn(e),m="[object Function]"==h||"[object GeneratorFunction]"==h;if(Dn(e))return Se(e,l);if("[object Object]"==h||"[object Arguments]"==h||m&&!r){if(s=d||m?{}:tt(e),!l)return d?Ne(e,H(s,e)):Pe(e,W(s,e))}else{if(!Ki[h])return r?e:{};s=it(e,h,G,l)}}if(a||(a=new F),r=a.get(e))return r;a.set(e,s);var d=c?d?Xe:Ge:d?Kt:Zt,p=o?di:d(e);return n(p||e,function(o,n){p&&(n=o,o=e[n]),z(s,n,G(o,t,i,n,e,a))}),s}function X(e,t,i,o){var n=-1,r=a,d=!0,c=e.length,h=[],m=t.length;if(!c)return h;i&&(t=l(t,v(i))),o?(r=s,d=!1):200<=t.length&&(r=_,d=!1,t=new R(t));e:for(;++n<c;){var p=e[n],u=null==i?p:i(p),p=o||0!==p?p:0;if(d&&u===u){for(var b=m;b--;)if(t[b]===u)continue e;h.push(p)}else r(t,u,o)||h.push(p)}return h}function Y(e,t){var i=[];return hn(e,function(e,o,n){t(e,o,n)&&i.push(e)}),i}function Z(e,t,i,o,n){var r=-1,a=e.length;for(i||(i=ot),n||(n=[]);++r<a;){var s=e[r];t>0&&i(s)?t>1?Z(s,t-1,i,o,n):d(n,s):o||(n[n.length]=s)}return n}function K(e,t){return e&&mn(e,t,Zt)}function Q(e,t){return r(t,function(t){return Bt(e[t])})}function J(e,t){t=xe(t,e);for(var i=0,o=t.length;null!=e&&o>i;)e=e[mt(t[i++])];return i&&i==o?e:di}function $(e,t,i){return t=t(e),Bn(e)?t:d(t,i(e))}function ee(e){if(null==e)return e===di?"[object Undefined]":"[object Null]";if(Bo&&Bo in Object(e)){var t=yo.call(e,Bo),i=e[Bo];try{e[Bo]=di;var o=!0}catch(e){}var n=vo.call(e);o&&(t?e[Bo]=i:delete e[Bo]),e=n}else e=vo.call(e);return e}function te(e,t){return null!=e&&yo.call(e,t)}function ie(e,t){return null!=e&&t in Object(e)}function oe(e){return Rt(e)&&"[object Arguments]"==ee(e)}function ne(e,t,i,o,n){if(e===t)return!0;if(null==e||null==t||!Rt(e)&&!Rt(t))return e!==e&&t!==t;e:{var r=Bn(e),a=Bn(t),s=r?"[object Array]":wn(e),l=a?"[object Array]":wn(t),s="[object Arguments]"==s?"[object Object]":s,l="[object Arguments]"==l?"[object Object]":l,d="[object Object]"==s,a="[object Object]"==l;if((l=s==l)&&Dn(e)){if(!Dn(t)){t=!1;break e}r=!0,d=!1}if(l&&!d)n||(n=new F),t=r||Rn(e)?He(e,t,i,o,ne,n):qe(e,t,s,i,o,ne,n);else{if(!(1&i)&&(r=d&&yo.call(e,"__wrapped__"),s=a&&yo.call(t,"__wrapped__"),r||s)){e=r?e.value():e,t=s?t.value():t,n||(n=new F),t=ne(e,t,i,o,n);break e}if(l)t:if(n||(n=new F),r=1&i,s=Ge(e),a=s.length,l=Ge(t).length,a==l||r){for(d=a;d--;){var c=s[d];if(!(r?c in t:yo.call(t,c))){t=!1;break t}}if((l=n.get(e))&&n.get(t))t=l==t;else{l=!0,n.set(e,t),n.set(t,e);for(var h=r;++d<a;){var c=s[d],m=e[c],p=t[c];if(o)var u=r?o(p,m,c,t,e,n):o(m,p,c,e,t,n);if(u===di?m!==p&&!ne(m,p,i,o,n):!u){l=!1;break}h||(h="constructor"==c)}l&&!h&&(i=e.constructor,o=t.constructor,i!=o&&"constructor"in e&&"constructor"in t&&!("function"==typeof i&&i instanceof i&&"function"==typeof o&&o instanceof o)&&(l=!1)),n.delete(e),n.delete(t),t=l}}else t=!1;else t=!1}}return t}function re(e,t,i,o){var n=i.length,r=n,a=!o;if(null==e)return!r;for(e=Object(e);n--;){var s=i[n];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++n<r;){var s=i[n],l=s[0],d=e[l],c=s[1];if(a&&s[2]){if(d===di&&!(l in e))return!1}else{if(s=new F,o)var h=o(d,c,l,e,t,s);if(h===di?!ne(c,d,3,o,s):!h)return!1}}return!0}function ae(e){return Rt(e)&&"[object RegExp]"==ee(e)}function se(e){return Rt(e)&&Dt(e.length)&&!!Zi[ee(e)]}function le(e){return"function"==typeof e?e:null==e?ii:"object"==typeof e?Bn(e)?me(e[0],e[1]):he(e):ai(e)}function de(e){if(!st(e))return Uo(e);var t,i=[];for(t in Object(e))yo.call(e,t)&&"constructor"!=t&&i.push(t);return i}function ce(e,t){var i=-1,o=Ot(e)?Array(e.length):[];return hn(e,function(e,n,r){o[++i]=t(e,n,r)}),o}function he(e){var t=Qe(e);return 1==t.length&&t[0][2]?lt(t[0][0],t[0][1]):function(i){return i===e||re(i,e,t)}}function me(e,t){return at(e)&&t===t&&!Mt(t)?lt(mt(e),t):function(i){var o=Xt(i,e);return o===di&&o===t?Yt(i,e):ne(t,o,3)}}function pe(e,t,i){var o=-1;return t=l(t.length?t:[ii],v(Ze())),e=ce(e,function(e,i,n){return{a:l(t,function(t){return t(e)}),b:++o,c:e}}),y(e,function(e,t){var o;e:{o=-1;for(var n=e.a,r=t.a,a=n.length,s=i.length;++o<a;){var l;t:{l=n[o];var d=r[o];if(l!==d){var c=l!==di,h=null===l,m=l===l,p=Ut(l),u=d!==di,b=null===d,f=d===d,g=Ut(d);if(!b&&!g&&!p&&l>d||p&&u&&f&&!b&&!g||h&&u&&f||!c&&f||!m){l=1;break t}if(!h&&!p&&!g&&d>l||g&&c&&m&&!h&&!p||b&&c&&m||!u&&m||!f){l=-1;break t}}l=0}if(l){if(o>=s){o=l;break e}o=l*("desc"==i[o]?-1:1);break e}}o=e.b-t.b}return o})}function ue(e){return function(t){return J(t,e)}}function be(e,t){var i="";if(!e||1>t||t>9007199254740991)return i;do t%2&&(i+=e),(t=Ro(t/2))&&(e+=e);while(t);return i}function fe(e,t){return Cn(dt(e,t,ii),e+"")}function ge(e,t,i,o){if(!Mt(e))return e;t=xe(t,e);for(var n=-1,r=t.length,a=r-1,s=e;null!=s&&++n<r;){var l=mt(t[n]),d=i;if(n!=a){var c=s[l],d=o?o(c,l,s):di;d===di&&(d=Mt(c)?c:nt(t[n+1])?[]:{})}z(s,l,d),s=s[l]}return e}function ye(e,t,i){var o=-1,n=e.length;for(0>t&&(t=-t>n?0:n+t),i=i>n?n:i,0>i&&(i+=n),n=t>i?0:i-t>>>0,t>>>=0,i=Array(n);++o<n;)i[o]=e[o+t];return i}function we(e,t){var i;return hn(e,function(e,o,n){return i=t(e,o,n),!i}),!!i}function ve(e){if("string"==typeof e)return e;if(Bn(e))return l(e,ve)+"";if(Ut(e))return dn?dn.call(e):"";var t=e+"";return"0"==t&&1/e==-ci?"-0":t}function Ce(e,t,i){var o=-1,n=a,r=e.length,l=!0,d=[],c=d;if(i)l=!1,n=s;else if(r>=200){if(n=t?null:bn(e))return T(n);l=!1,n=_,c=new R}else c=t?[]:d;e:for(;++o<r;){var h=e[o],m=t?t(h):h,h=i||0!==h?h:0;if(l&&m===m){for(var p=c.length;p--;)if(c[p]===m)continue e;t&&c.push(m),d.push(h)}else n(c,m,i)||(c!==d&&c.push(m),d.push(h))}return d}function _e(e,t){return t=xe(t,e),e=2>t.length?e:J(e,ye(t,0,-1)),null==e||delete e[mt(wt(t))]}function Ie(e,t){var i=e;return i instanceof N&&(i=i.value()),c(t,function(e,t){return t.func.apply(t.thisArg,d([e],t.args))},i)}function xe(e,t){return Bn(e)?e:at(e,t)?[e]:_n(Gt(e))}function Ee(e,t,i){var o=e.length;return i=i===di?o:i,!t&&i>=o?e:ye(e,t,i)}function Se(e,t){if(t)return e.slice();var i=e.length,i=To?To(i):new e.constructor(i);return e.copy(i),i}function Te(e){var t=new e.constructor(e.byteLength);return new So(t).set(new So(e)),t}function Ae(e,t,i,o){var n=-1,r=e.length,a=i.length,s=-1,l=t.length,d=jo(r-a,0),c=Array(l+d);for(o=!o;++s<l;)c[s]=t[s];for(;++n<a;)(o||r>n)&&(c[i[n]]=e[n]);for(;d--;)c[s++]=e[n++];return c}function ke(e,t,i,o){var n=-1,r=e.length,a=-1,s=i.length,l=-1,d=t.length,c=jo(r-s,0),h=Array(c+d);for(o=!o;++n<c;)h[n]=e[n];for(c=n;++l<d;)h[c+l]=t[l];for(;++a<s;)(o||r>n)&&(h[c+i[a]]=e[n++]);return h}function Le(e,t){var i=-1,o=e.length;for(t||(t=Array(o));++i<o;)t[i]=e[i];return t}function Oe(e,t,i,o){var n=!i;i||(i={});for(var r=-1,a=t.length;++r<a;){var s=t[r],l=o?o(i[s],e[s],s,i,e):di;l===di&&(l=e[s]),n?q(i,s,l):z(i,s,l)}return i}function Pe(e,t){return Oe(e,gn(e),t)}function Ne(e,t){
return Oe(e,yn(e),t)}function Be(e){return fe(function(t,i){var o=-1,n=i.length,r=n>1?i[n-1]:di,a=n>2?i[2]:di,r=3<e.length&&"function"==typeof r?(n--,r):di;for(a&&rt(i[0],i[1],a)&&(r=3>n?di:r,n=1),t=Object(t);++o<n;)(a=i[o])&&e(t,a,o,r);return t})}function De(e,t,i){function o(){return(this&&this!==oo&&this instanceof o?r:e).apply(n?i:this,arguments)}var n=1&t,r=Re(e);return o}function Me(e){return function(t){return c(ei($t(t).replace(Wi,"")),e,"")}}function Re(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=cn(e.prototype),t=e.apply(i,t);return Mt(t)?t:i}}function Fe(e,t,o){function n(){for(var a=arguments.length,s=Array(a),l=a,d=Ye(n);l--;)s[l]=arguments[l];return l=3>a&&s[0]!==d&&s[a-1]!==d?[]:S(s,d),a-=l.length,o>a?Ue(e,t,Ve,n.placeholder,di,s,l,di,di,o-a):i(this&&this!==oo&&this instanceof n?r:e,this,s)}var r=Re(e);return n}function Ve(e,t,i,o,n,r,a,s,l,d){function c(){for(var g=arguments.length,y=Array(g),w=g;w--;)y[w]=arguments[w];if(u){var v,C=Ye(c),w=y.length;for(v=0;w--;)y[w]===C&&++v}if(o&&(y=Ae(y,o,n,u)),r&&(y=ke(y,r,a,u)),g-=v,u&&d>g)return C=S(y,C),Ue(e,t,Ve,c.placeholder,i,y,C,s,l,d-g);if(C=m?i:this,w=p?C[e]:e,g=y.length,s){v=y.length;for(var _=Wo(s.length,v),I=Le(y);_--;){var x=s[_];y[_]=nt(x,v)?I[x]:di}}else b&&g>1&&y.reverse();return h&&g>l&&(y.length=l),this&&this!==oo&&this instanceof c&&(w=f||Re(w)),w.apply(C,y)}var h=128&t,m=1&t,p=2&t,u=24&t,b=512&t,f=p?di:Re(e);return c}function ze(e,t,o,n){function r(){for(var t=-1,l=arguments.length,d=-1,c=n.length,h=Array(c+l),m=this&&this!==oo&&this instanceof r?s:e;++d<c;)h[d]=n[d];for(;l--;)h[d++]=arguments[++t];return i(m,a?o:this,h)}var a=1&t,s=Re(e);return r}function Ue(e,t,i,o,n,r,a,s,l,d){var c=8&t,h=c?a:di;a=c?di:a;var m=c?r:di;r=c?di:r,t=(t|(c?32:64))&~(c?64:32),4&t||(t&=-4),n=[e,t,n,m,h,r,a,s,l,d],i=i.apply(di,n);e:for(s=e.name+"",l=en[s],d=yo.call(en,s)?l.length:0;d--;)if(c=l[d],h=c.func,null==h||h==e){s=c.name;break e}return l=L[s],"function"==typeof l&&s in N.prototype?e===l?s=!0:(s=fn(l),s=!!s&&e===s[0]):s=!1,s&&vn(i,n),i.placeholder=o,ct(i,e,t)}function je(e){var t=Math[e];return function(e,i){if(e=qt(e),i=null==i?0:Wo(Ht(i),292)){var o=(Gt(e)+"e").split("e"),o=t(o[0]+"e"+(+o[1]+i)),o=(Gt(o)+"e").split("e");return+(o[0]+"e"+(+o[1]-i))}return t(e)}}function We(e,t,i,o){return e===di||Lt(e,bo[i])&&!yo.call(o,i)?t:e}function He(e,t,i,o,n,r){var a=1&i,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;if((l=r.get(e))&&r.get(t))return l==t;var l=-1,d=!0,c=2&i?new R:di;for(r.set(e,t),r.set(t,e);++l<s;){var m=e[l],p=t[l];if(o)var u=a?o(p,m,l,t,e,r):o(m,p,l,e,t,r);if(u!==di){if(u)continue;d=!1;break}if(c){if(!h(t,function(e,t){return _(c,t)||m!==e&&!n(m,e,i,o,r)?void 0:c.push(t)})){d=!1;break}}else if(m!==p&&!n(m,p,i,o,r)){d=!1;break}}return r.delete(e),r.delete(t),d}function qe(e,t,i,o,n,r,a){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!r(new So(e),new So(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return Lt(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=x;case"[object Set]":if(s||(s=T),e.size!=t.size&&!(1&o))break;return(i=a.get(e))?i==t:(o|=2,a.set(e,t),t=He(s(e),s(t),o,n,r,a),a.delete(e),t);case"[object Symbol]":if(ln)return ln.call(e)==ln.call(t)}return!1}function Ge(e){return $(e,Zt,gn)}function Xe(e){return $(e,Kt,yn)}function Ye(e){return(yo.call(L,"placeholder")?L:e).placeholder}function Ze(){var e=L.iteratee||oi,e=e===oi?le:e;return arguments.length?e(arguments[0],arguments[1]):e}function Ke(e,t){var i=e.__data__,o=typeof t;return("string"==o||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==t:null===t)?i["string"==typeof t?"string":"hash"]:i.map}function Qe(e){for(var t=Zt(e),i=t.length;i--;){var o=t[i],n=e[o];t[i]=[o,n,n===n&&!Mt(n)]}return t}function Je(e,t){var i,o=null==e?di:e[t];return i=!(!Mt(o)||wo&&wo in o)&&(Bt(o)?Io:Bi).test(pt(o)),i?o:di}function $e(e,t,i){t=xe(t,e);for(var o=-1,n=t.length,r=!1;++o<n;){var a=mt(t[o]);if(!(r=null!=e&&i(e,a)))break;e=e[a]}return r||++o!=n?r:(n=null==e?0:e.length,!!n&&Dt(n)&&nt(a,n)&&(Bn(e)||Nn(e)))}function et(e){var t=e.length,i=e.constructor(t);return t&&"string"==typeof e[0]&&yo.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function tt(e){return"function"!=typeof e.constructor||st(e)?{}:cn(Ao(e))}function it(i,o,n,r){var a=i.constructor;switch(o){case"[object ArrayBuffer]":return Te(i);case"[object Boolean]":case"[object Date]":return new a(+i);case"[object DataView]":return o=r?Te(i.buffer):i.buffer,new i.constructor(o,i.byteOffset,i.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return o=r?Te(i.buffer):i.buffer,new i.constructor(o,i.byteOffset,i.length);case"[object Map]":return o=r?n(x(i),1):x(i),c(o,e,new i.constructor);case"[object Number]":case"[object String]":return new a(i);case"[object RegExp]":return o=new i.constructor(i.source,Oi.exec(i)),o.lastIndex=i.lastIndex,o;case"[object Set]":return o=r?n(T(i),1):T(i),c(o,t,new i.constructor);case"[object Symbol]":return ln?Object(ln.call(i)):{}}}function ot(e){return Bn(e)||Nn(e)||!!(Po&&e&&e[Po])}function nt(e,t){return t=null==t?9007199254740991:t,!!t&&("number"==typeof e||Mi.test(e))&&e>-1&&0==e%1&&t>e}function rt(e,t,i){if(!Mt(i))return!1;var o=typeof t;return!!("number"==o?Ot(i)&&nt(t,i.length):"string"==o&&t in i)&&Lt(i[t],e)}function at(e,t){if(Bn(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!Ut(e))||vi.test(e)||!wi.test(e)||null!=t&&e in Object(t)}function st(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||bo)}function lt(e,t){return function(i){return null!=i&&i[e]===t&&(t!==di||e in Object(i))}}function dt(e,t,o){return t=jo(t===di?e.length-1:t,0),function(){for(var n=arguments,r=-1,a=jo(n.length-t,0),s=Array(a);++r<a;)s[r]=n[t+r];for(r=-1,a=Array(t+1);++r<t;)a[r]=n[r];return a[t]=o(s),i(e,this,a)}}function ct(e,t,i){var o=t+"";t=Cn;var n,r=ut;return n=(n=o.match(Si))?n[1].split(Ti):[],i=r(n,i),(r=i.length)&&(n=r-1,i[n]=(r>1?"& ":"")+i[n],i=i.join(r>2?", ":" "),o=o.replace(Ei,"{\n/* [wrapped with "+i+"] */\n")),t(e,o)}function ht(e){var t=0,i=0;return function(){var o=Ho(),n=16-(o-i);if(i=o,n>0){if(800<=++t)return arguments[0]}else t=0;return e.apply(di,arguments)}}function mt(e){if("string"==typeof e||Ut(e))return e;var t=e+"";return"0"==t&&1/e==-ci?"-0":t}function pt(e){if(null!=e){try{return go.call(e)}catch(e){}return e+""}return""}function ut(e,t){return n(mi,function(i){var o="_."+i[0];t&i[1]&&!a(e,o)&&e.push(o)}),e.sort()}function bt(e){if(e instanceof N)return e.clone();var t=new P(e.__wrapped__,e.__chain__);return t.__actions__=Le(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function ft(e,t,i){var o=null==e?0:e.length;return o?(i=null==i?0:Ht(i),0>i&&(i=jo(o+i,0)),m(e,Ze(t,3),i)):-1}function gt(e){return(null==e?0:e.length)?Z(e,1):[]}function yt(e){return e&&e.length?e[0]:di}function wt(e){var t=null==e?0:e.length;return t?e[t-1]:di}function vt(e){return null==e?e:Go.call(e)}function Ct(e){if(!e||!e.length)return[];var t=0;return e=r(e,function(e){return Pt(e)?(t=jo(e.length,t),!0):void 0}),w(t,function(t){return l(e,b(t))})}function _t(e){return e=L(e),e.__chain__=!0,e}function It(e,t){return t(e)}function xt(){return this}function Et(e,t){return(Bn(e)?n:hn)(e,Ze(t,3))}function St(e,t){var i;if("function"!=typeof t)throw new TypeError("Expected a function");return e=Ht(e),function(){return 0<--e&&(i=t.apply(this,arguments)),1>=e&&(t=di),i}}function Tt(e,t,i){function o(t){var i=l,o=d;return l=d=di,u=t,h=e.apply(o,i)}function n(e){var i=e-p;return e-=u,p===di||i>=t||0>i||f&&e>=c}function r(){var e=On();if(n(e))return a(e);var i,o=setTimeout;i=e-u,e=t-(e-p),i=f?Wo(e,c-i):e,m=o(r,i)}function a(e){return m=di,g&&l?o(e):(l=d=di,h)}function s(){var e=On(),i=n(e);if(l=arguments,d=this,p=e,i){if(m===di)return u=e=p,m=setTimeout(r,t),b?o(e):h;if(f)return m=setTimeout(r,t),o(p)}return m===di&&(m=setTimeout(r,t)),h}var l,d,c,h,m,p,u=0,b=!1,f=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return t=qt(t)||0,Mt(i)&&(b=!!i.leading,c=(f="maxWait"in i)?jo(qt(i.maxWait)||0,t):c,g="trailing"in i?!!i.trailing:g),s.cancel=function(){m!==di&&clearTimeout(m),u=0,l=p=d=m=di},s.flush=function(){return m===di?h:a(On())},s}function At(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var o=arguments,n=t?t.apply(this,o):o[0],r=i.cache;return r.has(n)?r.get(n):(o=e.apply(this,o),i.cache=r.set(n,o)||r,o)};return i.cache=new(At.Cache||M),i}function kt(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Lt(e,t){return e===t||e!==e&&t!==t}function Ot(e){return null!=e&&Dt(e.length)&&!Bt(e)}function Pt(e){return Rt(e)&&Ot(e)}function Nt(e){if(!Rt(e))return!1;var t=ee(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Vt(e)}function Bt(e){return!!Mt(e)&&(e=ee(e),"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function Dt(e){return"number"==typeof e&&e>-1&&0==e%1&&9007199254740991>=e}function Mt(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Rt(e){return null!=e&&"object"==typeof e}function Ft(e){return"number"==typeof e||Rt(e)&&"[object Number]"==ee(e)}function Vt(e){return!(!Rt(e)||"[object Object]"!=ee(e))&&(e=Ao(e),null===e||(e=yo.call(e,"constructor")&&e.constructor,"function"==typeof e&&e instanceof e&&go.call(e)==Co))}function zt(e){return"string"==typeof e||!Bn(e)&&Rt(e)&&"[object String]"==ee(e)}function Ut(e){return"symbol"==typeof e||Rt(e)&&"[object Symbol]"==ee(e)}function jt(e){if(!e)return[];if(Ot(e))return zt(e)?k(e):Le(e);if(No&&e[No]){e=e[No]();for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}return t=wn(e),("[object Map]"==t?x:"[object Set]"==t?T:Qt)(e)}function Wt(e){return e?(e=qt(e),e===ci||e===-ci?1.7976931348623157e308*(0>e?-1:1):e===e?e:0):0===e?e:0}function Ht(e){e=Wt(e);var t=e%1;return e===e?t?e-t:e:0}function qt(e){if("number"==typeof e)return e;if(Ut(e))return hi;if(Mt(e)&&(e="function"==typeof e.valueOf?e.valueOf():e,e=Mt(e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e.replace(Ii,"");var t=Ni.test(e);return t||Di.test(e)?eo(e.slice(2),t?2:8):Pi.test(e)?hi:+e}function Gt(e){return null==e?"":ve(e)}function Xt(e,t,i){return e=null==e?di:J(e,t),e===di?i:e}function Yt(e,t){return null!=e&&$e(e,t,ie)}function Zt(e){return Ot(e)?V(e):de(e)}function Kt(e){if(Ot(e))e=V(e,!0);else if(Mt(e)){var t,i=st(e),o=[];for(t in e)("constructor"!=t||!i&&yo.call(e,t))&&o.push(t);e=o}else{if(t=[],null!=e)for(i in Object(e))t.push(i);e=t}return e}function Qt(e){return null==e?[]:C(e,Zt(e))}function Jt(e){return Hn(Gt(e).toLowerCase())}function $t(e){return(e=Gt(e))&&e.replace(Ri,mo).replace(Hi,"")}function ei(e,t,i){return e=Gt(e),t=i?di:t,t===di?Yi.test(e)?e.match(Gi)||[]:e.match(Ai)||[]:e.match(t)||[]}function ti(e){return function(){return e}}function ii(e){return e}function oi(e){return le("function"==typeof e?e:G(e,1))}function ni(e,t,i){var o=Zt(t),r=Q(t,o);null!=i||Mt(t)&&(r.length||!o.length)||(i=t,t=e,e=this,r=Q(t,Zt(t)));var a=!(Mt(i)&&"chain"in i&&!i.chain),s=Bt(e);return n(r,function(i){var o=t[i];e[i]=o,s&&(e.prototype[i]=function(){var t=this.__chain__;if(a||t){var i=e(this.__wrapped__);return(i.__actions__=Le(this.__actions__)).push({func:o,args:arguments,thisArg:e}),i.__chain__=t,i}return o.apply(e,d([this.value()],arguments))})}),e}function ri(){}function ai(e){return at(e)?b(mt(e)):ue(e)}function si(){return[]}function li(){return!1}var di,ci=1/0,hi=NaN,mi=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],pi=/\b__p\+='';/g,ui=/\b(__p\+=)''\+/g,bi=/(__e\(.*?\)|\b__t\))\+'';/g,fi=/[&<>"']/g,gi=RegExp(fi.source),yi=/<%=([\s\S]+?)%>/g,wi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vi=/^\w*$/,Ci=/^\./,_i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ii=/^\s+|\s+$/g,xi=/\s+$/,Ei=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Si=/\{\n\/\* \[wrapped with (.+)\] \*/,Ti=/,? & /,Ai=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ki=/\\(\\)?/g,Li=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Oi=/\w*$/,Pi=/^[-+]0x[0-9a-f]+$/i,Ni=/^0b[01]+$/i,Bi=/^\[object .+?Constructor\]$/,Di=/^0o[0-7]+$/i,Mi=/^(?:0|[1-9]\d*)$/,Ri=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fi=/($^)/,Vi=/['\n\r\u2028\u2029\\]/g,zi="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",Ui="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+zi,ji="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",Wi=RegExp("['’]","g"),Hi=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),qi=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+ji+zi,"g"),Gi=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)|\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)|\\d+",Ui].join("|"),"g"),Xi=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Yi=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zi={};Zi["[object Float32Array]"]=Zi["[object Float64Array]"]=Zi["[object Int8Array]"]=Zi["[object Int16Array]"]=Zi["[object Int32Array]"]=Zi["[object Uint8Array]"]=Zi["[object Uint8ClampedArray]"]=Zi["[object Uint16Array]"]=Zi["[object Uint32Array]"]=!0,Zi["[object Arguments]"]=Zi["[object Array]"]=Zi["[object ArrayBuffer]"]=Zi["[object Boolean]"]=Zi["[object DataView]"]=Zi["[object Date]"]=Zi["[object Error]"]=Zi["[object Function]"]=Zi["[object Map]"]=Zi["[object Number]"]=Zi["[object Object]"]=Zi["[object RegExp]"]=Zi["[object Set]"]=Zi["[object String]"]=Zi["[object WeakMap]"]=!1;var Ki={};Ki["[object Arguments]"]=Ki["[object Array]"]=Ki["[object ArrayBuffer]"]=Ki["[object DataView]"]=Ki["[object Boolean]"]=Ki["[object Date]"]=Ki["[object Float32Array]"]=Ki["[object Float64Array]"]=Ki["[object Int8Array]"]=Ki["[object Int16Array]"]=Ki["[object Int32Array]"]=Ki["[object Map]"]=Ki["[object Number]"]=Ki["[object Object]"]=Ki["[object RegExp]"]=Ki["[object Set]"]=Ki["[object String]"]=Ki["[object Symbol]"]=Ki["[object Uint8Array]"]=Ki["[object Uint8ClampedArray]"]=Ki["[object Uint16Array]"]=Ki["[object Uint32Array]"]=!0,Ki["[object Error]"]=Ki["[object Function]"]=Ki["[object WeakMap]"]=!1;var Qi,Ji={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$i=parseFloat,eo=parseInt,to="object"==typeof global&&global&&global.Object===Object&&global,io="object"==typeof self&&self&&self.Object===Object&&self,oo=to||io||Function("return this")(),no="object"==typeof exports&&exports&&!exports.nodeType&&exports,ro=no&&"object"==typeof module&&module&&!module.nodeType&&module,ao=ro&&ro.exports===no,so=ao&&to.process;e:{try{Qi=so&&so.binding&&so.binding("util");break e}catch(e){}Qi=void 0}var lo=Qi&&Qi.isRegExp,co=Qi&&Qi.isTypedArray,ho=b("length"),mo=f({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),po=f({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),uo=Array.prototype,bo=Object.prototype,fo=oo["__core-js_shared__"],go=Function.prototype.toString,yo=bo.hasOwnProperty,wo=function(){var e=/[^.]+$/.exec(fo&&fo.keys&&fo.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),vo=bo.toString,Co=go.call(Object),_o=oo._,Io=RegExp("^"+go.call(yo).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xo=ao?oo.Buffer:di,Eo=oo.Symbol,So=oo.Uint8Array,To=xo?xo.allocUnsafe:di,Ao=E(Object.getPrototypeOf,Object),ko=Object.create,Lo=bo.propertyIsEnumerable,Oo=uo.splice,Po=Eo?Eo.isConcatSpreadable:di,No=Eo?Eo.iterator:di,Bo=Eo?Eo.toStringTag:di,Do=function(){try{var e=Je(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Mo=Math.ceil,Ro=Math.floor,Fo=Object.getOwnPropertySymbols,Vo=xo?xo.isBuffer:di,zo=uo.join,Uo=E(Object.keys,Object),jo=Math.max,Wo=Math.min,Ho=Date.now,qo=Math.random,Go=uo.reverse,Xo=Je(oo,"DataView"),Yo=Je(oo,"Map"),Zo=Je(oo,"Promise"),Ko=Je(oo,"Set"),Qo=Je(oo,"WeakMap"),Jo=Je(Object,"create"),$o=Qo&&new Qo,en={},tn=pt(Xo),on=pt(Yo),nn=pt(Zo),rn=pt(Ko),an=pt(Qo),sn=Eo?Eo.prototype:di,ln=sn?sn.valueOf:di,dn=sn?sn.toString:di,cn=function(){function e(){}return function(t){return Mt(t)?ko?ko(t):(e.prototype=t,t=new e,e.prototype=di,t):{}}}();L.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:yi,variable:"",imports:{_:L}},L.prototype=O.prototype,L.prototype.constructor=L,P.prototype=cn(O.prototype),P.prototype.constructor=P,N.prototype=cn(O.prototype),N.prototype.constructor=N,B.prototype.clear=function(){this.__data__=Jo?Jo(null):{},this.size=0},B.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},B.prototype.get=function(e){var t=this.__data__;return Jo?(e=t[e],"__lodash_hash_undefined__"===e?di:e):yo.call(t,e)?t[e]:di},B.prototype.has=function(e){var t=this.__data__;return Jo?t[e]!==di:yo.call(t,e)},B.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Jo&&t===di?"__lodash_hash_undefined__":t,this},D.prototype.clear=function(){this.__data__=[],this.size=0},D.prototype.delete=function(e){var t=this.__data__;return e=U(t,e),!(0>e||(e==t.length-1?t.pop():Oo.call(t,e,1),--this.size,0))},D.prototype.get=function(e){var t=this.__data__;return e=U(t,e),0>e?di:t[e][1]},D.prototype.has=function(e){return-1<U(this.__data__,e)},D.prototype.set=function(e,t){var i=this.__data__,o=U(i,e);return 0>o?(++this.size,i.push([e,t])):i[o][1]=t,this},M.prototype.clear=function(){this.size=0,this.__data__={hash:new B,map:new(Yo||D),string:new B}},M.prototype.delete=function(e){return e=Ke(this,e).delete(e),this.size-=e?1:0,e},M.prototype.get=function(e){return Ke(this,e).get(e)},M.prototype.has=function(e){return Ke(this,e).has(e)},M.prototype.set=function(e,t){var i=Ke(this,e),o=i.size;return i.set(e,t),this.size+=i.size==o?0:1,this},R.prototype.add=R.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},R.prototype.has=function(e){return this.__data__.has(e)},F.prototype.clear=function(){this.__data__=new D,this.size=0},F.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},F.prototype.get=function(e){return this.__data__.get(e)},F.prototype.has=function(e){return this.__data__.has(e)},F.prototype.set=function(e,t){var i=this.__data__;if(i instanceof D){var o=i.__data__;if(!Yo||199>o.length)return o.push([e,t]),this.size=++i.size,this;i=this.__data__=new M(o)}return i.set(e,t),this.size=i.size,this};var hn=function(e,t){return function(i,o){if(null==i)return i;if(!Ot(i))return e(i,o);for(var n=i.length,r=t?n:-1,a=Object(i);(t?r--:++r<n)&&!1!==o(a[r],r,a););return i}}(K),mn=function(e){return function(t,i,o){var n=-1,r=Object(t);o=o(t);for(var a=o.length;a--;){var s=o[e?a:++n];if(!1===i(r[s],s,r))break}return t}}(),pn=$o?function(e,t){return $o.set(e,t),e}:ii,un=Do?function(e,t){return Do(e,"toString",{configurable:!0,enumerable:!1,value:ti(t),writable:!0})}:ii,bn=Ko&&1/T(new Ko([,-0]))[1]==ci?function(e){return new Ko(e)}:ri,fn=$o?function(e){return $o.get(e)}:ri,gn=Fo?function(e){return null==e?[]:(e=Object(e),r(Fo(e),function(t){return Lo.call(e,t)}))}:si,yn=Fo?function(e){for(var t=[];e;)d(t,gn(e)),e=Ao(e);return t}:si,wn=ee;(Xo&&"[object DataView]"!=wn(new Xo(new ArrayBuffer(1)))||Yo&&"[object Map]"!=wn(new Yo)||Zo&&"[object Promise]"!=wn(Zo.resolve())||Ko&&"[object Set]"!=wn(new Ko)||Qo&&"[object WeakMap]"!=wn(new Qo))&&(wn=function(e){var t=ee(e);if(e=(e="[object Object]"==t?e.constructor:di)?pt(e):"")switch(e){case tn:return"[object DataView]";case on:return"[object Map]";case nn:return"[object Promise]";case rn:return"[object Set]";case an:return"[object WeakMap]"}return t});var vn=ht(pn),Cn=ht(un),_n=function(e){e=At(e,function(e){return 500===t.size&&t.clear(),e});var t=e.cache;return e}(function(e){var t=[];return Ci.test(e)&&t.push(""),e.replace(_i,function(e,i,o,n){t.push(o?n.replace(ki,"$1"):i||e)}),t}),In=fe(function(e,t){return Pt(e)?X(e,Z(t,1,Pt,!0)):[]}),xn=fe(function(e,t){var i=wt(t);return Pt(i)&&(i=di),Pt(e)?X(e,Z(t,1,Pt,!0),Ze(i,2)):[]}),En=fe(function(e){return Ce(Z(e,1,Pt,!0))}),Sn=fe(function(e){var t=wt(e);return Pt(t)&&(t=di),Ce(Z(e,1,Pt,!0),Ze(t,2))}),Tn=fe(Ct);!function(e){return Cn(dt(e,di,gt),e+"")}(function(e){var t=e.length,i=t?e[0]:0,o=this.__wrapped__,n=function(t){for(var i=-1,o=e.length,n=Array(o),r=null==t;++i<o;)n[i]=r?di:Xt(t,e[i]);return n};return!(t>1||this.__actions__.length)&&o instanceof N&&nt(i)?(o=o.slice(i,+i+(t?1:0)),o.__actions__.push({func:It,args:[n],thisArg:di}),new P(o,this.__chain__).thru(function(e){return t&&!e.length&&e.push(di),e})):this.thru(n)});var An=function(e){return function(t,i,o){var n=Object(t);if(!Ot(t)){var r=Ze(i,3);t=Zt(t),i=function(e){return r(n[e],e,n)}}return i=e(t,i,o),i>-1?n[r?t[i]:i]:di}}(ft),kn=function(e,t){return function(i,n){var r=Bn(i)?o:j,a=t?t():{};return r(i,e,Ze(n,2),a)}}(function(e,t,i){yo.call(e,i)?e[i].push(t):q(e,i,[t])}),Ln=fe(function(e,t){if(null==e)return[];var i=t.length;return i>1&&rt(e,t[0],t[1])?t=[]:i>2&&rt(t[0],t[1],t[2])&&(t=[t[0]]),pe(e,Z(t,1),[])}),On=function(){return oo.Date.now()};At.Cache=M;var Pn=fe(function(e,t){var i=S(t,Ye(Pn)),o=e,n=32,r=di,a=t,s=i,l=void 0,d=void 0,c=2&n;if(!c&&"function"!=typeof o)throw new TypeError("Expected a function");var h=a?a.length:0;if(h||(n&=-97,a=s=di),l=l===di?l:jo(Ht(l),0),d=d===di?d:Ht(d),h-=s?s.length:0,64&n)var m=a,p=s,a=s=di;return i=c?di:fn(o),m=[o,n,r,a,s,m,p,void 0,l,d],i&&(r=m[1],o=i[1],n=r|o,a=128==o&&8==r||128==o&&256==r&&m[7].length<=i[8]||384==o&&i[7].length<=i[8]&&8==r,131>n||a)&&(1&o&&(m[2]=i[2],n|=1&r?0:4),(r=i[3])&&(a=m[3],m[3]=a?Ae(a,r,i[4]):r,m[4]=a?S(m[3],"__lodash_placeholder__"):i[4]),(r=i[5])&&(a=m[5],m[5]=a?ke(a,r,i[6]):r,m[6]=a?S(m[5],"__lodash_placeholder__"):i[6]),(r=i[7])&&(m[7]=r),128&o&&(m[8]=null==m[8]?i[8]:Wo(m[8],i[8])),null==m[9]&&(m[9]=i[9]),m[0]=i[0],m[1]=n),o=m[0],n=m[1],r=m[2],a=m[3],s=m[4],d=m[9]=m[9]===di?c?0:o.length:jo(m[9]-h,0),!d&&24&n&&(n&=-25),c=n&&1!=n?8==n||16==n?Fe(o,n,d):32!=n&&33!=n||s.length?Ve.apply(di,m):ze(o,n,r,a):De(o,n,r),ct((i?pn:vn)(c,m),o,n)}),Nn=oe(function(){return arguments}())?oe:function(e){return Rt(e)&&yo.call(e,"callee")&&!Lo.call(e,"callee")},Bn=Array.isArray,Dn=Vo||li,Mn=lo?v(lo):ae,Rn=co?v(co):se,Fn=Be(function(e,t){if(st(t)||Ot(t))Oe(t,Zt(t),e);else for(var i in t)yo.call(t,i)&&z(e,i,t[i])}),Vn=Be(function(e,t){Oe(t,Kt(t),e)}),zn=Be(function(e,t,i,o){Oe(t,Kt(t),e,o)}),Un=fe(function(e){return e.push(di,We),i(zn,di,e)}),jn=Me(function(e,t,i){return t=t.toLowerCase(),e+(i?Jt(t):t)}),Wn=Me(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),Hn=function(e){return function(t){t=Gt(t);var i=Xi.test(t)?k(t):di,o=i?i[0]:t.charAt(0);return t=i?Ee(i,1).join(""):t.slice(1),o[e]()+t}}("toUpperCase"),qn=fe(function(e,t){try{return i(e,di,t)}catch(e){return Nt(e)?e:Error(e)}}),Gn=function(e){return function(t,i,o){o&&"number"!=typeof o&&rt(t,i,o)&&(i=o=di),t=Wt(t),i===di?(i=t,t=0):i=Wt(i),o=o===di?i>t?1:-1:Wt(o);var n=-1;i=jo(Mo((i-t)/(o||1)),0);for(var r=Array(i);i--;)r[e?i:++n]=t,t+=o;return r}}(),Xn=je("floor"),Yn=je("round");L.assign=Fn,L.assignIn=Vn,L.assignInWith=zn,L.before=St,L.chain=_t,L.concat=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),i=arguments[0];e--;)t[e-1]=arguments[e];return d(Bn(i)?Le(i):[i],Z(t,1))},L.constant=ti,L.debounce=Tt,L.defaults=Un,L.difference=In,L.differenceBy=xn,L.filter=function(e,t){return(Bn(e)?r:Y)(e,Ze(t,3))},L.flatten=gt,L.groupBy=kn,L.iteratee=oi,L.keys=Zt,L.keysIn=Kt,L.map=function(e,t){return(Bn(e)?l:ce)(e,Ze(t,3))},L.memoize=At,L.mixin=ni,L.negate=kt,L.once=function(e){return St(2,e)},L.partial=Pn,L.property=ai,L.range=Gn,L.remove=function(e,t){var i=[];if(!e||!e.length)return i;var o=-1,n=[],r=e.length;for(t=Ze(t,3);++o<r;){var a=e[o];t(a,o,e)&&(i.push(a),n.push(o))}for(o=e?n.length:0,r=o-1;o--;)if(a=n[o],o==r||a!==s){var s=a;nt(a)?Oo.call(e,a,1):_e(e,a)}return i},L.reverse=vt,L.set=function(e,t,i){return null==e?e:ge(e,t,i)},L.setWith=function(e,t,i,o){return o="function"==typeof o?o:di,null==e?e:ge(e,t,i,o)},L.sortBy=Ln,L.split=function(e,t,i){return i&&"number"!=typeof i&&rt(e,t,i)&&(t=i=di),i=i===di?4294967295:i>>>0,i?(e=Gt(e))&&("string"==typeof t||null!=t&&!Mn(t))&&(t=ve(t),!t&&Xi.test(e))?Ee(k(e),0,i):e.split(t,i):[]},L.tap=function(e,t){return t(e),e},L.throttle=function(e,t,i){var o=!0,n=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Mt(i)&&(o="leading"in i?!!i.leading:o,n="trailing"in i?!!i.trailing:n),Tt(e,t,{leading:o,maxWait:t,trailing:n})},L.thru=It,L.toArray=jt,L.toPath=function(e){return Bn(e)?l(e,mt):Ut(e)?[e]:Le(_n(Gt(e)))},L.union=En,L.unionBy=Sn,L.uniq=function(e){return e&&e.length?Ce(e):[]},L.unset=function(e,t){return null==e||_e(e,t)},L.unzip=Ct,L.values=Qt,L.words=ei,L.zip=Tn,L.extend=Vn,L.extendWith=zn,ni(L,L),L.attempt=qn,L.camelCase=jn,L.capitalize=Jt,L.clone=function(e){return G(e,4)},L.cloneDeep=function(e){return G(e,5)},L.deburr=$t,L.eq=Lt,L.escape=function(e){return(e=Gt(e))&&gi.test(e)?e.replace(fi,po):e},L.find=An,L.findIndex=ft,L.floor=Xn,L.forEach=Et,L.get=Xt,L.has=function(e,t){return null!=e&&$e(e,t,te)},L.hasIn=Yt,L.head=yt,L.identity=ii,L.indexOf=function(e,t,i){var o=null==e?0:e.length;return o?(i=null==i?0:Ht(i),0>i&&(i=jo(o+i,0)),p(e,t,i)):-1},L.isArguments=Nn,L.isArray=Bn,L.isArrayLike=Ot,L.isArrayLikeObject=Pt,L.isBuffer=Dn,L.isEmpty=function(e){if(null==e)return!0;if(Ot(e)&&(Bn(e)||"string"==typeof e||"function"==typeof e.splice||Dn(e)||Rn(e)||Nn(e)))return!e.length;var t=wn(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(st(e))return!de(e).length;for(var i in e)if(yo.call(e,i))return!1;return!0},L.isError=Nt,L.isFunction=Bt,L.isLength=Dt,L.isNaN=function(e){return Ft(e)&&e!=+e},L.isNil=function(e){return null==e},L.isNull=function(e){return null===e},L.isNumber=Ft,L.isObject=Mt,L.isObjectLike=Rt,L.isPlainObject=Vt,L.isRegExp=Mn,L.isString=zt,L.isSymbol=Ut,L.isTypedArray=Rn,L.isUndefined=function(e){return e===di},L.join=function(e,t){return null==e?"":zo.call(e,t)},L.kebabCase=Wn,L.last=wt,L.stubArray=si,L.stubFalse=li,L.noConflict=function(){return oo._===this&&(oo._=_o),this},L.noop=ri,L.now=On,L.padStart=function(e,t,i){e=Gt(e);var o=(t=Ht(t))?A(e):0;return t&&t>o&&(t-=o,i=i===di?" ":ve(i),o=i.length,2>o?t=o?be(i,t):i:(o=be(i,Mo(t/A(i))),t=Xi.test(i)?Ee(k(o),0,t).join(""):o.slice(0,t)),e=t+e),e},L.random=function(e,t,i){if(i&&"boolean"!=typeof i&&rt(e,t,i)&&(t=i=di),i===di&&("boolean"==typeof t?(i=t,t=di):"boolean"==typeof e&&(i=e,e=di)),e===di&&t===di?(e=0,t=1):(e=Wt(e),t===di?(t=e,e=0):t=Wt(t)),e>t){var o=e;e=t,t=o}return i||e%1||t%1?(i=qo(),Wo(e+i*(t-e+$i("1e-"+((i+"").length-1))),t)):e+Ro(qo()*(t-e+1))},L.reduce=function(e,t,i){var o=Bn(e)?c:g,n=3>arguments.length;return o(e,Ze(t,4),i,n,hn)},L.result=function(e,t,i){t=xe(t,e);var o=-1,n=t.length;for(n||(n=1,e=di);++o<n;){var r=null==e?di:e[mt(t[o])];r===di&&(o=n,r=i),e=Bt(r)?r.call(e):r}return e},L.round=Yn,L.size=function(e){if(null==e)return 0;if(Ot(e))return zt(e)?A(e):e.length;var t=wn(e);return"[object Map]"==t||"[object Set]"==t?e.size:de(e).length},L.some=function(e,t,i){var o=Bn(e)?h:we;return i&&rt(e,t,i)&&(t=di),o(e,Ze(t,3))},L.startsWith=function(e,t,i){
if(e=Gt(e),null==i)i=0;else{i=Ht(i);var o=e.length;i===i&&(o!==di&&(i=o>=i?i:o),0!==di&&(i=i>=0?i:0))}return t=ve(t),e.slice(i,i+t.length)==t},L.template=function(e,t,i){var o=L.templateSettings;i&&rt(e,t,i)&&(t=di),e=Gt(e),t=zn({},t,o,We),i=zn({},t.imports,o.imports,We);var n,r,a=Zt(i),s=C(i,a),l=0;i=t.interpolate||Fi;var d="__p+='",c="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(e.replace(RegExp((t.escape||Fi).source+"|"+i.source+"|"+(i===yi?Li:Fi).source+"|"+(t.evaluate||Fi).source+"|$","g"),function(t,i,o,a,s,c){return o||(o=a),d+=e.slice(l,c).replace(Vi,I),i&&(n=!0,d+="'+__e("+i+")+'"),s&&(r=!0,d+="';"+s+";\n__p+='"),o&&(d+="'+((__t=("+o+"))==null?'':__t)+'"),l=c+t.length,t}),d+="';",(t=t.variable)||(d="with(obj){"+d+"}"),d=(r?d.replace(pi,""):d).replace(ui,"$1").replace(bi,"$1;"),d="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(n?",__e=_.escape":"")+(r?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+d+"return __p}",t=qn(function(){return Function(a,c+"return "+d).apply(di,s)}),t.source=d,Nt(t))throw t;return t},L.toFinite=Wt,L.toInteger=Ht,L.toLower=function(e){return Gt(e).toLowerCase()},L.toNumber=qt,L.toString=Gt,L.trimEnd=function(e,t,i){if((e=Gt(e))&&(i||t===di))return e.replace(xi,"");if(!e||!(t=ve(t)))return e;for(e=k(e),t=k(t),i=e.length;i--&&-1<p(t,e[i],0););return Ee(e,0,i+1).join("")},L.upperFirst=Hn,L.each=Et,L.first=yt,ni(L,function(){var e={};return K(L,function(t,i){yo.call(L.prototype,i)||(e[i]=t)}),e}(),{chain:!1}),L.VERSION="4.17.4",Pn.placeholder=L,n(["drop","take"],function(e,t){N.prototype[e]=function(i){i=i===di?1:jo(Ht(i),0);var o=this.__filtered__&&!t?new N(this):this.clone();return o.__filtered__?o.__takeCount__=Wo(i,o.__takeCount__):o.__views__.push({size:Wo(i,4294967295),type:e+(0>o.__dir__?"Right":"")}),o},N.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),n(["filter","map","takeWhile"],function(e,t){var i=t+1,o=1==i||3==i;N.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ze(e,3),type:i}),t.__filtered__=t.__filtered__||o,t}}),n(["head","last"],function(e,t){var i="take"+(t?"Right":"");N.prototype[e]=function(){return this[i](1).value()[0]}}),n(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");N.prototype[e]=function(){return this.__filtered__?new N(this):this[i](1)}}),N.prototype.compact=function(){return this.filter(ii)},N.prototype.find=function(e){return this.filter(e).head()},N.prototype.findLast=function(e){return this.reverse().find(e)},N.prototype.invokeMap=fe(function(e,t){return"function"==typeof e?new N(this):this.map(function(o){var n=e,n=xe(n,o);return o=2>n.length?o:J(o,ye(n,0,-1)),n=null==o?o:o[mt(wt(n))],null==n?di:i(n,o,t)})}),N.prototype.reject=function(e){return this.filter(kt(Ze(e)))},N.prototype.slice=function(e,t){e=Ht(e);var i=this;return i.__filtered__&&(e>0||0>t)?new N(i):(0>e?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==di&&(t=Ht(t),i=0>t?i.dropRight(-t):i.take(t-e)),i)},N.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},N.prototype.toArray=function(){return this.take(4294967295)},K(N.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),n=L[o?"take"+("last"==t?"Right":""):t],r=o||/^find/.test(t);n&&(L.prototype[t]=function(){var t=this.__wrapped__,a=o?[1]:arguments,s=t instanceof N,l=a[0],c=s||Bn(t),h=function(e){return e=n.apply(L,d([e],a)),o&&m?e[0]:e};c&&i&&"function"==typeof l&&1!=l.length&&(s=c=!1);var m=this.__chain__,p=!!this.__actions__.length,l=r&&!m,s=s&&!p;return!r&&c?(t=s?t:new N(this),t=e.apply(t,a),t.__actions__.push({func:It,args:[h],thisArg:di}),new P(t,m)):l&&s?e.apply(this,a):(t=this.thru(h),l?o?t.value()[0]:t.value():t)})}),n("pop push shift sort splice unshift".split(" "),function(e){var t=uo[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);L.prototype[e]=function(){var e=arguments;if(o&&!this.__chain__){var n=this.value();return t.apply(Bn(n)?n:[],e)}return this[i](function(i){return t.apply(Bn(i)?i:[],e)})}}),K(N.prototype,function(e,t){var i=L[t];if(i){var o=i.name+"";(en[o]||(en[o]=[])).push({name:t,func:i})}}),en[Ve(di,2).name]=[{name:"wrapper",func:di}],N.prototype.clone=function(){var e=new N(this.__wrapped__);return e.__actions__=Le(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Le(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Le(this.__views__),e},N.prototype.reverse=function(){if(this.__filtered__){var e=new N(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},N.prototype.value=function(){var e,t=this.__wrapped__.value(),i=this.__dir__,o=Bn(t),n=0>i,r=o?t.length:0;e=0;for(var a=r,s=this.__views__,l=-1,d=s.length;++l<d;){var c=s[l],h=c.size;switch(c.type){case"drop":e+=h;break;case"dropRight":a-=h;break;case"take":a=Wo(a,e+h);break;case"takeRight":e=jo(e,a-h)}}if(e={start:e,end:a},a=e.start,s=e.end,e=s-a,a=n?s:a-1,s=this.__iteratees__,l=s.length,d=0,c=Wo(e,this.__takeCount__),!o||!n&&r==e&&c==e)return Ie(t,this.__actions__);o=[];e:for(;e--&&c>d;){for(a+=i,n=-1,r=t[a];++n<l;){var m=s[n],h=m.type,m=m.iteratee(r);if(2==h)r=m;else if(!m){if(1==h)continue e;break e}}o[d++]=r}return o},L.prototype.chain=function(){return _t(this)},L.prototype.commit=function(){return new P(this.value(),this.__chain__)},L.prototype.next=function(){this.__values__===di&&(this.__values__=jt(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?di:this.__values__[this.__index__++]}},L.prototype.plant=function(e){for(var t,i=this;i instanceof O;){var o=bt(i);o.__index__=0,o.__values__=di,t?n.__wrapped__=o:t=o;var n=o,i=i.__wrapped__}return n.__wrapped__=e,t},L.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof N?(this.__actions__.length&&(e=new N(this)),e=e.reverse(),e.__actions__.push({func:It,args:[vt],thisArg:di}),new P(e,this.__chain__)):this.thru(vt)},L.prototype.toJSON=L.prototype.valueOf=L.prototype.value=function(){return Ie(this.__wrapped__,this.__actions__)},L.prototype.first=L.prototype.head,No&&(L.prototype[No]=xt),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(oo._=L,define(function(){return L})):ro?((ro.exports=L)._=L,no._=L):oo._=L}.call(this),window.Cbola._=_.noConflict(),Cbola.tmp_&&(window._=Cbola.tmp_),Cbola.tmp_=null;var CryptoJSCbola=CryptoJSCbola||function(e,t){var i={},o=i.lib={},n=o.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var i=new e;return t&&i.mixIn(t),i.$super=this,i},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),r=o.WordArray=n.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,i=e.words,o=this.sigBytes,e=e.sigBytes;if(this.clamp(),o%4)for(var n=0;e>n;n++)t[o+n>>>2]|=(i[n>>>2]>>>24-8*(n%4)&255)<<24-8*((o+n)%4);else if(65535<i.length)for(n=0;e>n;n+=4)t[o+n>>>2]=i[n>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-8*(i%4),t.length=e.ceil(i/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],o=0;t>o;o+=4)i.push(4294967296*e.random()|0);return r.create(i,t)}}),a=i.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,e=e.sigBytes,i=[],o=0;e>o;o++){var n=t[o>>>2]>>>24-8*(o%4)&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;t>o;o+=2)i[o>>>3]|=parseInt(e.substr(o,2),16)<<24-4*(o%8);return r.create(i,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,e=e.sigBytes,i=[],o=0;e>o;o++)i.push(String.fromCharCode(t[o>>>2]>>>24-8*(o%4)&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;t>o;o++)i[o>>>2]|=(255&e.charCodeAt(o))<<24-8*(o%4);return r.create(i,t)}},d=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},c=o.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=r.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,o=i.words,n=i.sigBytes,a=this.blockSize,s=n/(4*a),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0),t=s*a,n=e.min(4*t,n);if(t){for(var l=0;t>l;l+=a)this._doProcessBlock(o,l);l=o.splice(0,t),i.sigBytes-=n}return r.create(l,n)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=c.extend({init:function(){this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,i){return e.create(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return h.HMAC.create(e,i).finalize(t)}}});var h=i.algo={};return i}(Math);!function(e){function t(e,t,i,o,n,r,a){return e=e+(t&i|~t&o)+n+a,(e<<r|e>>>32-r)+t}function i(e,t,i,o,n,r,a){return e=e+(t&o|i&~o)+n+a,(e<<r|e>>>32-r)+t}function o(e,t,i,o,n,r,a){return e=e+(t^i^o)+n+a,(e<<r|e>>>32-r)+t}function n(e,t,i,o,n,r,a){return e=e+(i^(t|~o))+n+a,(e<<r|e>>>32-r)+t}var r=CryptoJSCbola,a=r.lib,s=a.WordArray,a=a.Hasher,l=r.algo,d=[];!function(){for(var t=0;64>t;t++)d[t]=4294967296*e.abs(e.sin(t+1))|0}(),l=l.MD5=a.extend({_doReset:function(){this._hash=s.create([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,r){for(var a=0;16>a;a++){var s=r+a,l=e[s];e[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}for(var s=this._hash.words,l=s[0],c=s[1],h=s[2],m=s[3],a=0;64>a;a+=4)16>a?(l=t(l,c,h,m,e[r+a],7,d[a]),m=t(m,l,c,h,e[r+a+1],12,d[a+1]),h=t(h,m,l,c,e[r+a+2],17,d[a+2]),c=t(c,h,m,l,e[r+a+3],22,d[a+3])):32>a?(l=i(l,c,h,m,e[r+(a+1)%16],5,d[a]),m=i(m,l,c,h,e[r+(a+6)%16],9,d[a+1]),h=i(h,m,l,c,e[r+(a+11)%16],14,d[a+2]),c=i(c,h,m,l,e[r+a%16],20,d[a+3])):48>a?(l=o(l,c,h,m,e[r+(3*a+5)%16],4,d[a]),m=o(m,l,c,h,e[r+(3*a+8)%16],11,d[a+1]),h=o(h,m,l,c,e[r+(3*a+11)%16],16,d[a+2]),c=o(c,h,m,l,e[r+(3*a+14)%16],23,d[a+3])):(l=n(l,c,h,m,e[r+3*a%16],6,d[a]),m=n(m,l,c,h,e[r+(3*a+7)%16],10,d[a+1]),h=n(h,m,l,c,e[r+(3*a+14)%16],15,d[a+2]),c=n(c,h,m,l,e[r+(3*a+5)%16],21,d[a+3]));s[0]=s[0]+l|0,s[1]=s[1]+c|0,s[2]=s[2]+h|0,s[3]=s[3]+m|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,o=8*e.sigBytes;for(t[o>>>5]|=128<<24-o%32,t[(o+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process(),e=this._hash.words,t=0;4>t;t++)i=e[t],e[t]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}}),r.MD5=a._createHelper(l),r.HmacMD5=a._createHmacHelper(l)}(Math);var CryptoJSCbola=CryptoJSCbola||function(e,t){var i={},o=i.lib={},n=o.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var i=new e;return t&&i.mixIn(t),i.$super=this,i},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),r=o.WordArray=n.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,i=e.words,o=this.sigBytes,e=e.sigBytes;if(this.clamp(),o%4)for(var n=0;e>n;n++)t[o+n>>>2]|=(i[n>>>2]>>>24-8*(n%4)&255)<<24-8*((o+n)%4);else if(65535<i.length)for(n=0;e>n;n+=4)t[o+n>>>2]=i[n>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-8*(i%4),t.length=e.ceil(i/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],o=0;t>o;o+=4)i.push(4294967296*e.random()|0);return r.create(i,t)}}),a=i.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,e=e.sigBytes,i=[],o=0;e>o;o++){var n=t[o>>>2]>>>24-8*(o%4)&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;t>o;o+=2)i[o>>>3]|=parseInt(e.substr(o,2),16)<<24-4*(o%8);return r.create(i,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,e=e.sigBytes,i=[],o=0;e>o;o++)i.push(String.fromCharCode(t[o>>>2]>>>24-8*(o%4)&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;t>o;o++)i[o>>>2]|=(255&e.charCodeAt(o))<<24-8*(o%4);return r.create(i,t)}},d=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},c=o.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=r.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,o=i.words,n=i.sigBytes,a=this.blockSize,s=n/(4*a),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0),t=s*a,n=e.min(4*t,n);if(t){for(var l=0;t>l;l+=a)this._doProcessBlock(o,l);l=o.splice(0,t),i.sigBytes-=n}return r.create(l,n)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=c.extend({init:function(){this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,i){return e.create(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return h.HMAC.create(e,i).finalize(t)}}});var h=i.algo={};return i}(Math);if(function(){var e=CryptoJSCbola,t=e.lib,i=t.WordArray,t=t.Hasher,o=[],n=e.algo.SHA1=t.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],a=i[2],s=i[3],l=i[4],d=0;80>d;d++){if(16>d)o[d]=0|e[t+d];else{var c=o[d-3]^o[d-8]^o[d-14]^o[d-16];o[d]=c<<1|c>>>31}c=(n<<5|n>>>27)+l+o[d],c=20>d?c+((r&a|~r&s)+1518500249):40>d?c+((r^a^s)+1859775393):60>d?c+((r&a|r&s|a&s)-1894007588):c+((r^a^s)-899497514),l=s,s=a,a=r<<30|r>>>2,r=n,n=c}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+a|0,i[3]=i[3]+s|0,i[4]=i[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,o=8*e.sigBytes;t[o>>>5]|=128<<24-o%32,t[(o+64>>>9<<4)+15]=i,e.sigBytes=4*t.length,this._process()}});e.SHA1=t._createHelper(n),e.HmacSHA1=t._createHmacHelper(n)}(),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}return"function"==typeof window.CustomEvent?!1:(e.prototype=window.Event.prototype,void(window.CustomEvent=e))}(),"undefined"==typeof document.hidden)for(var vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&"undefined"==typeof document.hidden;++x)document.hidden=window[vendors[x]+"Hidden"];!function(){for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){var o=(new Date).getTime(),n=Math.max(0,16-(o-e)),r=window.setTimeout(function(){t(o+n)},n);return e=o+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||0>t?0:+t,e.length)===e}),window.Cbola=window.Cbola||{},Cbola._TemplateManagerBase={Compiled:{},getCompiledTemplate:function(e){var t=Cbola._;return this.Compiled&&t.isFunction(this.Compiled[e])?this.Compiled[e]:t.isString(this[e])?(Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"Templates.getCompiledTemplate, failed to find compiled template for "+e+"."),this.Compiled[e]=t.template(this[e],{variable:"data"}),this.Compiled[e]):null}},Cbola.Styles={injectMainStyle:function(e,t){var i=Math.min(Math.floor(window.devicePixelRatio||1),3),o={clientPath:Cbola.Env.clientPath,retina:i>1?"@"+i+"x":""};return this.injectThemeStyle(e,t,o)},injectThemeStyle:function(e,t,i){var o="Styles",n="injectMainStyle",r=this.getCompiledTemplate(t),a="";try{a=r(i)}catch(s){return Cbola.Logger.getInstance().errorM(o+","+n,""+o+n+" failed generating style for: "+t+", url: "+Cbola.Env.PageProperties.hostname),null}return Cbola.Utils.injectStyle(e,a)}},Cbola._.extend(Cbola.Styles,Cbola._TemplateManagerBase),Cbola.Templates={createElement:function(e){if(this[e]){var t=document.createElement("div");return t.innerHTML=this[e],t=t.children[0]}return null},createWrappedDOMFromTemplate:function(e,t){var i="Templates",o="createWrappedDOMFromTemplate",n=this.getCompiledTemplate(e);if(n){var r="";try{r=n(t)}catch(a){return Cbola.Logger.getInstance().errorM(""+i+o,""+i+o+" failed generating template for: "+e+", url: "+Cbola.Env.PageProperties.hostname),null}var s=document.createElement("div");return s.innerHTML=r,s}return null},createElementFromTemplate:function(e,t){var i=this.createWrappedDOMFromTemplate(e,t);return Cbola._.get(i,"children[0]",null)},createFragmentFromTemplate:function(e,t){var i=this.createWrappedDOMFromTemplate(e,t);if(i){for(var o=document.createDocumentFragment();i.childNodes.length;)o.appendChild(i.childNodes[0]);return o}return null}},Cbola._.extend(Cbola.Templates,Cbola._TemplateManagerBase),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["a9_dfp_banner.html"]=function(e){var t,i="";return i+='<!DOCTYPE html>\r\n<html lang="en">\r\n<head>\r\n  <meta charset="UTF-8">\r\n  <script async="async" src="https://www.googletagservices.com/tag/js/gpt.js"></script>\r\n  <script>\r\n	  var Cbola_pbjs = Cbola_pbjs || {};\r\n	  Cbola_pbjs.que = Cbola_pbjs.que || [];\r\n  </script>\r\n  <script type="text/javascript" src="//'+(null==(t=e.clientPath)?"":t)+'external/prebid.min.js" async></script>\r\n  <script>\r\n	  !function(a9,a,p,s,t,A,g){if(a[a9])return;function q(c,r){a[a9]._Q.push([c,r])}a[a9]={init:function(){q("i",arguments)},fetchBids:function(){q("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};A=p.createElement(s);A.async=!0;A.src=t;g=p.getElementsByTagName(s)[0];g.parentNode.insertBefore(A,g)}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js");\r\n\r\n	  var googletag = googletag || {};\r\n	  googletag.cmd = googletag.cmd || [];\r\n\r\n\r\n	  googletag.cmd.push(function() {\r\n		  googletag.defineSlot(\''+(null==(t=e.slotName)?"":t)+"', [["+(null==(t=e.width)?"":t)+", "+(null==(t=e.height)?"":t)+"]], '"+(null==(t=e.slotID)?"":t)+"').addService(googletag.pubads());\r\n		  googletag.pubads().disableInitialLoad();\r\n		  googletag.pubads().enableSingleRequest();\r\n		  googletag.enableServices();\r\n	  });\r\n\r\n	  apstag.init({\r\n		  pubID:  '0b2db9a2-c936-4557-a140-fbff93318c8c',\r\n		  adServer: 'googletag'\r\n	  });\r\n  </script>\r\n</head>\r\n<body>\r\n  <div id=\""+(null==(t=e.slotID)?"":t)+"\">\r\n    <script>\r\n		  googletag.cmd.push(function(){googletag.display('"+(null==(t=e.slotID)?"":t)+"');});\r\n    </script>\r\n  </div>\r\n</body>\r\n</html>"}}(),Cbola.Templates["advertisement_title.html"]="<div style=\"font-family:'Open Sans',sans-serif; font-size: 14px; font-weight:normal;color: rgb(200, 200, 200);text-align: center;height: 20px;margin:0;padding:0;\">- Advertisement -</div>",Cbola.Templates["ad_banner_sponsored_loading.html"]='<div class="cbola-banner-preload">\n  <div class="cbola-banner-preload__spinner">\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n  </div>\n  <div class="cbola-banner-preload__sponsored-text">\n    sponsored\n  </div>\n</div>',function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["ad_banner_structure.html"]=function(e){var t,i="";Array.prototype.join;return i+='<div  id="cbola-banner-structure'+(null==(t=e.elemId)?"":t)+"_"+(null==(t=e.apperance)?"":t)+'" class="cbola-banner-structure cbola-banner-structure'+(null==(t=e.elemId)?"":t)+"_"+(null==(t=e.apperance)?"":t)+' unselectDrag">\r\n  <div class="cbola-banner-preload">\r\n    <div class="cbola-banner-preload__spinner">\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n    </div>\r\n    <div class="cbola-banner-preload__sponsored-text">\r\n      sponsored\r\n    </div>\r\n  </div>\r\n  <div class="cbola-banner-structure__advertisement-title ',e.showAdvertisementTitle||(i+="cbola-fade-out"),i+='">'+(null==(t=e.advertisement)?"":t)+'</div>\r\n  <div class="hide-ad-button cbola-fade-out"></div>\r\n  <div id="cbola-banner'+(null==(t=e.elemId)?"":t)+"_"+(null==(t=e.apperance)?"":t)+'" class="cbola-banner cbola-banner'+(null==(t=e.elemId)?"":t)+"_"+(null==(t=e.apperance)?"":t)+'"></div>\r\n</div>\r\n'}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["ad_lightning_iframe.html"]=function(e){var t,i="";return i+='<!DOCTYPE html>\r\n<html lang="en">\r\n<head>\r\n  <meta charset="UTF-8">\r\n  <script src="https://tagan.adlightning.com/carambola/blacklist_script.js" type="text/javascript"></script>\r\n  <script src="https://tagan.adlightning.com/carambola/blocking_script.js" type="text/javascript"></script>\r\n  <script type="text/javascript">\r\n		function createTagDetails() {\r\n			var tagDetails = {};\r\n			tagDetails.w = '+(null==(t=e.width)?"":t)+";\r\n			tagDetails.h = "+(null==(t=e.height)?"":t)+";\r\n			tagDetails.dfpDetails = {advertiserId: '"+(null==(t=e.adId)?"":t)+"', creativeId: '"+(null==(t=e.adId)?"":t)+"'};\r\n			tagDetails.au = '"+(null==(t=e.adId)?"":t)+"';\r\n			tagDetails.markupInDom = true;\r\n      tagDetails.refreshMessage = '"+(null==(t=e.message)?"":t)+'\';\r\n\r\n\r\n			var random = Math.round(Math.random() * 1e8);\r\n			tagDetails.currentTagId = "adltag_" + (((new Date()) * 1)) + "_" + random;\r\n			return tagDetails;\r\n		}\r\n		var random = "" + Math.round(Math.random() * 1e8);\r\n		var site_id = random + "_" + "carambola";\r\n		window[site_id]={};\r\n		window[site_id].tagDetails=createTagDetails();\r\n		blocker(site_id, "<!--ADL_WRAPPED-->", false, window);\r\n  </script>\r\n</head>\r\n<body>\r\n  '+(null==(t=e.tag)?"":t)+"\r\n</body>\r\n</html>\r\n"}}(),Cbola.Templates["desktop_container.html"]='<div class="cbola-layer in-content-container-wrapper" style="position:relative;line-height:normal;width: 100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align: start;-webkit-align-items: flex-start;-ms-flex-align: start;align-items: flex-start;">\n  <div class="in-content-container-coverage" style="max-width:700px;min-width:440px;width:100%;position:relative;-webkit-transition: height 0.6s ease;-moz-transition: height 0.6s ease;-o-transition: height 0.6s ease;transition: height 0.6s ease;opacity: 0;">\n\n  </div>\n</div>',Cbola.Templates["desktop_trivia_container.html"]='<div class="cbola-layer in-content-container-wrapper" style="position:relative;line-height:normal;clear:both">\n  <div class="in-content-container-coverage" style="box-sizing:content-box;margin:0 auto;position:relative;opacity:0;padding:0;-webkit-transition: height 0.6s ease;-moz-transition: height 0.6s ease;-ms-transition: height 0.6s ease;-o-transition: height 0.6s ease;transition: height 0.6s ease;">\n\n  </div>\n</div>',Cbola.Templates["framed_desktop_container.html"]='<div class="cbola-layer in-content-container-wrapper" style="position:relative;line-height:normal;width: 100%;clear:both">\n  <div class="in-content-container__frame" style="border: 2px solid #c3c3c3;border-radius: 8px;padding: 5px;box-shadow: 3px 3px 3px 0 rgba(220, 220, 220, 0.8);margin: 20px auto 0;max-width: 700px;min-width: 440px;position: relative;">\n    <div class="in-content-container-coverage" style="margin:0 auto;max-width:700px;min-width:440px;position:relative;-webkit-transition: height 0.6s ease;-moz-transition: height 0.6s ease;-o-transition: height 0.6s ease;transition: height 0.6s ease;">\n\n\n    </div>\n  </div>\n</div>',Cbola.Templates["mobile_container.html"]='<div class="InContent-container-centerWrapper" style="line-height: normal;clear:both">\n	<div class="in-content-container-coverage" style="float: none;opacity:0;position:relative;width:100%;padding-top:0;box-sizing: content-box;margin:0 auto">\n	</div>\n</div>',function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["mobile_in_item_banner_structure.html"]=function(e){var t,i="";Array.prototype.join;return i+='<div id="cbola-box-item-ad_'+(null==(t=e.elemId)?"":t)+"_"+(null==(t=e.adId)?"":t)+'" data-ad-id="'+(null==(t=e.adId)?"":t)+'" class="cbola-box-item-ad">\r\n  <div class="cbola-banner-preload">\r\n    <div class="cbola-banner-preload__spinner">\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n    </div>\r\n    <div class="cbola-banner-preload__sponsored-text">\r\n      sponsored\r\n    </div>\r\n  </div>\r\n  <div class="cbola-banner-structure__advertisement-title ',e.showAdvertisementTitle||(i+="cbola-fade-out"),i+='">'+(null==(t=e.advertisement)?"":t)+'</div>\r\n  <div class="cbola-banner">\r\n\r\n  </div>\r\n</div>'}}(),Cbola.Templates["sidebar_container.html"]='<div class="cbola-layer in-content-container-centerWrapper " style="position:relative;line-height:normal;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align: start;-webkit-align-items: flex-start;-ms-flex-align: start;align-items: flex-start;">\n  <div style="opacity:0;position:relative;padding-top: 0;box-sizing: content-box;" class="in-content-container-coverage">\n\n  </div>\n</div>',Cbola.Templates["width_check.html"]='<div id="carambola_InContent_checkWidth" style="width:100%"></div>',function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Styles"]=window["Cbola"]["Styles"]||{},window["Cbola"]["Styles"]["Compiled"]=window["Cbola"]["Styles"]["Compiled"]||{},window["Cbola"]["Styles"]["Compiled"]["cbolaPlatform.css"]=function(e){var t,i="";return i+=".cbola-icon,.hide-ad-button:before{speak:none;text-rendering:auto;-moz-osx-font-smoothing:grayscale}.cbola-no-select,.cbola-no-select>*,.unselectDrag{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.cbola-disable-transition,.cbola-disable-transition *{-webkit-transition:none!important;transition:none!important}.cbola-clearfix{overflow:auto;zoom:1}.cbola-loader{position:absolute;top:50%;left:50%;margin-left:-19px!important;margin-top:-19px!important;height:38px;width:38px;border:4px solid rgba(100,100,100,.3);border-top:4px solid rgba(100,100,100,.9);border-radius:50%;-webkit-animation:cbola-rotation 1.2s infinite linear;animation:cbola-rotation 1.2s infinite linear;box-sizing:border-box}@-webkit-keyframes cbola-rotation{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cbola-rotation{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}span.cbola-clamped-text{overflow:hidden;position:relative;line-height:1.4em;max-height:2.8em;text-align:justify;display:block;padding-right:1em;margin-left:1em}span.cbola-clamped-text:before{content:'...';position:absolute;right:0;bottom:0}span.cbola-clamped-text:after{content:'';position:absolute;right:0;width:1em;height:1em;margin-top:.2em;background:#fff}.cbola-fade-out{opacity:0!important;pointer-events:none}.cbola-fade-in{opacity:1!important;pointer-events:auto}.cbola-hidden{visibility:hidden!important;pointer-events:none}.cbola-hide{display:none}.cbola-hide-scrollbars::-webkit-scrollbar{display:none}.cbola-ghost-center-container:before,.cbola-ghost-center-inner{display:inline-block;vertical-align:middle}.cbola-ghost-center-container{position:relative;font-size:0}.cbola-ghost-center-container:before{content:' ';height:100%}.cbola-banner-structure{position:absolute;font-size:10px;color:#999;text-align:center;opacity:1;font-family:'Open Sans';cursor:default;padding:0;z-index:3;line-height:normal!important;overflow:hidden}.hide-ad-button{position:absolute;cursor:pointer;top:1px;right:1px;margin-top:0;z-index:999999;width:18px;height:18px;background-color:#000;border-radius:50%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;overflow:hidden}.hide-ad-button:before{font:normal normal normal 12px/1 cbolaIcons;font-family:cbolaIcons!important;content:\"\\f00d\";text-transform:none;-webkit-font-smoothing:antialiased;color:#FFF}.cbola-banner-structure__advertisement-title{z-index:999999;position:absolute;left:0;top:0;background-color:rgba(0,0,0,.4);color:#fff;padding:1px 4px 2px 3px!important;font-size:8px!important;font-weight:600;text-transform:capitalize;font-family:\"Open Sans\",Arial,sans-serif!important;border-bottom-right-radius:8px;letter-spacing:.1em;pointer-events:none;line-height:normal}.cbola-banner{position:relative;z-index:5;opacity:1;height:100%;overflow:visible;text-align:center;-webkit-transform-origin:50% 0 0;transform-origin:50% 0 0;margin-right:auto!important;margin-left:auto!important}.cbola-banner iframe{max-width:none;border:0}.cbola-banner__tag{position:absolute;top:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.cbola-banner__tag--front{z-index:10}.cbola-banner__tag--back{z-index:5}.cbola-banner-preload--active{height:90%;width:90%;top:5%;left:5%;background-color:#c3d9ff}.cbola-banner-preload{width:100%;height:100%;position:absolute;top:0;left:0;z-index:0;background-color:#f6f6f6;overflow:hidden;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.cbola-banner-preload__spinner{height:25px;width:25px;position:relative}.cbola-banner-preload-spinner__path{height:11px;width:4px;position:absolute;top:0;left:calc(50% - 3px);-webkit-transform-origin:center bottom;transform-origin:center bottom}.cbola-banner-preload-spinner__path:before{content:' ';display:block;height:8px;width:100%;border-radius:30%;background-color:#c5c5c5;opacity:.5;position:absolute;top:-2px;-webkit-animation:bgColorChange 1.2s linear infinite;animation:bgColorChange 1.2s linear infinite;will-change:opacity}.cbola-banner-preload-spinner__path:nth-child(1){-webkit-transform:rotate(45deg);transform:rotate(45deg)}.cbola-banner-preload-spinner__path:nth-child(2):before{-webkit-animation-delay:.15s;animation-delay:.15s}.cbola-banner-preload-spinner__path:nth-child(2){-webkit-transform:rotate(90deg);transform:rotate(90deg)}.cbola-banner-preload-spinner__path:nth-child(3):before{-webkit-animation-delay:.3s;animation-delay:.3s}.cbola-banner-preload-spinner__path:nth-child(3){-webkit-transform:rotate(135deg);transform:rotate(135deg)}.cbola-banner-preload-spinner__path:nth-child(4):before{-webkit-animation-delay:.45s;animation-delay:.45s}.cbola-banner-preload-spinner__path:nth-child(4){-webkit-transform:rotate(180deg);transform:rotate(180deg)}.cbola-banner-preload-spinner__path:nth-child(5):before{-webkit-animation-delay:.6s;animation-delay:.6s}.cbola-banner-preload-spinner__path:nth-child(5){-webkit-transform:rotate(225deg);transform:rotate(225deg)}.cbola-banner-preload-spinner__path:nth-child(6):before{-webkit-animation-delay:.75s;animation-delay:.75s}.cbola-banner-preload-spinner__path:nth-child(6){-webkit-transform:rotate(270deg);transform:rotate(270deg)}.cbola-banner-preload-spinner__path:nth-child(7):before{-webkit-animation-delay:.9s;animation-delay:.9s}.cbola-banner-preload-spinner__path:nth-child(7){-webkit-transform:rotate(315deg);transform:rotate(315deg)}.cbola-banner-preload-spinner__path:nth-child(8):before{-webkit-animation-delay:1.15s;animation-delay:1.15s}@-webkit-keyframes bgColorChange{0%{opacity:.5}12.5%{opacity:1}25%,37.5%{opacity:.9}50%{opacity:.8}62.5%{opacity:.6}100%,75%{opacity:.5}}@keyframes bgColorChange{0%{opacity:.5}12.5%{opacity:1}25%,37.5%{opacity:.9}50%{opacity:.8}62.5%{opacity:.6}100%,75%{opacity:.5}}.cbola-banner-preload__sponsored-text{margin-top:2px;font-family:Roboto;font-size:14px;letter-spacing:-.2px;color:#bebebe;text-transform:capitalize}@font-face{font-family:cbolaIcons;src:url('"+(null==(t=e.clientPath)?"":t)+"css/fonts/cbolaIcons.woff?phtwnv') format(\"woff\"),url('"+(null==(t=e.clientPath)?"":t)+"css/fonts/cbolaIcons.ttf?phtwnv') format(\"truetype\"),url('"+(null==(t=e.clientPath)?"":t)+'css/fonts/cbolaIcons.svg?phtwnv#cbolaIcons\') format("svg");font-weight:400;font-style:normal}.cbola-icon{display:inline-block;font:normal normal normal 14px/1 cbolaIcons;font-family:cbolaIcons!important;font-size:inherit;text-transform:none;-webkit-font-smoothing:antialiased;-webkit-transform:translate(-1px,1px);transform:translate(-1px,1px);font-style:inherit!important}.cbola-icon-check:before{content:"\\f00c"}.cbola-icon-times:before{content:"\\f00d"}.cbola-icon-chevron-left:before{content:"\\f053"}.cbola-icon-chevron-right:before{content:"\\f054"}.cbola-icon-twitter:before{content:"\\f099"}.cbola-icon-facebook:before{content:"\\f09a"}.cbola-icon-hand-o-up:before{content:"\\f0a6"}.cbola-icon-angle-left:before{content:"\\f104"}.cbola-icon-angle-right:before{content:"\\f105"}.cbola-icon-share-alt-thick:before{content:"\\f1e0"}.cbola-icon-whatsapp:before{content:"\\f232"}.cbola-icon-share-alt-thin:before{content:"\\e900"}.cbola-icon-retweet:before{content:"\\f079"}.cbola-icon-star:before{content:"\\f005"}.cbola-icon-arrow-left:before{content:"\\f060"}.cbola-icon-arrow-right:before{content:"\\f061"}.cbola-inserted{-webkit-animation-duration:1ms;animation-duration:1ms;-webkit-animation-name:cbolaInserted;animation-name:cbolaInserted;visibility:hidden}@-webkit-keyframes cbolaInserted{from{opacity:.99}to{opacity:1}}@keyframes cbolaInserted{from{opacity:.99}to{opacity:1}}';
}}(),Cbola.EventBus=Cbola.EventBus||window.document.createElement("span"),Cbola.EventBus.fire=function(e,t){var i=new CustomEvent(e,{detail:t});Cbola.EventBus.dispatchEvent(i)},Cbola.EventBus.Events={ELEMENT_FAILED:"ElementFailed",FOCUS_CHANGE:"FocusedChange",GET_ADS_READY:"GetAdsReady",LAYER_READY:"LayerReadyEvent",PAGE_ELEMENTS_DATA_RECEIVED:"PageElementsDataReceived",PAGE_VISIBILITY_CHANGE:"PageVisibilityChange",PLATFORM_INITIALIZED:"PlatformInitialized",USER_ID_SET:"UserIDSet",ADS_STORES_MANGER_ADDED_SIZES:"AdsStoresManagerAddedSizes_",ADS_STORES_MANAGER_READY:"AdsStoresManagerReady_",COVERING_TRIGGER_ON:"coveringTriggerOn_",COVERING_TRIGGER_OFF:"coveringTriggerOff_",LAYER_ATTACHED:"LayerAttached_",LAYER_IS_VIEWABLE:"LayerBecameViewable_",OBSERVER_VIEWABLE:"ObserverViewable_",OBSERVER_NON_VIEWABLE:"ObserverNonViewable_",PAGE_LOAD_FALLBACK:"PageLoadFallback_",RESIZE_ON_AD:"ResizeOnAd_",SKIP_SPOT:"SkipSpot_",STORY_CLICKED:"StoryClicked_",STORY_TIMER_ENDED:"StoryTimerEnded_",TIMER_ENDED:"TimerEnded_",TRIVIA_BEFORE_END:"triviaBeforeEnd_",TRIGGER_IS_VIEWABLE:"TriggerBecameViewable_"},window.Cbola=window.Cbola||{},Cbola.Enums=Cbola.Enums||{ProductTypes:{IN_IMAGE:1,IN_CONTENT:2,IN_IMAGE_PENDING:101},ServerCallTypes:{CDN:0,SERVER:1},IntegrationTypes:{ERROR:0,NORMAL:1,DFP:2,SAFE_FRAME:3,IFRAME:4},SetClickTypes:{ITEM_LINK:1,FEEDBACK_ICON_ON:2,FEEDBACK_ICON_OFF:3,FEEDBACK_ICON_CLOSE:4,FEEDBACK_STARS_1:5,FEEDBACK_STARS_2:6,FEEDBACK_STARS_3:7,FEEDBACK_STARS_4:8,FEEDBACK_STARS_5:9,CARAMBOLA_ICON:10,SHARE_BEFORE_FACEBOOK:11,SHARE_BEFORE_TWITTER:12,SHARE_AFTER_FACEBOOK:13,SHARE_AFTER_TWITTER:14,AD_BUTTON_CLOSE:15,SHARE_BEFORE_WHATSAPP:16,SHARE_LANDSCAPE_WHATSAPP:18,SHARE_LANDSCAPE_FACEBOOK:19,SHARE_LANDSCAPE_TWITTER:20,ENDING_SCREEN_OUT:21,FOOTER_AD_BUTTON_CLOSE:22,SPONSORED_LINK_CLICK_ENDING_SCREEN:24,SPONSORED_LINK_CLICK_ENDING_SCREEN_AUTOPLAY:25,SPONSORED_LINK_CLICK_IN_ITEM:26,SPONSORED_LINK_CLICK_IN_ITEM_AUTOPLAY:27,TWITTER_REPLY:28,TWITTER_STAR:29,TWITTER_RETWEET:30,TWITTER_FOLLOW:31,TWITTER_TWEET_IMAGE_CLICK:32},RefreshTypes:{NONE:0,CLICK:1,TIMEOUT:2,BOTH:3,VIEWABILITY:4},AdTriggerTypes:{INJECT_PSA:0,PAGE_LOAD:1,TIMEOUT:2,CLICK:3,APPERANCE:4,URL_CHANGE:5,REFRESH_PSA:6,WF_FALLBACK:7,REFRESH_CONFIANT_BLOCK:8,REFRESH_AD_LIGHTNING_BLOCK:9},BlockedAdTriggerTypes:{CONFIANT_BLOCK:1,AD_LIGHTNING_BLOCK:2},LoadStatusTypes:{SUCCESS:1,BAD_PAGE:2,WRONG_AD_SIZE:3,FAILED:4,NOT_FOUND:5,TOO_SMALL:6,TOO_BIG:7,MAX_ELEMS_REACHED:8,GET_ADS_FAILED:9,AD_SERVER_DOWN:10,PAGE_NOT_IN_CACHE:11,AD_TOO_SMALL:12,NO_CONTENT:13,ALREADY_USED:14,GET_ADS_MAX_RETRY:15,PAGE_CLOSED:16,NO_MORE_ADS:17,SELECTOR_NOT_FOUND:18,SELECTOR_TOO_SMALL:19,SAME_ID_WIDGETS:21,EMBEDDED_GET_ADS_FAILED:22},ItemViewTypes:{ON_HOVER:1,ON_NEXT_BTN:2,ON_PREV_BTN:3,VIEWABILITY:4,IN_IFRAME:5,UNVIEWABILITY:6,ENDING_SCREEN:7,AD:8,ON_NEXT_AUTOPLAY:9,SPONSORED_ENDING_SCREEN:10,SPONSORED_LINK_CLICK:11,ENDING_SCREEN_AUTOPLAY:12,SPONSORED_ENDING_SCREEN_AUTOPLAY:13,AD_AUTOPLAY:14,SPONSORED_IN_ITEM_SCREEN:15,SPONSORED_IN_ITEM_SCREEN_AUTOPLAY:16,AUTOPLAY_CAROUCEL_COMPLETED:17,NONE:255},PageRequestTypes:{ERROR:0,PAGE_VIEW:1,NOT_FOUND:2,PENDING:3,NO_ELEMS_FOUND:4,NO_CONTENT_FOUND:5,UNKNOWN_PUBLISHER:6,UNSUPPORTED_DOMAIN:7,MOBILE:8,AUTOMATION_FAILED:9,HOMEPAGE:10,REVISER:11,UNSUPPORTED_BROWSER:12,DIV_TOO_SMALL:13,CORRUPTED_JSON:14,BLOCKED_MOBILE:15,NO_SHOW_META:16,BLOCKED_DESKTOP:17,BLOCKED_TABLET:18,ADS_ONLY:19,INITIALIZE_FAILED:21,NO_PLACEHOLDER_FOUND:22,NO_CONTENT_TEMPLATE_FOUND:23,HIDDEN_IFRAME:24,BLOCKED_KNOWN_SAFE_FRAME:25,GET_ELEMENTS_ERROR:255},teaserTriggerTypes:{TIMEOUT:1,VIEWABILITY:2},isServerCallTypes:{FROM_CDN:0,FROM_SERVER:1},HeaderBiddingRequestStatus:{SUCCESS:1,TIMEOUT:2,FAIL:3,REQUEST_MADE:10,HIGH_TIER_FILLED:11,REQUEST_LOW_TIER_MADE:12,LOW_TIER_FILLED:13},TagExtractionTypes:{APPEND:1,POSTSCRIBE:2,WRITECAPTURE:3,POSTSCRIBE_ONLY:4,SRCDOC_IFRAME:5,BILIMBI:6,WRITE_IFRAME:7,CONFIANT_IFRAME:8,AD_LIGHTNING_IFRAME:9},AdOpenBehaviors:{TIMER:1,ENGAGEMENT:2,VIEWABLE:3,HOVER_ON_UNIT:4,PAGE_LOAD:5},AdCloseBehaviors:{TIMER:1,ENGAGEMENT:2,VIEWABLE:3,HOVER_ON_UNIT:4},AbTests:{NO_LAYER:9999,NO_ADS:9998,ADS_ON_PAGE_LOAD:9997,BASE_PAGE_LOAD:9996,LAYER_ON_PAGE_LOAD:9995},SetEventTypes:{PAGE_LOAD_EVENT:150},UnitLoadTypes:{ASYNC:1,DOM_LOADED:2,PAGE_LOAD:3},ConsentStatusTypes:{IAB_STANDARD_CMP_FOUND:10,GOOGLE_FUNDING_CHOICES_FOUND:98}},window.Cbola=window.Cbola||{},Cbola.Config=function(){var e=Cbola,t=e._,i={Language:{english:"en",spanish:"es",portuguese:"pt",russian:"ru",french:"fr",japanese:"ja",german:"de"},qa_queryServer:"//qa_api.carambo.la/inimage/server/",qa_analyticsServer:"//qa_api.carambo.la/inimage/analytics/",qa_pageAnalyticsServer:"//qa_api.carambo.la/inimage/analytics/",qa_loggingServer:"//qa_api.carambo.la/inimage/logging/",prod_queryServer:"//content.carambo.la/",prod_analyticsServer:"//analytics.carambo.la/",prod_pageAnalyticsServer:"//analytics.carambo.la/",prod_loggingServer:"//logging.carambo.la/",qa_CDN:"//qa.inimage.carambo.la/",prod_CDN:"//inimage.carambo.la/",qa_adServer:"//qa.adserver.carambo.la/",prod_adServer:"//xtr.carambo.la/",maxParentElementsCheckWidth:5,adTypeVideo:1,abTestSkipContent:!1,errorAdAlreadySent:!1,extractTypeAds:0,checkPendingICscriptsTimeLength:25,urlsForAuto:[],writeCaptureAlreadySet:!1,getAdsCheckElementRetries:100,findICSelectorElementMaxRetries:80,LoadType:1,ZIndexLayers:0,sendToPostScribeAgain:0,MaxWidgets:999,inContentFallbackWidths:[440,300],currentElementsSum:0,dateTimeWhenScriptExecute:"cbolaDt",proxyId:"carambola_proxy",inContentClass:"carambola_InContent",placeholderClass:"carambola-layer-placeholder",bitlyUrl:"",icDefaultMainTitle:"Did you know?",checkPlatformLocation:!0,errorMessage:"",adBelowSideBarMargin:1,adBelowSlideShowMargin:10,brandRedirect_default:"https://www.carambola.com/",adTitleStructureTriviaHeight:14,adBelowInContentExtraMargin:3,adAsideOfUnitExtraMargin:5,timeouts:{pendingBeforeSkippingHeaderBidding:5e3,pendingHeaderBiddingResponseBrake:200,pendingIndexExchangeBuffer:250},autoSlideFirst:!0,autoSlideFirst_openAfterSecs:3e3,autoSlideFirst_closeAfterSecs:6e3,layouts:{inContent:{all:[100,101,102,110,112,120,121,160],facts:[100,101,102,110,112],trivia:[120],triviaMulti:[121],twitter:[160]},sideBars:{all:[130,131,132,133,134,135,136,137,138,139,140,150,151,152,153],facts:[130,131,132,133,136,152],diedOnThisDay:[134,150],diedOnThisWeek:[151],onThisDay:[135,137,153],trivia:[140],staticBanner:[130,131,133,134,135,140],teaserBanner:[132],sidebarSlideshow:[136,137],storiesSlideshow:[138,139],slideShow:[150,151,152,153]},mobile:{all:[1e3,1100,1400],facts:[1e3,1100],trivia:[1400]}},init:function(){var e=this,o=Cbola.Utils;this.layouts.all=[],t.forEach(this.layouts,function(i){t.get(i,"all")&&o.push.apply(e.layouts.all,i.all)});var n=i.layouts;this.triggersDictionary={1:{supportedLayers:n.inContent.trivia},2:{supportedLayers:n.inContent.trivia.concat(n.inContent.triviaMulti)},3:{supportedLayers:n.inContent.trivia.concat(n.inContent.triviaMulti)},4:{supportedLayers:n.inContent.trivia.concat(n.inContent.triviaMulti)},5:{supportedLayers:n.inContent.triviaMulti},6:{supportedLayers:n.inContent.trivia.concat(n.inContent.triviaMulti)},7:{supportedLayers:n.inContent.trivia.concat(n.inContent.triviaMulti)},11:{supportedLayers:n.sideBars.slideShow,translatedTo:1},12:{supportedLayers:n.sideBars.slideShow},14:{supportedLayers:n.sideBars.staticBanner.concat(n.sideBars.sidebarSlideshow,n.sideBars.storiesSlideshow),translatedTo:4},15:{supportedLayers:n.sideBars.slideShow,translatedTo:20},18:{supportedLayers:n.sideBars.teaserBanner,translatedTo:8},19:{supportedLayers:n.sideBars.staticBanner.concat(n.sideBars.sidebarSlideshow,n.sideBars.storiesSlideshow),translatedTo:9},20:{supportedLayers:n.sideBars.staticBanner.concat(n.sideBars.teaserBanner,n.sideBars.sidebarSlideshow,n.sideBars.storiesSlideshow)},21:{supportedLayers:n.sideBars.staticBanner.concat(n.sideBars.sidebarSlideshow)},22:{supportedLayers:n.sideBars.slideShow},23:{supportedLayers:n.sideBars.storiesSlideshow},54:{supportedLayers:n.inContent.facts,translatedTo:4},56:{supportedLayers:n.inContent.facts,translatedTo:6},57:{supportedLayers:n.inContent.facts,translatedTo:7},58:{supportedLayers:n.inContent.facts,translatedTo:8},62:{supportedLayers:n.inContent.twitter,translatedTo:22},64:{supportedLayers:n.inContent.twitter,translatedTo:4},68:{supportedLayers:n.inContent.twitter,translatedTo:20},69:{supportedLayers:n.inContent.trivia,translatedTo:20},200:{supportedLayers:n.mobile.all},204:{supportedLayers:n.mobile.all},209:{supportedLayers:n.mobile.all},300:{supportedLayers:n.all}},this.Defaults={adServer_method:"GetAds",queryServer:this.prod_queryServer,analyticsServer:this.prod_analyticsServer,pageAnalyticsServer:this.prod_pageAnalyticsServer,loggingServer:this.prod_loggingServer,CDN:this.prod_CDN,adServer:this.prod_adServer};try{"1"===Cbola.Env.queryServer||"qa"===Cbola.Env.queryServer?(i.Defaults.CDN=i.qa_CDN,i.Defaults.queryServer=i.qa_queryServer,i.Defaults.adServer=i.qa_adServer,i.Defaults.analyticsServer=i.qa_analyticsServer,i.Defaults.pageAnalyticsServer=i.qa_pageAnalyticsServer,i.Defaults.loggingServer=i.qa_loggingServer,"undefined"!=typeof Cbola.Env.activePid&&"cbolaDemo"===Cbola.Env.activePid&&(i.Defaults.adServer=i.prod_adServer,i.Defaults.adServer_method="GetExtraContent")):"2"===Cbola.Env.queryServer?i.Defaults.CDN=i.prod_CDN:"3"===Cbola.Env.queryServer?(i.Defaults.CDN="//s3.amazonaws.com/qa.inimage.carambo.la/",i.Defaults.queryServer=i.qa_queryServer,i.Defaults.adServer=i.qa_adServer,i.Defaults.analyticsServer=i.qa_analyticsServer,i.Defaults.pageAnalyticsServer=i.qa_pageAnalyticsServer,i.Defaults.loggingServer=i.qa_loggingServer):"undefined"!=typeof Cbola.Env.activePid&&"cbolaDemo"===Cbola.Env.activePid&&(i.Defaults.adServer=i.prod_adServer,i.Defaults.adServer_method="GetExtraContent")}catch(r){}this.setAbTestId(),30===i.abTestId||31===i.abTestId?(i.Defaults.loggingServer=i.prod_loggingServer,31===i.abTestId&&(i.Defaults.queryServer=Cbola.prod_queryServer)):32===i.abTestId&&(i.Defaults.queryServer=Cbola.prod_queryServer,i.Defaults.loggingServer=i.prod_loggingServer,i.Defaults.adServer=i.prod_adServer),i.brandRedirectTemplate=t.template(i.brandRedirect_default+"?cf=unt<%= layerType %>_"+Cbola.Env.domainId),i.brandContactRedirectTemplate=t.template(i.brandRedirect_default+"?cf=unt<%= layerType %>_"+Cbola.Env.domainId+"#ContactUsSection")},setAbTestId:function(){var e=Cbola.Utils,cbolaConfig={};"undefined"==typeof i.abTestId&&(i.abTestId=e.getUrlParams()["cbolaabtest"],i.abTestId?i.abTestId=parseInt(i.abTestId):(cbolaConfig.abTestId=1,i.abTestId=cbolaConfig.abTestId))},getLayersDefaultSize:t.memoize(function(e){switch(e){case 100:case 101:case 110:return{height:270,width:640};case 102:case 112:return{height:250,width:640};case 120:case 121:return{height:250,width:650};case 130:case 131:return{height:350,width:300};case 132:return{height:600,width:300};case 133:case 134:case 135:return{height:350,width:300};case 136:case 137:case 138:case 139:return{height:340,width:300};case 140:return{height:350,width:300};case 150:case 151:case 152:case 153:return{height:250,width:300};case 160:return{height:90,width:728};case 1400:case 1100:case 1e3:return{height:"inherit",width:0};default:return{height:230,width:100}}}),getLayersDefaultSizeForIframe:t.memoize(function(e){switch(e){case 100:case 101:case 102:case 110:case 112:return{height:270,width:450};case 120:return"pgtr56"===Cbola.Env.activePid?{height:250,width:500}:{height:265,width:500};case 121:return{height:250,width:500};case 130:case 131:case 133:case 134:case 135:return{height:350,width:300};case 136:case 137:case 138:case 139:return{height:340,width:300};case 140:return{height:350,width:300};case 150:case 151:case 152:case 153:return{height:250,width:300};case 160:return{height:90,width:600};case 1e3:return"lgcy81"===Cbola.Env.activePid||"lgcy42"===Cbola.Env.activePid?{height:455,width:-1}:{height:500,width:-1};case 1100:return"lgcy81"===Cbola.Env.activePid||"lgcy42"===Cbola.Env.activePid?{height:455,width:-1}:{height:500,width:-1};case 1400:return{height:516,width:300};default:return{height:230,width:100}}}),getLayerMinSizes:t.memoize(function(e){switch(e){case 100:case 101:case 110:return{width:440,height:270};case 102:case 112:return{width:440,height:250};case 120:return{width:500,height:250};case 121:return{width:480,height:250};case 130:case 131:case 132:case 133:case 134:case 135:case 136:case 137:case 138:case 140:return{width:300,height:350};case 150:case 151:case 152:case 153:return{width:300,height:250};case 160:return{width:545,height:90};case 1e3:case 1100:case 1400:return{width:0,height:0};default:return{width:440,height:250}}}),jsonRegEx:{0:"[\\?&]utm_",110587:"#~[a-zA-Z0-9]{14}",110461:"\\?(?!cctn)|;grp=|;kvstate=|;kvfirstname=|;kvlastname=|#",110760:"[\\?&]wpvqas=",110775:"#|\\?li_|\\?cbolaGameSet",110735:"\\?gclid=|#|/ml/1/e/",110729:"\\?gclid=|#|/ml/1/e/",110663:"#|\\?_|\\?fb_",110733:"\\?fb_|\\?gclid=|#|/ml/1/e/",111799:"#axzz",111814:"\\?|/[0-9]{8}",110744:"\\?gclid=|#|/ml/1/e/",110695:"\\?gclid=|#|/ml/1/e/",110730:"\\?gclid=|#|/ml/1/e/",110746:"\\?gclid=|#|/ml/1/e/",110728:"\\?gclid=|#|/ml/1/e/",110726:"\\?gclid=|#|/ml/1/e/",110737:"\\?gclid=|#|/ml/1/e/",110694:"\\?gclid=|#|/ml/1/e/",110738:"\\?gclid=|#|/ml/1/e/",111843:"\\?gclid=|#|/ml/1/e/",110740:"\\?gclid=|#|/ml/1/e/",110732:"\\?gclid=|#|/ml/1/e/",112323:"userid=",112230:"\\?pctx=",112268:"gclid=",112433:"[\\?&]utm_|#",110396:"\\?storyurl=",110577:"\\?|#|/wiki/",110681:"&qp=|&ticketid=",112227:"\\?pmcode|\\?_cmp=|\\?p=|\\?trkid=",110535:"\\?icid=",112441:"[\\?&]feed|[\\?&]wigetarticlelistfile=",112460:"\\?|&c.|&did.",112454:"&c.",112455:"&c.",112457:"&c.",112458:"&c.",112459:"&c.",112469:"&c.",112470:"&c.",112471:"&c.",112472:"&c.",112519:"&c.",112520:"&c.",112540:"&c.",112551:"/217|/218|/219|/220|/[0-9]{9}\\?new=true",112451:"\\?trkid=",112630:"/[a-zA-Z0-9]{8}$|/[a-zA-Z0-9]{7}$|/[a-zA-Z0-9]{6}$|/[a-zA-Z0-9]{5}$|/a/|/gallery/|/r/|/t/|/user/",112390:"/unscramble/",112476:"&userid=",112596:"[\\?&]trackingcode|\\?query=",112647:"\\?|#",112665:"&geom=|&rf=|&p=",112550:"/[0-9]{9}\\?new=true",110727:"/ml/1/e/",112663:"/gampad/ads",112732:"\\?ord=",112760:"[\\?&]puc=|\\?_ga=|\\?hash=",112606:"\\?chr=",112632:"_activity_context=|u_audio=|a3dwebglbanner=",112751:"\\?et_rid=",112777:"\\?message_id=",112733:"/centerx:|/shipid:",112623:"\\?",112355:"\\?|&",112842:"\\/[0-9]{4}\\/|\\/[0-9]{5}\\/|\\/[0-9]{6}\\/|\\/[0-9]{7}\\/|\\/[0-9]{8}\\/",112752:"\\?"},srcUrlEnabledDids:[110006,112389,112485]};return i}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window.Cbola=window.Cbola||{},Cbola.Utils=function(){var e=window.requestAnimationFrame,t=Cbola,i=t._,o=t.Config,n=navigator.userAgent,r="Utils",a=99999,s=1e4,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=i.partial(i.padStart,i,2,"0"),o=new Date;return t(o.getDate())+t(o.getMonth()+1)+t(o.getFullYear()%100)+t(o.getHours())+t(o.getMinutes())+t(o.getSeconds())+t(o.getMilliseconds()%100)+e},d={isFacebookBrowser:/\[FB.*;(FBAV)\/(\d+)(?:\.(\d+)(?:\.(\d)+)?)?/g.test(n)||/(facebookexternalhit)\/(\d+)\.(\d+)/g.test(n),isIOS:/iPad|iPhone|iPod/g.test(n),isIE:/(msie\s)|(trident.*rv\:)|(edge\/)/gi.test(n),isFirefox:/firefox/gi.test(n),isMobile:/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/gi.test(n)&&-1===n.search("PC"),isTablet:i.memoize(function(){var e=/ipad|a1_07|a1-810|a1-811|a1-830|a3000-h|a3300-hv|a3500-f|a3500-fl|a3500-h|a3-a10|a5500-f|a5500-h|a7600-f|a7600-h|android 3|archos 101|archos 80g9|aries_785|arnova 101|at100|at10-a|at200|at300|b1-710|b1-711|b1-730|b1-770|b1-780|b1-810|b1-830|b1-850|b1-a71|b6000-f|b6000-h|b8000-f|b8000-h|b8080-f|b8080-h|bn nookhd+|bnrv200|bntv250|bntv250a|bntv400|bntv450|bntv600|breeze 10|cm_tenderloin|dell streak 7|dl1010q|e2281|e-tab ivory|gt-n5100|gt-n5110|gt-n8000|gt-n8010|gt-n8013|gt-n8020|gt-p1000|gt-p1010|gt-p3100|gt-p3110|gt-p3113|gt-p5100|gt-p5110|gt-p5113|gt-p5200|gt-p5210|gt-p5220|gt-p7300|gt-p7310|gt-p7500|gt-p7510|hpwos|hudl 2|ideapad|ideatab|k00e|k00f|k010|k011|k012|k017|k01a|kfapwa |kfapwi|kfarwi|kfaswi|kfauwi|kfdowi|kffowi|kfgiwi|kfjwa|kfjwi|kfmewi|kfot|kfsawa|kfsawi|kfsowi|kfsuwi|kftbwi|kfthwa|kfthwi|kftt|kindle|lguk410|lguk750|lguk932|lg-v400|lg-v410|lg-v490|lg-v495|lg-v496|lg-v497|lg-v500|lg-v520|lg-v521|lg-v522|lg-v700|lg-v930|lifetab|m532|me172v|me173x|me301t|me302c|me302kl|me371mg|mediapad|memo pad|micromax_a101|mz601|mz604|nexus 10|nexus 7|nx008hd8g|nx16a10132s|nx16a11264|nx16a8116k|nx700qc|nx785qc8g|nxa116qc164|nxa8qc116|onda v989|p310a|p310x|p320x|padfone|playbook|pmp5580c|pmp7280c3g|pmt3377_wi|pmt7077_3g|qmv7a|qmv7b|qtair7|qtaqz3|qv830|rct6103w46|rct6203w46|rct6213w87dk|rct6213w87m|rct6303w87dk|rct6303w87m|rct6513w87|rct6573w23|rct6603w47m7|rct6603w87m7|rct6703w13|rct6773w22|rct6773w42b|rct6873w42m|rct6973w43|rct6k03w13|s5000-f|s5000-h|s6000l-f|s920_row|sch-i705|sch-i800|sch-i915|sch-i925|sgh-i467|sgh-i497|sgh-i777|sgp311|sgp312|sgp321|sgp511|sgp512|sgp521|sgp561|sgp611|sgp612|sgp621|sgp712|sgp771|sgpt12|sgpt13|shv-e210k|slider sl101|smart tab|sm-p550|sm-p600|sm-p605|sm-p900|sm-p905|sm-t\d\d\d|tab 2 a10-70f|tab 2 a7-30hc|tab 2 a8-50f|tab 2 a8-50lc|tab s8-50f|tab2a7-10f|tab2a7-20f|tablet|tb2-x30f|tb3-710f|tb3-710i|tb3-850f|tb3-850m|tb3-x70f|tb-8504f|tb-8704f|tb-x103f|tb-x304f|tc802a|tf300t|tf700t|touchpad|tf201|tf101|venue 7 3730|venue 7 hspa+|venue 8 3830|venue 8 7840|venue 8 hspa+|vk810 4g|vk815|vodafone smart ii|xolo a700|xoom|yb1-x90f|yoga b6000-f|yoga b8000-f|yt3-850f|yt3-x50f|yt3-x90f|yt-x703f|zaffire 1010/i.test(n.toLowerCase());return e&&(Cbola.Env.PageProperties.isMobile=!1),e&&-1===n.search("PC")}),getRunTimeInSecs:function(){var e=Math.abs(((new Date).getTime()-Cbola.Env.PageProperties.startTime.getTime())/1e3);return Math.floor(100*e)/100},getRunTimeInMilis:function(){return Math.abs((new Date).getTime()-Cbola.Env.PageProperties.startTime.getTime())+"ms"},generateViewId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if(e>t){var i=e;e=t,t=i}var o=Math.random();return l(e+Math.round(o*(t-e)))},generateDoubleRandomViewID:function(){var e=s.toString().split("").length,t=void 0;return/google web preview/i.test(n)?(t=s+Math.round(new Math.seedrandom(window.location.href)()*(a-s)),Cbola.Logger.getInstance().alwaysSend("googleWebPreview, Path: "+window.location.href)):t=[3,2].reduce(function(t,i){return t+=Math.round((s+Math.random()*(a-s))/Math.pow(10,e-i))},""),l(t)},replaceAll:function(e,t,o){return i.isEmpty(o)?o:o.replace(new RegExp(e,"g"),t)},chromeVersion:i.memoize(function(){var e=n.match(/Chrom(e|ium)\/([0-9]+)\./);return e?parseInt(e[2],10):0}),setGlobalRedirectTime:function(){var e=Cbola.Common.LocalStorageService,t=Cbola.Env.PageProperties,i=e.getItem(o.dateTimeWhenScriptExecute)||"";e.removeItem(o.dateTimeWhenScriptExecute);var n=i.split("&"),r=n.pop();t.publisherScriptExecutionTime=r?parseInt(r):null;var a=t.publisherScriptExecutionTime?t.startDateFileUploaded.getTime()-t.publisherScriptExecutionTime:0;return Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_BLUE,"Redirection server duration: "+a+"ms"),a},getZIndexForElement:function(){var e=o.ZIndexLayer-o.ZIndexLayers;return o.ZIndexLayers+=1,1>e&&(e=0===o.ZIndexLayer?0:1),e},checkIfQueryStingExist:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=Cbola.Env.PageProperties,r=e.ParentId,a=this.getUrlParams()["cbolagameset"],s=n.originalPathNameHost;if(parseInt(a)===r)return s;if(i.isNumber(r)&&(s=n.originalPathNameHost+(n.originalPathNameHost.indexOf("?")>-1?"&":"?")+"cbolaGameSet="+r),o.urlsForAuto.indexOf(s)>-1)return s;if(t){o.urlsForAuto.push(s);var l={PublisherId:Cbola.Env.activePid,UrlData:{Url:s.toLowerCase(),Hash_128_Bit:CryptoJSCbola.MD5(s.toLowerCase()).toString(),Hash_160_Bit:CryptoJSCbola.SHA1(s.toLowerCase()).toString()},AbTestId:o.abTestId,IsMobile:n.isMobile,IsTablet:n.isTablet,CategoryId:Cbola.Env.categoryId,Tags:Cbola.Env.tags,Title:Cbola.Env.title,Body:Cbola.Env.body},d=JSON.stringify(l);Cbola.Logger.getInstance().info("Cbola_getPageElements_forAutomation start. json: "+d),fetch(o.Defaults.queryServer+"GetInContentInfo",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:d})}return s},checkImageLoaded:function(e){var t=new Image;t.src=e,t.onload=function(){},t.onerror=function(){Cbola.Logger.getInstance().errorM(r+".checkImageLoaded","Image not loaded. src: "+e)}},checkUrlParamExist:function(e){var t=window.location.href.toLowerCase(),i=t.search(e);return i>-1},getLocationHref:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t="getLocationHref",o="";try{var n=!0;do this.isAboutBlankIframe(e)||this.isKnownSafeFrame(e)?(o=e.document.referrer,e.frameElement?e=e.parent:n=!1):n=!1;while(n)}catch(a){Cbola.Logger.getInstance().errorM(r+"."+t,r+"."+t+" failed getting referrer URL outside an iframe. error: ",a)}return i.isEmpty(o)?e.location.href:o},getLowerLocationHref:function(){return this.getLocationHref().toLowerCase()},queryStringCut:function(){var e=this.getLowerLocationHref();if(/[I,i]gnr/.test(e)){var t=e.split("?");return o.queryString=t[1],o.ignoreQueryString=!0,t[0]}o.queryString="",o.ignoreQueryString=!1;var n=document.querySelector('meta[property="carambola"]');return!/[d,D]irty/.test(e)&&n?i.toLower(n.getAttribute("content")):e},queryStringCutRegex:function(){var e=this.queryStringCut();try{var t=Cbola.Env.domainId;if(null!==t&&t>0){var i=o.jsonRegEx,n=i[t]||i[0];if(n){var r=e.search(new RegExp(n,"ig"));-1!==r&&(e=e.substring(0,r))}}}catch(a){Cbola.Logger.getInstance().info(a)}return e},isInIframe:i.memoize(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{return window.top!==e}catch(t){return!0}}),isFriendlyIframe:i.memoize(function(){if(this.isInIframe())try{if(window.frameElement)return!0;if("undefined"!=typeof inDapIF&&inDapIF)return!0}catch(e){return!1}return!1}),isWindowTopSupported:i.memoize(function(){if(this.isFriendlyIframe())try{if(window.top.document)return!0}catch(e){return!1}return!1}),isKnownSafeFrame:i.memoize(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=["tpc.googlesyndication.com","securepubads.g.doubleclick.net","pubads.g.doubleclick.net","partner.googleadservices.com"];try{return this.isInIframe(e)&&new RegExp(t.reduce(function(e,t,i){return""+e+(i>0?"|":"")+t},""),"gi").test(e.location.href)}catch(i){return!1}}),isAboutBlankIframe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{return this.isInIframe(e)&&/about:blank/gi.test(e.location.href)}catch(t){return!1}},getCurrentAbTestId:function(){return o.abTestSkipContent?1:o.abTestId},checkNoShowLayer:function(){var e=document.querySelector('meta[property="cbolans"]');return e?i.toLower(e.getAttribute("content"))===Cbola.Env.activePid+"_16241":!1},cumulativeOffset:function(e){var t=0,i=0;do{var o=0,n=0;if(window.getComputedStyle&&window.WebKitCSSMatrix){var r=getComputedStyle(e).transform||getComputedStyle(e).webkitTransform,a=new WebKitCSSMatrix(r);o=a.m41,n=a.m42}t+=e.offsetTop+n||0,i+=e.offsetLeft+o||0,e=e.offsetParent}while(e);return{top:t,left:i}},CbolaSendLogsTimes:function(e){var t=i.get(Cbola.Env,"PageProperties.cbola_pageViewId",0);"undefined"!=typeof Cbola.Env.domainId&&null!==Cbola.Env.domainId&&Cbola.Logger.getInstance().notifyM(e,"Code reached method:"+e+". domainId: "+Cbola.Env.domainId+". PageViewId: "+t)},getPrevSibling:function(e){for(var t=e.previousSibling;t;){if(t.nodeType===Node.ELEMENT_NODE)return t;t=t.previousSibling}return null},fixPixelHeight:function(e){try{var t=this.getPrevSibling(e);"img"===t.tagName.toLowerCase()&&t.src.indexOf("pixel.watch")>-1&&(t.style["display"]="block")}catch(i){}},detectDeviceOrientation:function(){var e=void 0,t=void 0,i=document.getElementsByClassName("cbola-orientation-src");if(i.length>0)i=i[0],e=Math.max(i.clientWidth,0),t=Math.max(i.clientHeight,0);else{var o=window;window!==window.parent&&(o=window.parent);try{e=o.innerWidth||o.document.documentElement.clientWidth||o.document.body.clientWidth,t=o.innerHeight||o.document.documentElement.clientHeight||o.document.body.clientHeight}catch(n){o=window,e=o.innerWidth||o.document.documentElement.clientWidth||o.document.body.clientWidth,t=o.innerHeight||o.document.documentElement.clientHeight||o.document.body.clientHeight}}return e>t?(Cbola.Env.PageProperties.isPortrait=!1,"landscape"):(Cbola.Env.PageProperties.isPortrait=!0,"portrait")},injectStyle:function(e,t){var i=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(i),i.styleSheet)i.styleSheet.disabled||(i.styleSheet.cssText=t);else try{i.innerHTML=t}catch(o){i.textContent=t}return i},initPayload:function(){var e=Cbola.Env,t=this.getCurrentAbTestId();return{PublisherId:e.activePid,UrlData:{Url:e.PageProperties.hostname,Hash_128_Bit:e.PageProperties.urlHashMD5,Hash_160_Bit:e.PageProperties.urlHashSHA1},AbTestId:t,ScriptDomainId:Cbola.Env.domainId,IsMobile:e.PageProperties.isMobile,IsTablet:e.PageProperties.isTablet}},isGoogleWebLightAgent:i.memoize(function(){return/^.*?\bAndroid\b.*?\bgoogleweblight\b.*?$/.test(n)}),updateEnv:function(e){Cbola.Env=i.extend(Cbola.Env,e);var t={PageId:0,Category:0,Domain:0};i.defaults(Cbola.Env,t),i.extendWith(o,e.DefaultSettings,function(e,t){return"undefined"==typeof t?e:t})},parseBool:function(e){return e===!0||"true"===e||"number"==typeof e&&0!==e},dataset:function(){if(arguments.length<2)return null;var e=arguments.length<=0?void 0:arguments[0];if(!e)return null;var t=arguments.length<=1?void 0:arguments[1];return arguments.length>2&&(e.dataset?e.dataset[i.camelCase(t)]=arguments.length<=2?void 0:arguments[2]:e.setAttribute("data-"+i.kebabCase(t),arguments.length<=2?void 0:arguments[2])),e.dataset?e.dataset[i.camelCase(t)]||null:e.getAttribute("data-"+i.kebabCase(t))},datasetRemove:function(e,t){e.dataset?delete e.dataset[i.camelCase(t)]:e.removeAttribute("data-"+i.kebabCase(t))},getUrlParams:function(){var e={};try{e=this.getParamsFromUrl(window.top.location.href)}catch(t){e=this.getParamsFromUrl(window.location.href)}return e},integrationTypeCheck:function(){var e=Cbola.Enums.IntegrationTypes;try{return this.isInIframe()?this.isFriendlyIframe()?e.DFP:this.isKnownSafeFrame()?e.SAFE_FRAME:e.IFRAME:e.NORMAL}catch(t){return e.ERROR}},validateRGBArray:function(e){if(!i.isArray(e)||3!==e.length)return null;e=e.map(function(e){return parseInt(e)});for(var t=0;t<e.length;t++)if(isNaN(e[t])||e[t]<0||e[t]>255)return null;return e},rgbStringToArray:function(e){if("string"!=typeof e)return null;var t=e.indexOf("("),i=e.indexOf(")");if(-1===t||-1===i)return null;var o=e.substring(t+1,i).split(",");return this.validateRGBArray(o)},rgbToRgba:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.rgbStringToArray(e);return null===i?null:(i.splice(3,i.length,t),"rgba("+i.join(",")+")")},rgbToHSL:function(){for(var e=arguments.length,t=Array(e),i=0;e>i;i++)t[i]=arguments[i];var o=void 0,n=void 0,r=0,a=0,s=0;if(1===t.length){var l=this.rgbStringToArray(t[0]);if(null===l)return null;o=l[0]/255,n=l[1]/255,r=l[2]/255}else{if(3!==t.length)return null;if(t=this.validateRGBArray(t),null===t)return null;o=t[0]/255,n=t[1]/255,r=t[2]/255}var d=Math.min(o,n,r),c=Math.max(o,n,r),h=(d+c)/2,m=c-d;if(m){switch(s=.5>h?m/(c+d):m/(2-c-d),s=Math.round(100*s),c){case o:a=(n-r)/m;break;case n:a=2+(r-o)/m;break;case r:a=4+(o-n)/m}a=Math.round(60*a+(0>a?360:0))}return h=Math.round(100*h),{h:a,s:s,l:h}},generateGradientBreaksFromRGB:function(e,t){var o=d.rgbToHSL(e);if(i.isNil(o))return null;for(var n=90,r=o.l,a=.25*(n-r),s=[],l=0;t>l;l++){var c=r;t-1>l&&(c=r+Math.round(a),a/=2),s.push("hsla("+o.h+","+o.s+"%,"+c+"%, "+(0===l?.5:1)+")")}return s},replaceCommentWithElement:function(e,t,i){if(t.nodeType===Node.COMMENT_NODE&&t.textContent.trim()===e)return t.parentNode.replaceChild(i,t),!0;for(var o=t.firstChild;o;){if(this.replaceCommentWithElement(e,o,i))return!0;o=o.nextSibling}return!1},before:function(e,t){e.parentNode.insertBefore(t,e)},after:function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},remove:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},preappend:function(e,t){e.insertBefore(t,e.firstChild)},encodePayload:function(e){function t(e,o,n){var r=void 0,a=i.isArray(o),s=i.isPlainObject(o);i.forEach(o,function(i,o){r="undefined"==typeof i?"undefined":_typeof(i),n&&(o=n+"["+(s||"object"===r||"array"===r?o:"")+"]"),!n&&a?e.add(i.name,i.value):"array"===r||"object"===r?t(e,i,o):e.add(o,i)})}var o=[];return o.add=function(e,t){i.isFunction(t)&&(t=t()),i.isNil(t)&&(t=""),this.push(encodeURIComponent(e)+"="+encodeURIComponent(t))},t(o,e),o.join("&").replace(/%20/g,"+")},getBitlyUrlAsync:function(e,t){if(""===o.bitlyUrl){var n="https://api-ssl.bitly.com/v3/shorten?access_token=9bca2257713ece1cbe2417d579434912c24ae333&longUrl="+encodeURIComponent(d.checkIfQueryStingExist(e));fetch(n).then(function(e){if(e.status>=200&&e.status<300)return e.json();var t=new Error(e.statusText);throw t.response=e,t}).then(function(n){i.isNil(n.url)?o.bitlyUrl=d.checkIfQueryStingExist(e,!0):o.bitlyUrl=n.url,t(o.bitlyUrl)}).catch(this.noOp)}else t(o.bitlyUrl)},getParamsFromUrl:i.memoize(function(e){var t={};return i.isNil(e)?{}:(e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,i,o){t[i.toLowerCase()]=o}),t)}),isPassiveEventSupported:i.memoize(function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(i){}return e}),extractLinksFromText:function(e){for(var t="",o=[],n=/(https?:\/\/[^\s]+)/g;null!=(t=n.exec(e));){var r=t[0];r=i.trimEnd(r,"”"),o.push({idx:t.index,url:r})}return o},transform:function(e,t){if(!e||!e.style)return null;var o=e.style,n=["-webkit-","-moz-","-ms-","-o-",""];i.forEach(n,function(e){o[e+"transform"]=t})},removeTransform:function(e){if(!e||!e.style)return null;var t=e.style,o=["-webkit-","-moz-","-ms-","-o-",""];i.forEach(o,function(e){t.removeProperty(e+"transform")})},withAnimationFramePromise:function(t){return new Promise(function(o,n){i.isFunction(t)?e(function(){t(),e(o)}):n("No function provided")})},toggleTransition:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0,n="cbola-disable-transition",r="transitionToggleCount";if(i.isNil(e))return Promise.reject(new Error("No element provided for class toggling"));var a=e.classList,s=function(){return t.withAnimationFramePromise(function(){a[o?"remove":"add"](n)})},l=parseInt(this.dataset(e,r)),d=0;return d=isNaN(l)?o?0:1:Math.max(o?l-1:l+1,0),this.dataset(e,r,d),o&&a.contains(n)&&0===d?s():!o&&!a.contains(n)&&d>0?s():Promise.resolve()},dotdotdot:function(t){return new Promise(function(o){function n(){t.parentElement.contains(c)?a():e(n)}function r(){return c.offsetHeight>t.offsetHeight}function a(){if(s.length>0&&r())return s=s.substr(0,s.length-1),c.innerText=s+"...",void a();if(s.length>0){var e=c.innerHTML;if(e.length>0){t.innerText=e,e=t.innerText;for(var i=d.extractLinksFromText(e),n=0;n<i.length;n++){var h=i[n];h.text=h.url,h.url=l[n].url,e=e.replace(h.text,'<a href="'+h.url+'" target="_blank">'+h.text+"</a>")}t.innerHTML=e}}d.remove(c),o(t)}t.style["white-space"]="normal",t.style["overflow"]="hidden";var s=t.textContent,l=d.extractLinksFromText(s),c=t.cloneNode(!0);i.extend(c.style,{visibility:"hidden",overflow:"visible",width:t.offsetWidth+"px",height:"auto"}),d.after(t,c),n()})},documentReady:function(e){var t=Cbola.Env.topWindow;/complete|loaded|interactive/.test(t.document.readyState)?e():t.addEventListener("DOMContentLoaded",e)},isPageReady:function(){return/complete|loaded/gi.test(Cbola.Env.topWindow.document.readyState)},pageReady:function(e){this.isPageReady()?e():Cbola.Env.topWindow.addEventListener("load",e);
},isElementDisplayed:function(e){return!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length))},isElementAttachedAsync:function(t,o,n){var a=this;return t&&o?(n=i.isFunction(n)?n:function(){o.appendChild(t)},window.MutationObserver?new Promise(function(r){var s={childList:!0},l=function(o,n){o=a.slice.call(o);for(var s=0;s<o.length;s++){var l=o[s];if("childList"===l.type&&i.some(l.addedNodes,function(e){return e===t})){n.disconnect(),e(r);break}}},d=new MutationObserver(l);d.observe(o,s),n()}):this.isStyleAppliedAsync(t,o,n)):Promise.reject(new Error(r+".isElementAttachedAsync No parent element provided"))},isStyleAppliedAsync:function(t,o,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"cbola-inserted";if(!t||!o)return Promise.reject(new Error(r+".isStyleAppliedAsync No parent element provided"));n=i.isFunction(n)?n:function(){o.appendChild(t)};var s=["animationstart","MSAnimationStart","webkitAnimationStart"];return new Promise(function(r){var l=function n(l){l.target===t&&l.animationName===i.camelCase(a)&&(i.forEach(s,function(e){o.removeEventListener(e,n)}),t.classList.remove(a),e(r))};i.forEach(s,function(e){o.addEventListener(e,l,!1)}),n(),t.classList.add(a)})},getDocumentHeight:function(e){var t=e||Cbola.Env.viewportWindow;if(!t)return null;var i=t.document.body,o=t.document.documentElement;return Math.max(i.scrollHeight,o.scrollHeight,i.offsetHeight,o.offsetHeight,i.clientHeight,o.clientHeight)},getElementPixelsFromTop:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e||!t.document.body.contains(e)||!Cbola.Env.viewportWindow)return null;var i=d.cumulativeOffset(e).top;return i>d.getDocumentHeight(t)||0>i?0:t===Cbola.Env.viewportWindow?i:i+this.getElementPixelsFromTop(t.frameElement,t.parent)},createAdIframe:function(e){var t=e.width,i=void 0===t?0:t,o=e.height,n=void 0===o?0:o,r=document.createElement("iframe"),a="allow-scripts allow-forms allow-same-origin allow-popups";return this.chromeVersion()>=58&&(a+=" allow-top-navigation-by-user-activation"),r.setAttribute("sandbox",a),r.setAttribute("scrolling","no"),r.setAttribute("marginwidth","0"),r.setAttribute("marginheight","0"),r.setAttribute("frameborder","0"),r.style.setProperty("border","0","important"),r.style.setProperty("margin","0","important"),r.style["vertical-align"]="bottom",r.style["width"]=i+"px",r.style["height"]=n+"px",r},push:[].push,slice:[].slice,noOp:function(){}};return d}(),window.Cbola=window.Cbola||{},Cbola.TaskManager=function(){var e=250,t=Cbola._,i={},o=function(){this.loopIteration=null,this.isRunning=!1,this.loopIterationsCounter=0,this.deferredTasksQueue=[]};return o.prototype.executeTask=function(e,t,i){"undefined"==typeof i&&(i=window),e.apply(i,t)},o.prototype.taskExecutionLoop=function(){this.isRunning=!0,this.loopIteration=null,this.loopIterationsCounter++;var t=this.deferredTasksQueue.length;if("undefined"==typeof this.deferredTasksQueue)return Cbola.Logger.getInstance().warnOnceM("TaskManager.taskExecutionLoop","TaskManager::taskLoop -> deferredTasksQueue is undefined"),void(this.isRunning=!1);for(var i=0;t>i;i++){var o=this.deferredTasksQueue.shift();this.executeTask.apply(this,o)}this.deferredTasksQueue.length>0?this.loopIteration=setTimeout(this.taskExecutionLoop.bind(this),e):(this.loopIteration=null,this.isRunning=!1)},o.prototype.addTask=function(t,i,o,n){var r=[t,i,o,n];this.deferredTasksQueue.push(r),this.isRunning||this.loopIteration||(this.loopIteration=setTimeout(this.taskExecutionLoop.bind(this),e))},o.prototype.removeTask=function(e){var t=this;Cbola._.remove(this.deferredTasksQueue,function(i){return"undefined"!=typeof i[3]&&t.getTaskName(i)===e})},o.prototype.getTaskName=function(e){var t=e[3],i=e[0];return t?t:i?i.name?i.name:"function":""},o.prototype.addExpBackoffTask=function(e){function o(){if(t.isArray(a))return a.shift();var e=a;return a=l>a?Math.floor(a)+1:a,1e3*Math.pow(e,2)}var n=e.fn,r=e.backoff,a=void 0===r?.6:r,s=e.maxBackoffGrowth,l=void 0===s?4:s,d=e.maxBackoffIterations,c=void 0===d?4:d,h=e.name,m=void 0===h?null:h;if("function"==typeof n){var p=1;c=t.isArray(a)?a.length+1:c,function e(){if(p>c||n(p,c===p)===!1)return void(m&&(i[m]=null));p+=1;var t=window.setTimeout(e,o());m&&(i[m]=t)}()}},o.prototype.removeExpBackoffTask=function(e){var t=i[e];delete i[e],t&&clearTimeout(t)},new o}(),window.Cbola=window.Cbola||{},Cbola.Logger=window.Cbola.Logger||function(){function e(){var e=Date.now(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?i:3&i|8).toString(16)});return t}function t(){function t(e){if(!(w.length<1||C))if(C=!0,"undefined"==typeof e&&(e=w.splice(0,Math.min(5,w.length)),e.retries=0),e.retries<Cbola.Logger.MAX_RETRIES_PER_LOG)if(0===e.retries)s(e);else{var i=Math.min(Math.pow(2,e.retries-1),16);setTimeout(function(){return s(e)},1e3*i)}else l("Logger -> Sending log to server failed "+Cbola.Logger.MAX_RETRIES_PER_LOG+" times, discarding log entry: {"+e+"}",Cbola.Logger.Levels.WARNING),C=!1,t()}function r(){y=Cbola.Env.clientVersion?", version: "+Cbola.Env.clientVersion:"";for(var e=0;e<u.length;e++){var i=u[e];a(i[0],i[1],i[2])}u=[],C||t()}function a(t,i,o){i+=""+Cbola.Logger.serverSuffix()+y+", uuid: "+e()+"]";var r={payload:{LogType:t===Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER?Cbola.Logger.Levels.ALERT:t,Message:i,MethodName:o||n.callingMethod,ClassName:"abtest_"+Cbola.Config.abTestId},level:t,retries:0};w.push(r)}function s(e){function o(){if(!n){n=!0,C=!1,e.retries++;var i=Math.min(Math.pow(2,e.retries-1),16);l("Logger -> Sending log to server failed ["+e.retries+"/"+Cbola.Logger.MAX_RETRIES_PER_LOG+"] ("+p.name+": "+p.message+"), retrying in "+i+" seconds...",Cbola.Logger.Levels.DEBUG),t(e)}}for(var n=!1,r=e.map(function(e){return e.payload}),a="",s=r.length-1;s>=0;s--){var d=r[s];1===e.retries?d.Message=d.Message.substring(0,d.Message.length-1)+", retries: "+e.retries+"]":e.retries>1&&(d.Message=d.Message.substring(0,d.Message.length-2)+e.retries+"]");for(var c in d)a+="Logs["+s+"]["+c+"]="+encodeURIComponent(d[c])+"&"}a=a.substr(0,a.length-1);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(4===h.readyState)if(200===h.status||204===h.status)l("Logger -> Log succesfully sent to server: { "+a+" }",Cbola.Logger.Levels.DEBUG_LOGGER),C=!1,t();else if(!n){n=!0,e.retries++;var i=Math.min(Math.pow(2,e.retries-1),16);l("Logger -> Sending log to server failed ["+e.retries+"/"+Cbola.Logger.MAX_RETRIES_PER_LOG+"] ("+h.status+": "+h.statusText+"), retrying in "+i+" seconds...",Cbola.Logger.Levels.DEBUG),C=!1,t(e)}};try{var m=v||Cbola.Config.Defaults.loggingServer+"AddLogs";if(i.isEmpty(Cbola.Config.Defaults.loggingServer)&&i.isEmpty(v))return void o();h.open("POST",m,!0),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.onerror=o,h.send(a)}catch(p){o()}}function l(){var e="CBOLA::",t=o.slice.call(arguments),n=t.length>1?t.pop():Cbola.Logger.DEFAULT_LEVEL;if(f>=n){if("[*]"===t[0]&&(e+=t[0],t.shift()),t[0]&&t[0].hasOwnProperty("LoggerColor")){e="%c"+e;var r=t.shift().style;t[0]=e+" "+t[0],t.splice(1,0,r)}else t.unshift(e);n<=Cbola.Logger.Levels.WARNING&&!i.isEmpty(Cbola.Logger.getInstance().callingMethod)&&(t.shift(),t.unshift(Cbola.Logger.getInstance().callingMethod+"(): "),t.unshift(e)),n===Cbola.Logger.Levels.WARNING?console.warn.apply(console,t):n===Cbola.Logger.Levels.ERROR||n===Cbola.Logger.Levels.CRITICAL?console.error.apply(console,t):console.log.apply(console,t)}}function d(e){return function(){var t=o.slice.call(arguments);if(null!==t&&0!==t.length){t.push(e);var i=Cbola.Logger.getInstance();return i.callingMethod="",i.log.apply(i,t),i}}}function c(e){return function(){var t=o.slice.call(arguments);if(null!==t){var i=t.shift();if(null!==i&&0!==t.length){var n=Cbola.Logger.getInstance();return n.callingMethod=i,t.push(e),n.log.apply(n,t),n}}}}function h(e){return function(){var t=o.slice.call(arguments);if(null!==t&&0!==t.length){t.push(e);var i=Cbola.Logger.getInstance();i.callingMethod="";var n=t.reduce(function(e,t){return e+" "+JSON.stringify(t)});return b.indexOf(n)>-1?i:(b.push(n),i.log.apply(i,t),i)}}}function m(e){return function(){var t=o.slice.call(arguments);if(null!==t){var i=t.shift();if(null!==i&&0!==t.length){var n=Cbola.Logger.getInstance();t.push(e),n.callingMethod=i;var r=t.reduce(function(e,t){return e+" "+JSON.stringify(t)});return b.indexOf(r)>-1?n:(b.push(r),n.log.apply(n,t),n)}}}}var p=!1,u=[],b=[],f=Cbola.Env&&Cbola.Env.DEBUG?Cbola.Logger.Levels.TRACE:Cbola.Logger.Levels.OFF,g=Cbola.Logger.Levels.ERROR,y="",w=[],v=null,C=!1;return{log:function(){var e=o.slice.call(arguments);if(null!==e&&0!==e.length){1===e.length&&e.push(Cbola.Logger.DEFAULT_LEVEL);var i=e[e.length-1],r=g>=i||i===Cbola.Logger.Levels.TRACE;if(r&&e.unshift("[*]"),l.apply(n,e),r){e.shift(),e.pop(),e[0].hasOwnProperty("LoggerColor")&&e.shift();var s=e.reduce(function(e,t){return e+" "+JSON.stringify(t)});p?(a(i,s),C||t()):u.push([i,s,n.callingMethod])}return n}},alwaysSend:d(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),critical:d(Cbola.Logger.Levels.CRITICAL),error:d(Cbola.Logger.Levels.ERROR),warn:d(Cbola.Logger.Levels.WARNING),notify:d(Cbola.Logger.Levels.NOTICE),info:d(Cbola.Logger.Levels.INFO),debug:d(Cbola.Logger.Levels.DEBUG),trace:d(Cbola.Logger.Levels.TRACE),alwaysSendOnce:h(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),errorOnce:h(Cbola.Logger.Levels.ERROR),warnOnce:h(Cbola.Logger.Levels.WARNING),notifyOnce:h(Cbola.Logger.Levels.NOTICE),infoOnce:h(Cbola.Logger.Levels.INFO),debugOnce:h(Cbola.Logger.Levels.DEBUG),traceOnce:h(Cbola.Logger.Levels.TRACE),alwaysSendM:c(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),criticalM:c(Cbola.Logger.Levels.CRITICAL),errorM:c(Cbola.Logger.Levels.ERROR),warnM:c(Cbola.Logger.Levels.WARNING),notifyM:c(Cbola.Logger.Levels.NOTICE),alwaysSendOnceM:m(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),errorOnceM:m(Cbola.Logger.Levels.ERROR),warnOnceM:m(Cbola.Logger.Levels.WARNING),notifyOnceM:m(Cbola.Logger.Levels.NOTICE),enableServer:function(){p=!0,r()},set level(e){f=e},get level(){return f},set serverLevel(e){g=e},get serverLevel(){return g},get queue(){return w},set serverUrl(e){v=e},get serverUrl(){return v}}}var i=Cbola._,o=Cbola.Utils,n=void 0;return{getInstance:function(){return n||(n=t()),n}}}(),Cbola.Logger.MAX_RETRIES_PER_LOG=10,Cbola.Logger.Levels={ALWAYS_SEND_TO_SERVER:-999,ALERT:1,CRITICAL:2,ERROR:3,WARNING:4,NOTICE:5,INFO:6,DEBUG:7,TRACE:8,DEBUG_LOGGER:9,NONE:999},Cbola.Logger.DEFAULT_LEVEL=Cbola.Logger.Levels.INFO,Cbola.Logger.Colors={YELLOW:{LoggerColor:"yellow",style:"background: rgba(245, 210, 6, 1); color: black;font-size:13px"},RED:{LoggerColor:"red",style:"background: #8C0000; color: white;font-size:13px"},PALE_RED:{LoggerColor:"pale_red",style:"background: #FE4444; color: black;font-size:13px"},PALE_YELLOW:{LoggerColor:"pale_yellow",style:"background: rgb(250, 255, 202); color: black;font-size:13px"},PALE_GREEN:{LoggerColor:"pale_green",style:"background: rgb(229, 255, 215); color: black;font-size:13px"},PALE_BLUE:{LoggerColor:"pale_blue",style:"background: #98BDF1; color: black;font-size:13px"},PALE_PURPLE:{LoggerColor:"pale_purple",style:"color: #ce93d8;"},BLUE:{LoggerColor:"blue",style:"color: #2196f3;"},ORANGE:{LoggerColor:"orange",style:"color: rgb(255,140,0);"},GREEN:{LoggerColor:"green",style:"color: #0f9d58"}},Cbola.Env=Cbola.Env||{},Cbola.Env.domainId=Cbola.Env.domainId||0,Cbola.Env.activePid=Cbola.Env.activePid||0,Cbola.Env.wid=Cbola.Env.wid||0,Cbola.Logger.serverSuffix=Cbola._.memoize(function(){var e=Cbola.Utils.isMobile?"1":"0",t=Cbola.Utils.isTablet()?"1":"0";return"[did: "+Cbola.Env.domainId+", pid: "+Cbola.Env.activePid+", wid: "+Cbola.Env.wid+", pvid: "+Cbola.Env.PageProperties.cbola_pageViewId+", abtestid: "+Cbola.Config.abTestId+", ismobile: "+e+", istablet: "+t}),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.LocalStorageService=Cbola.Common.LocalStorageService||function(){var e=Cbola._,t=Cbola.Logger.getInstance(),i=function(){var e="Cbola_test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(i){return t.info(Cbola.Logger.Colors.PALE_RED,"localStorage is not available in this device"),!1}}(),o=i,n=function(e){return function(){if(o)try{for(var t=arguments.length,i=Array(t),n=0;t>n;n++)i[n]=arguments[n];return e.apply(this,i)}catch(r){}return null}},r=function(){};r.prototype={setItem:n(function(e,t){return!localStorage.setItem(e,t)}),getItem:n(function(e){return localStorage.getItem(e)}),removeItem:n(function(e){return!localStorage.removeItem(e)}),clear:function(){if(i)try{e.forEach(this.KEYS,function(e){return localStorage.removeItem(e)})}catch(t){}},setEnablement:function(e){o=i&&e}};var a=new r;return a.KEYS={CUID:"cbola_userId",CBOLA_ITEMS_HISTORY:"cbola_itemsArrayHistoryUser",ENABLE_TIMELINE:"cbola_timeline"},a}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.TimelineService=function(){var e=.05,t=Cbola._,i=Cbola.Logger.getInstance(),o=Cbola.Common.LocalStorageService,n=!t.isEmpty(o.getItem(o.KEYS.ENABLE_TIMELINE)),r=!t.isUndefined(window.performance&&window.performance.now),a=function(){this.counter=0,this.setEnabled(t.random(1,!0)<=e||n),this.isEnabled&&i.info(Cbola.Logger.Colors.BLUE,"TimelineService is active")};return a.prototype.mark=function(e,o){if(this.isEnabled){var n=performance.now();n=t.round(n,2);var r='timeline - "'+e+'" marked on: '+n+" ms ("+this.counter++ +")";i.alwaysSend(Cbola.Logger.Colors.BLUE,r),t.isUndefined(performance.mark)||performance.mark(e),o&&this.lastMark&&performance.measure&&performance.measure("cbola - "+e,this.lastMark,e),this.lastMark=e}},a.prototype.markStart=function(e){this.isEnabled&&this.mark(e+" started")},a.prototype.markEnd=function(e){if(this.isEnabled){this.mark(e+" completed");try{performance.measure&&performance.measure("cbola - "+e,e+" started",e+" completed")}catch(t){}}},a.prototype.record=function(e,t){return function(){Cbola.Common.TimelineService.markStart(t);for(var i=arguments.length,o=Array(i),n=0;i>n;n++)o[n]=arguments[n];e.apply(this,o),Cbola.Common.TimelineService.markEnd(t)}},a.prototype.setEnabled=function(e){this.isEnabled=r&&e},new a}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.CDN=Cbola.Common.CDN||function(){var e=Cbola,t=e._,i=e.Utils,o=e.Enums,n=e.Config,r=Cbola.Common.TimelineService,a=Cbola.Logger.getInstance(),s="CDN",l=function(){};return l.prototype._getPageElements=function(e,l){return new Promise(function(d,c){var h="_getPageElements",m=Cbola.Env,p=m.PageProperties,u=i.initPayload();u=t.extend(u,{WidgetId:e,CategoryId:m.categoryId,FallbackMinimalWidth:l||0,Tags:m.tags,Title:m.title,Body:m.body}),a.info(Cbola.Logger.Colors.PALE_GREEN,"Start GPE: "+Cbola.Utils.getRunTimeInMilis());var b=""+n.Defaults.CDN+i.getCurrentAbTestId()+"/"+m.activePid+"/"+(0===m.domainId?"all":m.domainId)+"/"+u.UrlData.Hash_128_Bit+"_"+u.UrlData.Hash_160_Bit;b+="_incontent_unified",p.isTablet?b+="_tablet":p.isMobile&&(b+="_mobile"),b+=0===parseInt(e)?"":"_"+e,b+=l?"_fallback_"+l:"",b+=".json";var f=new XMLHttpRequest;f.onload=function(){if(200===f.status){var n=JSON.parse(f.response),l=t.result(n,"Status");1===l?(n.widgetId=e,i.updateEnv(n),"undefined"!=typeof n.PageId&&a.info(Cbola.Logger.Colors.PALE_YELLOW,"Page Id: "+n.PageId),p.IsServerCall=n.IsServerCall=o.isServerCallTypes.FROM_CDN,r.markEnd(s+"."+h),d(n)):l?(a.info(Cbola.Logger.Colors.PALE_YELLOW,s+"."+h+" failed due to content server bad status: "+n.Status+". URL: "+p.originalPathNameHost+", pid: "+m.activePid),Cbola.Common.AnalyticsService.setPageRequest(n.Status,o.isServerCallTypes.FROM_CDN),c(!0)):(a.warnM(s+"."+h,s+"."+h+" returned bad response. Calling getPageElements form server."),c())}else c()},f.open("GET",b,!0),f.onerror=function(){a.errorM(s+"."+h,"Request to CDN failed. path: "+p.hostname+", pid: "+m.activePid+", Pvid: "+p.cbola_pageViewId+", XHR Status: "+this.status+", XHR status text: "+this.statusText+" "+(navigator&&navigator.userAgent?", User Agent: "+navigator.userAgent:"")),c()},f.send()})},new l}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.RequestHandler=function(){var Logger=Cbola.Logger.getInstance(),_Cbola=Cbola,_=_Cbola._,Utils=_Cbola.Utils,Enums=_Cbola.Enums,isServerCallTypes=Enums.isServerCallTypes,LoadStatusTypes=Enums.LoadStatusTypes,_Cbola$Common=Cbola.Common,CDN=_Cbola$Common.CDN,TimeLine=_Cbola$Common.TimelineService,MAX_RETRIES=10,CLASS_NAME="RequestHandler",parseJSON=function(e){return e.json()},checkStatus=function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t},RequestHandler=function(){};return RequestHandler.prototype.dispatch=function(){for(var e=this,t=arguments.length,i=Array(t),o=0;t>o;o++)i[o]=arguments[o];return this.dispatchCDN.apply(this,i).catch(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;return t?Promise.reject():e.dispatchServer.apply(e,i)})},RequestHandler.prototype.dispatchCDN=function(){for(var e=arguments.length,t=Array(e),i=0;e>i;i++)t[i]=arguments[i];var o=t.shift();return _.isFunction(CDN[o])?(TimeLine.markStart("CDN."+o),CDN[o].apply(CDN,t)):Promise.reject()},RequestHandler.prototype.dispatchServer=function(){for(var e=arguments.length,t=Array(e),i=0;e>i;i++)t[i]=arguments[i];var o=t[0];return TimeLine.markStart(CLASS_NAME+"."+o),this.promiseWithRetry.apply(this,t.concat([0]))},RequestHandler.prototype.promiseWithRetry=function(){for(var e=this,t=arguments.length,i=Array(t),o=0;t>o;o++)i[o]=arguments[o];var n="promiseWithRetry",r=i[0],a=i[i.length-1];return this[r].apply(this,i.slice(1)).catch(function(e){return new Promise(function(t,i){if(a>=MAX_RETRIES||_.isError(e))i(e);else{var o=Math.min(Math.pow(2,a),16);o=1===o?250:1e3*o,Logger.warnM(CLASS_NAME+"."+n+r,r+"() failed, retrying in "+o/1e3+" seconds... ("+a+"/"+MAX_RETRIES+")"),setTimeout(function(){return i(e)},o)}})}).catch(function(t){return _.isError(t)?(Logger.errorM(CLASS_NAME+"."+n+r,CLASS_NAME+"."+n+" failed firing "+r+"(). due to error: ",t),Promise.reject(t)):a>=MAX_RETRIES?(Logger.errorM(CLASS_NAME+"."+n+r,CLASS_NAME+"."+n+" failed firing "+r+"() after "+MAX_RETRIES+" errors."),_.isFunction(t)&&t(),Promise.reject()):(i.splice(-1,1,a+1),e.promiseWithRetry.apply(e,i))})},RequestHandler.prototype.getPageElements=function(e,t){return this.dispatch("_getPageElements",e,t)},RequestHandler.prototype.getMoreContent=function(e){return this.dispatch("_getMoreContent",e)},RequestHandler.prototype.getAds=function(e,t,i){return this.dispatch("_getAds",e,t,i)},RequestHandler.prototype.getLayerScript=function(e){return this.dispatch("_getLayerScript",e)},RequestHandler.prototype.getJsBundle=function(e){return this.dispatch("_getJsBundle",e)},RequestHandler.prototype._getPageElements=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o="_getPageElements",n=Cbola.Env,r=Cbola.Config,a=Cbola.Env.PageProperties,s=function(e){_.isNil(e)||Cbola.Common.AnalyticsService.setPageRequest(e,isServerCallTypes.FROM_SERVER)},l=Utils.initPayload();return l=_.extend(l,{WidgetId:parseInt(e),CategoryId:n.categoryId,FallbackMinimalWidth:t||0,Tags:n.tags,Title:n.title,Body:n.body}),_.isEmpty(n.PageProperties.SrcUrl)||(l.SrcUrl=n.PageProperties.SrcUrl),Logger.info("getPageElements start. json: ",l),new Promise(function(t,n){fetch(r.Defaults.queryServer+"GetInContentInfo",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(l)}).then(checkStatus).then(parseJSON).then(function(l){l.widgetId=e,Utils.updateEnv(l),a.IsServerCall=isServerCallTypes.FROM_SERVER,1===l.Status?("undefined"!=typeof l.PageId&&Logger.info(Cbola.Logger.Colors.PALE_YELLOW,"Page Id: "+l.PageId),i>0&&Logger.alwaysSendM(CLASS_NAME+"."+o,CLASS_NAME+"."+o+" succeeded on "+i+" attempts. url: "+a.originalPathNameHost+", pageviewid: "+a.cbola_pageViewId),l.IsServerCall=a.IsServerCall,TimeLine.markEnd(CLASS_NAME+"."+o),t(l)):2===l.Status||3===l.Status?(r.errorMessage="In automation",n(function(){return s(l.status)})):(s(l.Status),n(new Error("Content server bad status: "+l.Status+". URL: "+a.originalPathNameHost)))}).catch(function(){return n(function(){return s(Enums.PageRequestTypes.INITIALIZE_FAILED)})})})},RequestHandler.prototype._getMoreContent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Logger.info(Cbola.Logger.Colors.PALE_GREEN,"Start to GetMoreContent for elementId"+e.ElementId+": "+Utils.getRunTimeInMilis());var i=Cbola.Common.UserService,o={UserId:i.getUserId(),UserHistory:i.getItemsHistory()};_.extend(e,o);var n=_.isEmpty(e.CurrentSession);n&&(e.CurrentSession=[0]);var r=_.extend(Utils.initPayload(),e);return new Promise(function(o,a){fetch(Cbola.Config.Defaults.queryServer+"GetMoreContent",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:Utils.encodePayload(r)}).then(checkStatus).then(parseJSON).then(function(n){if(_.isEmpty(n))0===t?(i.clearItemsHistory(),a()):a(new Error("Failed to get more content after history cleaning"));else{Logger.info(Cbola.Logger.Colors.PALE_GREEN,"End of GetMoreContent for elementId"+e.ElementId+": "+Utils.getRunTimeInMilis());var r=_.map(n,function(e){return new Cbola.InContent.Layers.Item(e)});TimeLine.markEnd(CLASS_NAME+"._getMoreContent"),o(r)}}).catch(function(e){return a(3===t&&n||e)})})},RequestHandler.prototype._getAds=function(e,t,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n="_getAds",r=Cbola.EventBus,a=Cbola.Env,s=Cbola.Config,l=Cbola.Env.PageProperties,d={PageId:a.PageId,PublisherPublicKey:a.activePid,UrlData_Url:l.hostname,UrlData_Hash_128_Bit:l.urlHashMD5,UrlData_Hash_160_Bit:l.urlHashSHA1,AbTestId:s.abTestId,ProductType:Enums.ProductTypes.IN_CONTENT,WidgetId:e,LayoutTypes:[i],IsMobile:l.isMobile,IsTablet:l.isTablet,DomainId:a.Domain,CategoryId:a.Category,IsSsl:/https:/gi.test(document.location.protocol)},c=function(e){_.isNil(e)||Cbola.Common.AnalyticsService.setPageElementRequest({elementId:t,loadStatus:e})};return new Promise(function(e,i){var a=new Promise(function(e,t){setTimeout(function(){var e=new Error("request timeout");e.isTimeout=!0,t(e)},1e3*s.getAdsCheckElementRetries)}),h=fetch(""+s.Defaults.adServer+s.Defaults.adServer_method,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:Utils.encodePayload(d)});Promise.race([a,h]).then(checkStatus).then(parseJSON).then(function(a){1===a.Status?(o>0&&Logger.alwaysSendM(CLASS_NAME+"."+n,CLASS_NAME+"."+n+" succeeded on "+o+" attempts. url: "+l.originalPathNameHost+", pageviewid: "+l.cbola_pageViewId),TimeLine.markEnd(CLASS_NAME+"."+n),r.fire(r.Events.GET_ADS_READY,{elementId:t,data:a}),e(a)):i(new Error("Ad server bad status: "+a.Status+". url: "+l.originalPathNameHost+", pageviewid: "+l.cbola_pageViewId))}).catch(function(e){var t=null;500===_.get(e,"request.status")?t=LoadStatusTypes.AD_SERVER_DOWN:e.isTimeout?t=LoadStatusTypes.GET_ADS_MAX_RETRY:_.isNil(e.request)&&(t=LoadStatusTypes.GET_ADS_FAILED),2===o&&c(t),i(function(){return c(t)})})})},RequestHandler.prototype._getLayerScript=function(layerType){var _retryAttempt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise(function(resolve,reject){var METHOD="_getLayerScript",url=Cbola.Env.clientPath+"container/layer_"+layerType+"/cbola_layer_"+layerType+"."+Cbola.Env.clientPathType+"js",xhttp=new XMLHttpRequest,onFailure=function(e){(0===_retryAttempt||2===_retryAttempt)&&Logger.alwaysSendM(CLASS_NAME+"."+METHOD,"Failed getting script for layer "+layerType+" on attempt: "+(_retryAttempt+1)+" due to: "+_.get(e,"message","")+". URL: "+Cbola.Env.PageProperties.originalPathNameHost),reject()};xhttp.onload=function(){200===xhttp.status&&xhttp.response?(eval(xhttp.response),TimeLine.markEnd(CLASS_NAME+"."+METHOD),resolve()):onFailure(new Error("response status "+xhttp.status))},xhttp.open("GET",url,!0),xhttp.onerror=onFailure,xhttp.send()})},RequestHandler.prototype._getJsBundle=function(filename){return new Promise(function(resolve,reject){var METHOD="_getJsBundle",url=""+Cbola.Env.clientPath+filename;if(Cbola.Env.DEBUG){var script=document.createElement("script");script.onload=function(){TimeLine.markEnd(CLASS_NAME+"."+METHOD),resolve()},script.onerror=function(){reject(new Error("Failed loading path: "+filename+" by script tag attachment"))};var node=document.querySelector("script");node.parentNode.insertBefore(script,node),script.src=url}else{var logJSBundleLoadFailure=function(){Logger.errorM(CLASS_NAME+"."+METHOD,CLASS_NAME+"."+METHOD+" failed loading file from path "+filename)},xhttp=new XMLHttpRequest;xhttp.onload=function(){200===xhttp.status&&xhttp.response?(eval(xhttp.response),TimeLine.markEnd(CLASS_NAME+"."+METHOD),resolve()):reject(logJSBundleLoadFailure)},xhttp.open("GET",url,!0),xhttp.onerror=function(){return reject(logJSBundleLoadFailure)},xhttp.send()}})},new RequestHandler}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.UserService=function(){function e(){y[n.Language.english]={ad:"Ad",add:"add",addThisWidgetToYourSite:"add this widget to your site",addWidgetToYourSite:"add widget to your site",addThisToYourSite:"add this to your site",advertisement:"Advertisement",anotherQuiz:"another quiz",backToGame:"back to game",canYouBeatThat:"Can you beat that?",challenge:"Challenge",correct:"Correct",discoverTheMost:"Discover the most mind-blowing facts out there!",falseButton:"False",iScored:"I scored",nextQuiz:"Next quiz",playingIn:"playing in",promotedBy:"promoted by",poweredBy:"powered by",question:"Question",score:"Score",seconds:"seconds",skip:"Skip",start:"Start",startsIn:"starts in:",thankYouForPlaying:"Thank you for playing !",toYourSite:"to your site",trueButton:"True",trueOrFalse:"True or False?",upNext:"Up next: ",whatsNext:"whats next ?",wrong:"Wrong",youMayLike:"You May Like...",yourFriends:"your friends",yourScore:"Your score",YouScoredaFair:"You Scored a Fair",YouScoredaLame:"You Scored a Lame",YouScoredanAwesome:"You Scored an Awesome",YouScoredaMighty:"You Scored a Mighty",youScoredaPerfect:"You Scored a Perfect",YouScoredaRidiculous:"You Scored a Poor"},y[n.Language.spanish]={ad:"Anuncio",add:"Añade",addThisWidgetToYourSite:"Añade este widget a tu sitio",addWidgetToYourSite:"añade este widget a tu sitio",advertisement:"Publicidad",anotherQuiz:"otro juego",backToGame:"volver al juego",canYouBeatThat:"Puedes vencerme?",challenge:"Desafía",correct:"Correcto",discoverTheMost:"Descubre las curiosidades más interesantes!",falseButton:"Falso",iScored:"Obtuve un puntaje de",nextQuiz:"Próximo Juego",playingIn:"jugando",question:"Pregunta",score:"Puntaje",seconds:"segundos",skip:"Omitir",start:"comienza",startsIn:"comienza en:",thankYouForPlaying:"gracias por jugar !",toYourSite:"a tu sitio",trueButton:"Verdadero",trueOrFalse:"Verdadero o Falso?",upNext:"Siguiente: ",wrong:"Incorrecto",youMayLike:"te puede interesar",yourFriends:"a tus amigos",yourScore:"Tu Puntaje",YouScoredaFair:"Tu Puntaje Final es",YouScoredaLame:"Tu Puntaje Final es",YouScoredanAwesome:"Tu Puntaje Final es",YouScoredaMighty:"Tu Puntaje Final es",youScoredaPerfect:"Tu Puntaje Final es",YouScoredaRidiculous:"Tu Puntaje Final es"},y[n.Language.portuguese]={ad:"anúncio",advertisement:"publicidade",addThisWidgetToYourSite:"adicione este widget ao seu site",addWidgetToYourSite:"adicione este widget ao seu site",anotherQuiz:"outro jogo",backToGame:"voltar ao jogo",canYouBeatThat:"Você pode me vencer?",challenge:"Desafie",correct:"Correto",falseButton:"Falso",iScored:"Obtive uma pontuação",nextQuiz:"Próximo Jogo",playingIn:"jogando",question:"Pergunta",score:"Pontuação",seconds:"segundos",skip:"pular",start:"começa",startsIn:"começa em:",thankYouForPlaying:"obrigado por jogar !",toYourSite:"ao seu site",trueButton:"Verdadeiro",trueOrFalse:"Verdadeiro ou Falso?",upNext:"Seguinte: ",wrong:"Incorreto",youMayLike:"você pode se interessar",yourFriends:"os seus amigos",yourScore:"Sua Pontuação",YouScoredaFair:"Sua Pontuação Final é",YouScoredaLame:"Sua Pontuação Final é",YouScoredanAwesome:"Sua Pontuação Final é",YouScoredaMighty:"Sua Pontuação Final é",youScoredaPerfect:"Sua Pontuação Final é",YouScoredaRidiculous:"Sua Pontuação Final é"},y[n.Language.russian]={ad:"объявление",add:"Добавить",addThisWidgetToYourSite:"Добавьте этот виджет на свой сайт",advertisement:"Реклама",addWidgetToYourSite:"Добавьте виджет на свой сайт",anotherQuiz:"Другая викторина",backToGame:"вернуться к игре",canYouBeatThat:"Можете ли вы лучше?",challenge:"Озадачьте ",correct:"Правильно",falseButton:"Неверно",iScored:"Я набрал",nextQuiz:"Следующий конкурс",playingIn:"очков, играя в",question:"Вопрос",score:"Результат",sconds:"секунд",skip:"пропустить",start:"Старт",startsIn:"Начало через",thankYouForPlaying:"Спасибо за игру",toYourSite:"в ваш сайт",trueButton:"Верно",trueOrFalse:"Верно Или Неверно?",upNext:"Следующая",whatsNext:"что следует",wrong:"Ошибка",youMayLike:"Вам может понравиться",yourFriends:"своих друзей",yourScore:"Ваш Результат",YouScoredaFair:"Ваш Результат",YouScoredaLame:"Ваш Результат",YouScoredanAwesome:"Ваш Результат",YouScoredaMighty:"Ваш Результат",youScoredaPerfect:"Ваш Результат",YouScoredaRidiculous:"Ваш Результат"},y[n.Language.french]={ad:"Publicité",advertisement:"Publicité",canYouBeatThat:"Tu peux me battre?",challenge:"Défiez ",correct:"Correct",falseButton:"Faux",iScored:"J`ai totalisé",nextQuiz:"Prochain quiz",playingIn:"en jouant au Quiz",question:"Question",score:"Score",start:"Début",trueButton:"Vrai",trueOrFalse:"Vrai ou Faux",wrong:"Incorrect",yourFriends:"Vos amis",yourScore:"Votre score",YouScoredaFair:"Votre score est de",YouScoredaLame:"Votre score est de",YouScoredanAwesome:"Votre score est de",YouScoredaMighty:"Votre score est de",youScoredaPerfect:"Votre score est de",YouScoredaRidiculous:"Votre score est de"},y[n.Language.german]={ad:"Anzeige"}}var t=Cbola,i=t._,o=t.EventBus,n=t.Config,r=o.Events,a=Cbola.Logger.getInstance(),s=Cbola.Common.LocalStorageService,l=s.KEYS,d="12345678",c=function(e){s.setEnablement(e),e||s.clear()},h=n.Language.english,m=l.CUID,p=l.CBOLA_ITEMS_HISTORY,u=!1,b="0",f=null,g=h,y={},w=null;e();var v=function(){this._vocabulary=y[h],b=s.getItem(m)||"0",c(!this.isEUUser())};return v.prototype.getItemsHistory=function(){if(f)return f;var e=s.getItem(p);return e?(e=i.trimEnd(e,","),f=i.split(e,",")):[0]},v.prototype.addItemsToHistory=function(e){var t=this.getItemsHistory();t&&(e=i.union(t,e));var o=i.trimEnd(i.join(i.uniq(e),","),",");f=e,s.setItem(p,o)},v.prototype.clearItemsHistory=function(){f=null,s.removeItem(p)},v.prototype.getUserId=function(){return b},v.prototype.isEUUserAsync=function(){var e=this;return u?Promise.resolve(this.isEUUser()):(w||(w=new Promise(function(t){o.addEventListener(r.USER_ID_SET,function(){t(e.isEUUser())})})),w)},v.prototype.setUserId=function(e){b=e,u=!0,c(!this.isEUUser()),s.setItem(m,e),o.fire(r.USER_ID_SET)},v.prototype.isEUUser=function(){return b===d||"0"===b},v.prototype.getLanguage=function(){return g},v.prototype.setLanguage=function(e){g=e,y.hasOwnProperty(g)?this._vocabulary=y[g]:a.warnM("UserService.setLanguage","UserService Failed to set language: "+e)},v.prototype.vocabulary=function(){var e="",t=arguments;return 0===t.length?"":(i.forEach(t,function(i,o){e+=this.getWard(i),o!==t.length-1&&(e+=" ")}.bind(this)),e)},v.prototype.getWard=function(e){return this._vocabulary[e]||y[h][e]||""},v.prototype.wasItemAlreadyViewed=function(e){if(e.IgnoreUserHistory)return!1;var t=e.ParentId?e.ParentId:e.Id;return this.getItemsHistory().indexOf(t.toString())>-1},v.prototype.dictionaryReport=function(){var e={},t=i.keys(y[h]);return i.forEach(y,function(o,n){n!==h&&(e[n]=i.difference(t,i.keys(o)))}),e},new v}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AnalyticsService=function(){function e(e){return e.json();
}function t(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function i(e){var t={ClientVersion:h.clientVersion,PageViewId:h.PageProperties.cbola_pageViewId,PageId:h.PageId,UserId:s.getUserId(),PublisherId:h.activePid,Second:c.getRunTimeInSecs(),categoryId:h.Category,domainId:h.Domain,IsMobile:h.PageProperties.isMobile,IsTablet:h.PageProperties.isTablet,isPortrait:h.PageProperties.isPortrait,AbTestId:p.abTestId};return e&&m.extend(t,e),m.defaults(t,b),t}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.analyticsName,r=e.additionalParams,a=e.onError,s=void 0===a?!1:a,m=e.onSuccess,u=void 0===m?!1:m,b=e.includeCredentials,f=void 0===b?!1:b;l.info(d.PALE_PURPLE,n+"::"+o);var g=i(r),y={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:c.encodePayload(g)};f&&(y.credentials="include"),fetch(""+p.Defaults.analyticsServer+o,y).then(t).then(function(e){l.info(d.PALE_PURPLE,"fired "+o+" analytics to server.",g),h.DEBUG&&console.table&&g.Items&&console.table(g.Items),u&&u(e)}).catch(function(e){s?s(e.response):l.trace(d.PALE_RED,o+" failed.")})}var n="AnalyticsService",r=Cbola.Enums,a=r.SetClickTypes,s=Cbola.Common.UserService,l=Cbola.Logger.getInstance(),d=Cbola.Logger.Colors,c=Cbola.Utils,h=Cbola.Env,m=Cbola._,p=Cbola.Config,u=Cbola.Common.RequestHandler,b={WidgetId:0,PageId:0,PageViewId:0,PublisherId:0,UserId:0,categoryId:0,domainId:0},f=function(){};f.prototype.setPageRequest=function(t,i,n){var a="SetPageRequestGeo";h.PageStatus=t;var u=0;try{u=Math.floor(100*Math.abs(h.PageProperties.secondGlobal/1e3))/100}catch(b){}var f=0;try{0!==h.PageProperties.publisherScriptExecutionTime&&null!==h.PageProperties.publisherScriptExecutionTime&&(f=Math.floor(100*Math.abs((h.PageProperties.publisherScriptExecutionTime-window.performance.timing.connectStart)/1e3))/100)}catch(b){}var g={PageStatus:t,IsServerCall:i,SecondFromPageLoad:f,SecondGlobal:u,WidgetId:h.widgetId,ScriptDomainId:h.domainId,IntegrationType:h.IntegrationType||0,ProductType:r.ProductTypes.IN_CONTENT};t!==r.PageRequestTypes.DIV_TOO_SMALL&&t!==r.PageRequestTypes.HIDDEN_IFRAME||!n?(g.ScreenWidth=h.topWindow.innerWidth,g.ScreenHeight=h.topWindow.innerHeight):(g.ScreenHeight=n.height,g.ScreenWidth=n.width),c.isInIframe()&&!c.isWindowTopSupported()||m.isEmpty(window.top.document.referrer)||(g.ReferrerURL=window.top.document.referrer),p.ignoreQueryString&&(g.QueryString=encodeURIComponent(p.queryString));var y=function(t){e(t).then(function(e){var t=m.get(e,"UserId","0");h.userId=t,s.setUserId(t),l.info(d.PALE_PURPLE,a+" -> UserId: "+h.userId)})},w=function(){s.setUserId("0"),l.trace(d.PALE_RED,a+" failed to set user Id")};o({analyticsName:a,additionalParams:g,onError:w,onSuccess:y,includeCredentials:!0})};var g=function(e,t,i){var o=Cbola.InContent.Manager.getLayerByElementId(e);return{ElementId:e,Ads:[{TagId:t,ProviderId:"",TriggerType:i}],WidgetId:o.widgetId,ProductType:r.ProductTypes.IN_CONTENT,LayoutType:o.type,ItemType:o.itemType,HbToken:o.hbToken}};f.prototype.setAdsRequest=function(e,t,i,n){var r=g(e,t,i);"undefined"!=typeof n&&(r.HbCpm=n),o({analyticsName:"SetAdsRequest",additionalParams:r})},f.prototype.setBlockedAdRequest=function(e,t,i){var n=g(e,t,i);o({analyticsName:"SetBlcAr",additionalParams:n})},f.prototype.setPageElementRequest=function(e){var o="SetPageElementsRequestNew";l.info(d.PALE_PURPLE,n+"::"+o);var a=null,s=e.elementId;if(e.layer?(a=e.layer,s=a.elementId):s&&(a=Cbola.InContent.Manager.getLayerByElementId(e.elementId)),!m.isNil(a)&&e.hasOwnProperty("loadStatus")){var u=null;try{h.PageProperties.secondGlobal>0&&(u=c.getRunTimeInSecs()+Math.floor(100*Math.abs(h.PageProperties.secondGlobal/1e3))/100)}catch(b){}var f={ElementId:s,LoadStatus:e.loadStatus,PageStatus:h.PageProperties.PageStatus,IsServerCall:m.get(a,"data.IsServerCall",m.get(e,"isServerCall",h.PageProperties.IsServerCall)),Width:a.container?a.container.offsetWidth:0,Height:a.container?a.container.offsetHeight:0,WidgetId:a.widgetId,ItemType:a.itemType||0,LayoutType:a.type||0,ProductType:r.ProductTypes.IN_CONTENT,HbToken:a.hbToken,SecondGlobal:u},g=c.getDocumentHeight();null!==g&&(f.PageHeight=g||0);var y=c.getElementPixelsFromTop(a.element);null!==y&&(f.PixelsFromTop=y||-1),f=i(f);var w={Elements:[f]};fetch(""+p.Defaults.analyticsServer+o,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:c.encodePayload(w)}).then(t).then(function(){l.info(d.PALE_PURPLE,n+"."+o+" success.")}).catch(function(){l.trace(d.PALE_RED,o+" failed.")})}},f.prototype.setPageElementView=function(e,t,i,n){var a=Cbola.InContent.Manager.getLayerByElementId(e);if(!m.isNil(a)){var s={ElementId:a.elementId,ElementViewId:m.isFunction(a.getViewId)?a.getViewId():0,TeaserType:0,OpenType:t,CloseType:i,WidgetId:a.widgetId,LayoutType:a.type,ProductType:r.ProductTypes.IN_CONTENT,Duration:m.isUndefined(n)?a.isViewable()?0:a.getViewDuration():n,HbToken:a.hbToken};o({analyticsName:"SetPageElementView",additionalParams:s})}},f.prototype.setClick=function(e,t,i){var n="SetClick";if(!c.isGoogleWebLightAgent()){var s=Cbola.InContent.Manager.getLayerByElementId(e),h=0;i&&(h=i.Id,s.isMobile()||t===a.SHARE_BEFORE_FACEBOOK||t===a.SHARE_BEFORE_TWITTER?h=i.Id:(t===a.SHARE_AFTER_TWITTER||t===a.SHARE_AFTER_FACEBOOK)&&(h=i.ParentId));var p={ElementId:e,ElementViewId:m.result(s,"getViewId",0),ClickType:t,ItemId:h,WidgetId:s.widgetId,LayoutType:s.type,ProductType:r.ProductTypes.IN_CONTENT,HbToken:s.hbToken};o({analyticsName:n,additionalParams:p,onError:function(){l.traceOnce(d.PALE_RED,n+" failed.")}})}},f.prototype.setClientError=function(e){var t={PageId:0,PageViewId:0,PublisherId:0,UserId:0,categoryId:0,domainId:0},i={Url:window.location.href.toLowerCase(),FileName:e.filename,Line:e.lineno,Col:e.colno,ErrorMessage:e.message,Type:e.type};m.defaults(i,t),o({analyticsName:"SetClientError",additionalParams:i})},f.prototype.setPageClose=function(){var e="SetPageClose";l.info(d.PALE_PURPLE,n+"::"+e);var t=i(),o=new XMLHttpRequest,r=""+p.Defaults.analyticsServer+e,a=function(){return l.trace(d.PALE_RED,e+" failed.")};o.open("POST",r,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&(200===o.status||204===o.status?(l.info(d.PALE_PURPLE,"fired "+e+" analytics to server.",t),h.DEBUG&&console.table&&t&&console.table(t)):a())},o.onerror=a,o.send(c.encodePayload(t))},f.prototype.setItemsView=function(e,t){var i=Cbola.InContent.Manager.getLayerByElementId(e);if(!m.isNil(i)){var n={ElementId:e,ElementViewId:m.result(i,"getViewId",0),Items:m.map(t,function(e){return{Id:e.Id||0,OpenType:e.openType,CloseType:e.closeType,DisplayOrder:e.displayOrder,ViewOrder:e.viewOrder,Duration:e.isViewable?0:e.getViewableDuration(),AnswerId:e.userAnswerId}}),WidgetId:i.widgetId,LayoutType:i.type,HbToken:i.hbToken};o({analyticsName:"SetItemsView",additionalParams:n})}},f.prototype.setConsentStatus=function(e){o({analyticsName:"SetConsentStatus",additionalParams:{ConsentStatus:e}})},f.prototype.setClickTracker=function(e){var t="SetClickTracker";l.info(d.PALE_PURPLE,n+"::"+t),e?fetch(e).then(function(){l.info(d.PALE_PURPLE,n+"."+t+" succeeded for url: "+e)}):l.trace(n+".setClickTracker",n+".setClickTracker failed to set URL for click tracker")};var y=!1,w=[],v=null,C=null,_={nested:{SetHbBidRequestParams:{fields:{base:{type:"Base",id:1},BidRequests:{rule:"repeated",type:"HbBidRequest",id:2}},nested:{Base:{fields:{ClientVersion:{type:"string",id:1},PageViewId:{type:"string",id:2},PageId:{type:"int64",id:3},DomainId:{type:"int32",id:4},CategoryId:{type:"int32",id:5},PublisherId:{type:"string",id:6},AbTestId:{type:"int32",id:7},UserId:{type:"string",id:8},Second:{type:"float",id:9},ProductType:{type:"ProductTypeEnum",id:10},IsMobile:{type:"bool",id:11},IsTablet:{type:"bool",id:12},isPortrait:{type:"bool",id:13},WidgetId:{type:"int32",id:14},HbToken:{type:"string",id:15},SecondGlobal:{type:"float",id:16}},nested:{ProductTypeEnum:{values:{Unknown:0,InImage:1,InContent:2,AnayticsScript:3}}}},HbBidRequest:{fields:{TagId:{type:"int32",id:1},Cpm:{type:"float",id:2},Duration:{type:"float",id:3},Status:{type:"int32",id:4},TimeInPocket:{type:"float",id:5},AuctionCpm:{type:"float",id:6},PocketCpm:{type:"float",id:7},TimeToRespond:{type:"float",id:8},PocketUsageType:{type:"PocketUsageTypeEnum",id:9},PocketSizeHT:{type:"int32",id:10},PocketSizeLT:{type:"int32",id:11}},nested:{PocketUsageTypeEnum:{values:{Unknown:0,FromAuction:1,FromHighTierPocket:2,FromLowTierPocket:3}}}}}}}};f.prototype.setHbBidRequestProto=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];window.Cbola.protobuf?I(e):(y||(y=!0,u.getJsBundle("external/protobuf.min.js").then(function(){for(;w.length>0;)I(w.shift())}).catch(c.noOp)),w.push(e))};var I=function(e){var o="SetHbBidRequestProto";m.isNil(v)&&(v=new Cbola.protobuf.Root,Cbola.protobuf.Root.fromJSON(_,v),C=v.lookupType("SetHbBidRequestParams"));var a=i();m.extend(a,{DomainId:a.domainId,CategoryId:a.categoryId,ProductType:r.ProductTypes.IN_CONTENT,PageId:Cbola.protobuf.util.LongBits.fromNumber(a.PageId).toLong()}),delete a.domainId,delete a.categoryId;var s={base:a,BidRequests:e},c=C.verify(s);if(c)return void l.errorM(n+"."+o,o+" failed on message verification, error: "+c);var h=C.create(s),u=C.encode(h).finish(),b={method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:u};fetch(""+p.Defaults.analyticsServer+o,b).then(t).then(function(){return l.info(d.PALE_PURPLE,"fire "+o+" analytics to server. payload: ",s)}).catch(function(){return l.trace(o+" failed.")})};return f.prototype.setLastMile=function(e){var i="SetLastMile";l.info(d.PALE_PURPLE,n+"::"+i);var o={public_key:h.activePid,domain_id:h.Domain,product_type:r.ProductTypes.IN_CONTENT,is_mobile:h.PageProperties.isMobile?1:0};m.extend(o,e),fetch(""+p.Defaults.analyticsServer+i+"?"+m.reduce(o,function(e,t,i){return""+e+(e?"&":"")+i+"="+t},""),{method:"GET"}).then(t).then(function(){return l.info(d.PALE_PURPLE,"fired "+i+" analytics to server.",o)}).catch(function(){return l.trace(d.PALE_RED,i+" failed.")})},new f}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.ConsentProviders=Cbola.Common.ConsentProviders||{},Cbola.Common.ConsentProviders._Base=Cbola.Common.ConsentProviders._Base=function(){var e=Cbola._,t=Cbola.Logger.getInstance(),i=.5,o=32,n=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;t()?n():setTimeout(function(){return e(t,n,Math.min(2*r,o))},1e3*r)},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ConsentProviderBase";this.initialized=!1,this.name=e};return r.prototype={_waitForProvider:function(i){var o=this,r=void 0;return this.initialized?e.isFunction(i)||(r="Tester is not a function"):r="Not initialized",r?(t.errorM(this.name+"._waitForProvider",this.name+"._waitForProvider:: "+r),Promise.reject(new Error(r))):new Promise(function(e){n(i,function(){e(o)})})},init:function(){this.initialized=!0},getProviderPromise:function(){return Promise.reject("getProviderAsync not implemented")},hasConsentPromise:function(){return Promise.reject("testConsentAsync not implemented")}},r}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.ConsentProviders=Cbola.Common.ConsentProviders||{},Cbola.Common.ConsentProviders.GoogleFC=Cbola.Common.ConsentProviders.GoogleFC||function(){var e=Cbola.Utils,t=Cbola._,i=Cbola.Common.AnalyticsService,o=Cbola.Common.ConsentProviders._Base,n=Cbola.Enums.ConsentStatusTypes,r=null,a=null,s=null,l=null,d=function(){var t=e.isInIframe();return t&&e.isWindowTopSupported()?r=window.top:t||(r=window),!!r},c=function(){return!a&&r&&r.googlefc&&(a=r.googlefc,i.setConsentStatus(n.GOOGLE_FUNDING_CHOICES_FOUND)),!!a},h=function(e){var o=t.get(a,"ConsentStatusEnum",{}),n=e!==o.CONTRIBUTOR&&e!==o.NO_CONSENT;return i.setConsentStatus(e),n},m=function(){o.call(this,"GoogleFC")};return m.prototype=Object.create(o.prototype),m.constructor=m,m.prototype.init=function(){this.initialized=d()},m.prototype.getProviderPromise=function(){return s||(s=this._waitForProvider(c)),s},m.prototype.hasConsentPromise=function(){if(!l){var e=t.result(a,"getConsentStatus",-1);l=-1!==e?h(e)?Promise.resolve():Promise.reject():new Promise(function(e,i){a.callbackQueue.push(function(){h(t.result(a,"getConsentStatus",-1))?e():i()})})}return l},new m}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.ConsentProviders=Cbola.Common.ConsentProviders||{},Cbola.Common.ConsentProviders.StandardCMP=Cbola.Common.ConsentProviders.StandardCMP||function(){var e=Cbola.Common.AnalyticsService,t=Cbola.Common.ConsentProviders._Base,i=Cbola.Enums.ConsentStatusTypes,o=null,n=null,r=null,a=function t(){for(var r=window;!o&&!n;){try{o=r.__cmp,n=r.frames["__cmpLocator"]}catch(a){}if(r===window.top)break;r=r.parent}var t=!(!o&&!n);return t&&e.setConsentStatus(i.IAB_STANDARD_CMP_FOUND),t},s=function(){t.call(this,"StandardCMP")};return s.prototype=Object.create(t.prototype),s.constructor=s,s.prototype.getProviderPromise=function(){return r||(r=this._waitForProvider(a)),r},s.prototype.hasConsentPromise=function(){return Promise.resolve()},new s}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.ConsentProviders=Cbola.Common.ConsentProviders||{},Cbola.Common.ConsentProviders.Manager=Cbola.Common.ConsentProviders.Manager||function(){var e=Cbola._,t=Cbola.Utils,i={gfc:Cbola.Common.ConsentProviders.GoogleFC,cmp:Cbola.Common.ConsentProviders.StandardCMP},o=void 0,n=void 0,r=function(){this.activeProviders={}};return r.prototype={init:function(t){var o=this;e.extend(t,{cmp:!0}),e.forEach(t,function(e,t){e&&i[t]&&(o.activeProviders[t]=i[t],o.activeProviders[t].init())})},consentProviderFound:function(){if(!o){var t=e.map(this.activeProviders,function(e){return e.getProviderPromise()});o=Promise.race(t)}return o},hasConsent:function(){return n||(n=this.consentProviderFound().then(function(e){return e.hasConsentPromise()},t.noOp)),n}},new r}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.IframeBuster=function(){var e=Cbola.Logger.getInstance(),t=Cbola._,i=Cbola.Config;return function(){function o(e,i,n){_classCallCheck(this,o),this.iframeBusterOptions={hasLocationSelectors:!t.isEmpty(t.result(e,"LocationSelector",{})),iFrameAdjust:t.result(e,"iFrameAdjustForTablet",!1)&&Cbola.Env.PageProperties.isTablet||t.result(e,"iFrameAdjust",!1),mobileiFrameAdjust:t.result(e,"mobileiFrameAdjust",!1),iFrameBusterWidth:e.iFrameBusterWidth,fixedHeight:t.result(e,"iFrameFixedHeight",null),fixedWidth:t.result(e,"iFrameFixedWidth",null),advertisementTitleHeight:t.result(e,"IncludeAdvertisementTitle",!1)?20:0},this.layerType=n,this.widgetId=i,this.iFrameElement=null,this.iframePropertiesSet=!1}return _createClass(o,null,[{key:"pushScriptAboveIframe",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=window,n=o.frameElement;n&&o.parent&&o.parent!==o.top;)o=o.parent,n=o.frameElement;if(t.isNil(n))return!1;n.insertAdjacentHTML("beforebegin",'<script class="'+i.inContentClass+'" cbola_wid="'+e+'" data-manual-build="true"></script>'),n.style["height"]="0";var r=document.createElement("script");r.src=Cbola.Env.proxyElem.src,r.id=i.proxyId,r.setAttribute("mediatype","InContent");var a=parent.document.getElementsByTagName("script")[0];return a.parentNode.insertBefore(r,a),!0}}]),_createClass(o,[{key:"init",value:function(){if(this.findIframeElement().checkIframeDimension(),this.iframeBusterOptions.fixedHeight||this.iframeBusterOptions.fixedWidth){var e=this.getIframe();e&&(this.iframeBusterOptions.fixedHeight&&(e.style["height"]=this.iframeBusterOptions.fixedHeight+this.iframeBusterOptions.advertisementTitleHeight+"px"),this.iframeBusterOptions.fixedWidth&&(e.style["width"]=this.iframeBusterOptions.fixedWidth+"px")),this.setIframeProperties()}return 112566===Cbola.Env.domainId&&this.prizeGrabHack(),this}},{key:"checkIframeDimension",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o="IframeBuster.checkIframeDimension",n=this.iframeBusterOptions;if(!this.shouldBust())return this;var r=n.iFrameBusterWidth||0,a=this.getIframe(),s=a.getBoundingClientRect();try{var l=i.getLayersDefaultSizeForIframe(this.layerType);l.height+t+n.advertisementTitleHeight>s.height&&(e.info("Iframe's height was change from: "+s.height+" to "+(l.height+t+n.advertisementTitleHeight)),a.style["height"]=l.height+t+n.advertisementTitleHeight+"px"),a.style["width"]="100%",0!==r?(a.style["min-width"]=r+"px",e.info("Iframe's min-width was change to: "+r)):-1!==l.width&&(a.style["min-width"]=l.width+"px",e.info("Iframe's min-width was change to: "+l.width)),this.setIframeProperties()}catch(d){e.errorM(o,o+" failed, Path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid)}return this}},{key:"setIframeSize",value:function(e,t){if(!this.shouldBust())return this;var i=this.getIframe();if(!i)return this;var o="undefined"!=typeof e?e:window.parent.innerWidth,n="undefined"!=typeof t?t:0;return i.style["width"]=o+"px",0!==n&&(i.style["height"]=n+this.iframeBusterOptions.advertisementTitleHeight+"px"),this}},{key:"setIframeProperties",value:function(){var t="IframeBuster.setIframeProperties",i=this.getIframe();if(!this.iframePropertiesSet&&i)try{i.setAttribute("scrolling","no"),i.setAttribute("marginwidth","0"),i.setAttribute("marginheight","0"),i.setAttribute("frameborder","0"),i.contentDocument.body.style["margin"]=0,i.contentDocument.body.style["overflow"]="hidden",this.iframePropertiesSet=!0}catch(o){e.errorM(t,t+" failed setting iframe attributes and style")}return this}},{key:"prizeGrabHack",value:function(){var e=this.getIframe();if(e){var t=e.contentDocument.head.querySelector("style");e.contentDocument.head.removeChild(t)}}},{key:"findIframeElement",value:function(){var t="IframeBuster.findIframeElement";try{this.iFrameElement=window.frameElement||null}catch(i){e.errorOnceM(t,t+" failed getting iframe element, wid: "+this.widgetId+", e:",i)}return this}},{key:"shouldBust",value:function(){var e=this.iframeBusterOptions,i=Cbola.Env.PageProperties.isMobile;return!e.hasLocationSelectors&&(e.iFrameAdjust&&!i||e.mobileiFrameAdjust&&i)&&!t.isNil(this.iFrameElement)}},{key:"getIframe",value:function(){return this.iFrameElement}}]),o}()}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Item=function(){var e=Cbola,t=e.Utils,i=e._,o=function e(t){i.extend(this,t),this.Type===e.Types.TWEET&&(i.extend(this,this.Tweet),delete this.Tweet),this.becameViewableAt=0,this.lastViewableDuration=0,this.viewOrder=1,this.displayOrder=1,this.isViewable=!1,this.userAnswerId=0};return o.prototype.setOpenType=function(e){this.openType=e},o.prototype.setCloseType=function(e){this.closeType=e},o.prototype.setDisplayOrder=function(e){this.displayOrder=e},o.prototype.setViewOrder=function(e){this.viewOrder=e},o.prototype.setUserAnswerId=function(e){this.userAnswerId=e||0},o.prototype.setViewable=function(e){if(this.isViewable=e,e)this.becameViewableAt=t.getRunTimeInSecs();else{var i=t.getRunTimeInSecs()-this.becameViewableAt;this.lastViewableDuration=Math.round(100*i)/100}},o.prototype.getViewableDuration=function(){return this.isViewable?t.getRunTimeInSecs()-this.becameViewableAt:this.lastViewableDuration},o.prototype.isAd=function(){return this.type===o.Types.AD},o.prototype.getType=function(){return this.type||this.Type},o.Types={FACT:1,TIP:2,QUOTE:3,ON_THIS_DAY:4,TRIVIA:5,DIED_THIS_DAY:6,TRIVIA_MULTI:7,TRIVIA_MULTI_PAIRS:8,GAME_SET:254,CHART:255,TWEET:9,AD:-1e3},o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.BasicService=function(){var e=Cbola,t=e._,i=Cbola.Common,o=i.RequestHandler,n=i.UserService,r=Cbola.Logger.getInstance(),a={},s=function(){this.pendingItems=[],this.historicallyViewedItems=[]};return s.prototype.getMoreItems=function(e,i,n){var s=this,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=[],h=this.getSession(e),m=this.getOrCreatePendingItems(i),p=function(){var o=s.getHistoricallyViewedItems(i);if(!o.length||h.length)return o.splice(0),[];var n=t.differenceBy(o,h,"Id");return o.splice(0),a[e]=t.unionBy(h,n,"Id"),n||[]},u=function(){c=m.splice(0,Math.max(l,5));var i=t.differenceBy(c,h,"Id");a[e]=t.unionBy(h,i,"Id"),n(i)};if(m.length>=l)u();else{if(r.debug(this.name+"::getMoreItems -> quering server for more items..."),d+=1,d>1)return void(m.length>0?u():n(p()));var b=this.extendParams({WidgetId:i,ElementId:e,CurrentSession:t.map(h,function(e){return e.Id})});o.getMoreContent(b).then(function(o){if(r.debug(s.name+"::getMoreItems -> got more items from server"),t.isEmpty(o))return void n(p());o=s.transformServerResponse(o);var a=t.unionBy(m,o,"Id");a.unshift(0,m.length),m.splice.apply(m,a),s.getMoreItems(e,i,n,l,d)}).catch(function(){return n(p())})}},s.prototype.extendParams=function(e){try{e.FallbackMinimalWidth=Cbola.InContent.Manager.getLayerByElementId(e.ElementId).fallbackMinimalWidth||0}catch(t){e.FallbackMinimalWidth=0}return e},s.prototype.transformServerResponse=function(e){return e},s.prototype.clearSession=function(e){return a[e]=[],this},s.prototype.getSession=function(e){return"undefined"==typeof a[e]&&(a[e]=[]),a[e]},s.prototype.addItem=function(e,t){e&&!n.wasItemAlreadyViewed(e)?this.getOrCreatePendingItems(t).push(e):e&&this.getHistoricallyViewedItems(t).push(e)},s.prototype.getOrCreatePendingItems=function(e){var i=parseInt(e);return t.isArray(this.pendingItems[i])||(this.pendingItems[i]=[]),this.pendingItems[i]},s.prototype.getHistoricallyViewedItems=function(e){var i=parseInt(e);return t.isArray(this.historicallyViewedItems[i])||(this.historicallyViewedItems[i]=[]),this.historicallyViewedItems[i]},s.prototype.getAll=function(){return this.pendingItems},s.prototype.getAllByWidgetId=function(e){var t=parseInt(e);return this.pendingItems[t]},s}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.DiedThisDayService=function(){function e(e){return e&&e.OnThisDayDate?t(i,new Date(e.OnThisDayDate)):!1}function t(e,t){return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}var i=new Date,o=Cbola._,n=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),r=Cbola.InContent.Layers.Services.BasicService,a=function(){r.call(this),this.name="DiedThisDayService"};return o.extend(a.prototype,r.prototype),a.prototype.extendParams=function(e){return r.prototype.extendParams.call(this,e),e.ClientDate=n,e},a.prototype.transformServerResponse=function(t){var i=o.filter(t,e);return i.sort(),i},a.prototype.addItem=function(t,i){e(t)&&r.prototype.addItem.call(this,t,i)},a.prototype.getTotalOfItemsAvailableForToday=function(){return this.totalItemsAvailableOnServer},a.prototype.setTotalItemsForToday=function(e){var n=0;o.forEach(e,function(e){t(i,new Date(e.Day))&&(n=e.ItemCount)}),this.totalItemsAvailableOnServer=n},a.prototype.getDateDay=function(){return i.getDate()},new a}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.DiedThisWeekService=function(){var e=Cbola.InContent.Layers.Services.BasicService,t=Cbola._,i=function(){e.call(this),this.name="DiedThisWeekService",this.totalItemsAvailableOnServer=0};return t.extend(i.prototype,e.prototype),i.prototype.getTotalItemsAvailableForThisWeek=function(){return this.totalItemsAvailableOnServer},i.prototype.setTotalItemsForThisWeek=function(e){this.totalItemsAvailableOnServer=e.reduce(function(e,i){return e+t.result(i,"ItemCount",0)},0)},new i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.FactsService=function(){var e=Cbola.InContent.Layers.Services.BasicService,t=Cbola._,i=function(){e.call(this),this.name="FactsService"};return t.extend(i.prototype,e.prototype),new i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.OnThisDayService=function(){var e=Cbola._,t=new Date,i=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),o=!1,n=Cbola.InContent.Layers.Services.BasicService,r={es:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],pt:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],en:["January","February","March","April","May","June","July","August","September","October","November","December"],ja:["1","2","3","4","5","6","7","8","9","10","11","12"]},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.match(/(\d+)/g);return t.length>=3?new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2])):null},s=function(e){var o=a(e.OnThisDayDate);o&&(t=o,i=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate())},l=function(e){if(o)return!0;if(e){var i=a(e.OnThisDayDate);if(i)return d(t,i)}return!1},d=function(e,t){return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},c=function(){n.call(this),this.name="OnThisDayService"};return e.extend(c.prototype,n.prototype),c.prototype.extendParams=function(e){return n.prototype.extendParams.call(this,e),e.ClientDate=i,e},c.prototype.transformServerResponse=function(t){return e.filter(t,l).sort()},c.prototype.addItem=function(e,t){l(e)&&n.prototype.addItem.call(this,e,t)},c.prototype.getTotalOfItemsAvailableForToday=function(){return this.totalItemsAvailableOnServer},c.prototype.setTotalItemsForToday=function(e){var i=0;for(var o in e){var n=e[o],r=new Date(n.Day);d(t,r)&&(i=n.ItemCount)}this.totalItemsAvailableOnServer=i},c.prototype.getDateDay=function(){return t.getDate()},c.prototype.getMonthName=function(e){return e=r.hasOwnProperty(e)?e:"en",r[e][t.getMonth()]},c.prototype.setIgnoreClientDate=function(e,t){o=Cbola.Utils.parseBool(e),"undefined"!=typeof t&&s(t)},new c}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.TriviaService=function(){var e=1,t=Cbola.Common.UserService,i=Cbola.InContent.Layers.Item,o=Cbola.Logger.getInstance(),n={},r=Cbola.InContent.Layers.Item.Types,a={TRUE_FALSE:[r.TRIVIA],MULTI_ANSWER:[r.TRIVIA_MULTI,r.TRIVIA_MULTI_PAIRS]},s={},l={},d=0,c=Cbola._,h=Cbola.EventBus,m=Cbola.Common.RequestHandler,p=function(){this.triviaTypes={};for(var e in a)a.hasOwnProperty(e)&&(this.triviaTypes[e]=e)};p.prototype.setFirstItemId=function(e){d=e},p.prototype.getNewGame=function(t,i,n,r,a){if("undefined"==typeof a&&(a=0),a>e)return void r(null);a++;var c=this.getPendingGamesByTriviaType(n),h=this.getOrCreateSession(t);if(c.length>0&&!d){var m=c.shift();delete s[m.id],m.widgetId=i,m.elementId=t,h.push(m),l[t]=h,r(m)}else o.debug("TriviaService::getNewGame -> quering server for more items..."),this.getMoreFromServer(t,i,n,function(){this.getNewGame(t,i,n,r,a)}.bind(this))},p.prototype.prepareNewGame=function(e,t,i){var o=this.translateItemToTriviaType(i);this.getPendingGamesByTriviaType(o).length>0||this.getMoreFromServer(e,t,o)},p.prototype.getMoreFromServer=function(e,i,n,r){var a=this,l=this.getOrCreateSession(e);o.debug("TriviaService::getNewGame -> quering server for more items...");var h={WidgetId:i,ElementId:e,CurrentSession:c.map(l,function(e){return e.id}),UserHistory:t.getItemsHistory(),FirstItemId:d};h=this.extendParams(h),m.getMoreContent(h).then(function(e){var t=a.getPendingGamesByTriviaType(n);o.debug("TriviaService::getMoreFromServer -> got more items from server");var i=c.groupBy(e,"ParentId");c.forEach(i,function(i,o){var n=s[o];n&&!n.hasAllItems()?n.items=c.unionBy(n.items,i,"Id"):n||(n=new f(i)),d?(d=0,t.unshift(n)):t.push(n),s[o]=n,r&&r(e)})}).catch(function(){r&&r([])})},p.prototype.extendParams=function(e){try{e.FallbackMinimalWidth=Cbola.InContent.Manager.getLayerByElementId(e.ElementId).fallbackMinimalWidth||0}catch(t){e.FallbackMinimalWidth=0}return e},p.prototype.clearSession=function(e){l[e]=[]},p.prototype.getOrCreateSession=function(e){var t=null;return"undefined"==typeof l[e]?(t=[],l[e]=t):t=l[e],t},p.prototype.addItem=function(e){var i=e.ParentId,o=e.Type,n=s[i];if(!t.wasItemAlreadyViewed(e))if(n)n.hasAllItems()||(n.items=c.unionBy(n.items,[e],"Id"));else{var r=new f([e]),a=this.getPendingGamesByTriviaType(this.translateItemToTriviaType(o));a.push(r),s[i]=r}},p.prototype.getAll=function(){return n},p.prototype.getPendingGamesByTriviaType=function(e){return n.hasOwnProperty(e)||(n[e]=[]),n[e]},p.prototype.translateItemToTriviaType=function(e){for(var t in a)if(a.hasOwnProperty(t)&&a[t].indexOf(e)>-1)return t};var u=function(e){for(var t="",i=0;i<e.length;i++)if(!c.isEmpty(e[i].ChartTitle)){t=e[i].ChartTitle;break}return t},b=function(e){for(var t="",i=0;i<e.length;i++)if(!c.isEmpty(e[i].Title)){t=e[i].Title;break}return t},f=function(e){function i(e){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t.id=e[0].ParentId,t.gameType=e[0].Type,t.title=u(e),t.shortTitle=b(e),t.items=e,t.currItemIdx=0,t.score=0,t.firstItem=e[0].Id,t.isCompleted=!1,t.historized=!1,t}return _inherits(i,e),_createClass(i,[{key:"getQuestionItem",value:function(e){return this.items[e]}},{key:"getCurrentQuestionItem",value:function(){return this.items[this.currItemIdx]}},{key:"getNextQuestionItem",value:function(){return this.items[this.currItemIdx+1]}},{key:"getCurrentQuestionNumber",value:function(){return this.currItemIdx+1}},{key:"hasEnded",value:function(){return this.isCompleted}},{key:"answerCurrentQuestion",value:function(e){if(this.isCompleted)return null;var i=this.items[this.currItemIdx],o=!1;0===e||this.historized||(this.historized=!0,t.addItemsToHistory([this.id]));for(var n=0;n<i.Answers.length;n++){var r=i.Answers[n];if(parseInt(e)===r.Id){1===r.Type&&(this.score+=1,o=!0);break}}return this.currItemIdx++,this.isAboutToEnd()&&Cbola.InContent.Layers.Services.TriviaService.prepareNewGame(this.elementId,this.widgetId,this.gameType),this.currItemIdx===this.items.length&&(this.isCompleted=!0,this.currItemIdx=this.items.length-1),o}},{key:"getCurrentQuestionCorrectAnswerIdx",value:function(){if(this.isCompleted)return null;for(var e=this.items[this.currItemIdx],t=0;t<e.Answers.length;t++)if(1===e.Answers[t].Type)return t}},{key:"getCurrentQuestionCorrectAnswerId",value:function(){if(this.isCompleted)return null;for(var e=this.items[this.currItemIdx],t=0;t<e.Answers.length;t++){var i=e.Answers[t];if(1===i.Type)return i.Id}}},{key:"restart",value:function(){this.score=0,this.currItemIdx=0,this.isCompleted=!1}},{key:"hasAllItems",value:function(){
return this.gameType===Cbola.InContent.Layers.Item.Types.TRIVIA?10===this.items.length:!1}},{key:"isAboutToEnd",value:function e(){var e=this.currItemIdx+2===this.items.length;return e&&h.fire(""+h.Events.TRIVIA_BEFORE_END+this.id),e}}]),i}(i);return new p}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.TweetsService=function(){function e(e){if(o.isEmpty(e))return"";var t=Date.parse(e),i=n-t;return 0>i?"":6e4>i?o.round(i/1e3,0)+"s":36e5>i?o.round(i/6e4,0)+"m":864e5>i?o.round(i/36e5,0)+"h":2592e6>i?o.round(i/864e5,0)+"d":31104e6>i?o.round(i/2592e6,0)+"mo":o.round(i/10368e5)+"y"}function t(e){return 1e3>e?e:e>=1e3&&1e6>e?o.round(e/1e3,e>=1e5?0:1)+"k":o.round(e/1e6,e>=1e7?0:1)+"M"}var i=Cbola.InContent.Layers.Services.BasicService,o=Cbola._,n=Date.now(),r=function(){i.call(this),this.name="TweetsService"};return o.extend(r.prototype,i.prototype),r.prototype.transformServerResponse=function(i){var n=o.map(i,function(i){return i.Favs=t(i.Favs),i.Retweets=t(i.Retweets),i.elapsedTime=e(i.PostDate||""),i.HasImage=!!i.HasImage,i});return n},r.prototype.addItem=function(e,t){i.prototype.addItem.apply(this,[o.head(this.transformServerResponse([e])),t])},new r}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.FontsManager=function(){var e=[],t=Cbola._,i=Cbola.Env,o=function(){this.windowHead=document.getElementsByTagName("head")[0];try{this.topWindowHead=window.top.document.getElementsByTagName("head")[0]}catch(e){this.topWindowHead=this.windowHead}};return o.prototype.alreadyLoaded=function(i){return t.indexOf(i,e)>-1},o.prototype.getOpenSans=function(){var e="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,600,300,700,800";this.loadFont(e)},o.prototype.getOswald=function(){var e="//fonts.googleapis.com/css?family=Oswald:400,700,300";this.loadFont(e)},o.prototype.getNunito=function(){var e="//fonts.googleapis.com/css?family=Nunito:500,600,300,700,400";this.loadFont(e)},o.prototype.getRoboto=function(){var e="//fonts.googleapis.com/css?family=Roboto:500,300,700,400";this.loadFont(e)},o.prototype.getKnowledge=function(){var t=i.protocol+"//static.reutersmedia.net/resources_v2/fonts/Knowledge";if(!this.alreadyLoaded(t)){e.push(t);var o=document.createElement("style");o.appendChild(document.createTextNode("\n				@font-face {font-family: 'knowledge-regular';	src: url('"+t+"-Regular.woff') format('woff');	font-weight: normal; font-style: normal;}\n				@font-face {font-family: 'knowledge-medium'; src: url('"+t+"-Medium.woff') format('woff'); font-weight: normal; font-style: normal;}")),document.head.appendChild(o)}},o.prototype.getHeebo=function(){var e="https://fonts.googleapis.com/css?family=Heebo:400,500";this.loadFont(e)},o.prototype.loadFont=function(t){if(this.alreadyLoaded(t))Cbola.Logger.getInstance().debug("FontsManager -> ",t," was previously loaded, no need to load again.");else{e.push(t);var o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",""+i.protocol+t),this.windowHead.appendChild(o);try{if(this.windowHead!==this.topWindowHead){var n=o.cloneNode();this.topWindowHead.appendChild(n)}}catch(r){}}},new o}(),window.Cbola=window.Cbola||{},Cbola.Globals=Cbola.Globals||{},Cbola.Globals.ElementIdFactory=Cbola.Globals.ElementIdFactory||function(){var e=void 0,t=0,i=window;try{window.top.document&&(i=window.top)}catch(o){}var n=function(){};n.prototype={getGlobalElementId:function(){return t++,-1*t},getElementId:function(){return t}};try{i!==window?(i.Cbola=i.Cbola||{},i.Cbola.Globals=i.Cbola.Globals||{},i.Cbola.Globals.ElementIdFactory=i.Cbola.Globals.ElementIdFactory||new n,e=i.Cbola.Globals.ElementIdFactory):e=new n}catch(o){e=new n}return e}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Manager=function(){var e=Cbola._,t=Cbola.Common.AnalyticsService,i=Cbola.Utils,o=Cbola.Logger.getInstance(),n=Cbola.Logger.Colors,r=Cbola.Common.TimelineService,a=Cbola.EventBus,s=Cbola.Enums,l=s.PageRequestTypes,d="InContentManager",c=Cbola.Config,h=Cbola.Env,m={},p={},u={},b=function(a){var l=a.detail;i.CbolaSendLogsTimes("setVisibleLayout"),o.info(n.YELLOW,"WidgetLoad: "+i.getRunTimeInSecs()+"; for elementId: "+l.elementId+"; widgetId: "+l.widgetId,l.container),l.isSidebar()&&f(l),g(l).then(r.record(l.onAfterLoad.bind(l),"layer "+l.type+" -> onAfterLoad")),h.PageProperties.PageStatus=1,t.setPageElementRequest({layer:l,loadStatus:s.LoadStatusTypes.SUCCESS}),y(l);var d=e.get(l,"data.DefaultSettings.MoatSrc",null);if(!e.isNil(d)){var c=document.createElement("script");l.topContainer.appendChild(c),c.src=d+"moatClientLevel1="+h.activePid+"&moatClientLevel2="+h.domainId+"&moatClientLevel3="+l.widgetId}},f=function(t){for(var i=t.topContainer.parentElement,o=c.getLayersDefaultSize(t.type),n=!1,r={width:["left","right"],height:["top","bottom"]},a=function(){n=!0;var t=window.getComputedStyle(i),a=i.getBoundingClientRect();e.forEach(o,function(e,o){var s="border-box"===t["boxSizing"]?r[o].reduce(function(e,i){return e+=parseInt(t["padding-"+i])||0},0):0;parseInt(a[o],10)-s<e&&(i.style["min-"+o]=e+s+"px",n=!1)}),i=i.parentElement};i&&!n;)a()},g=function(t){return i.toggleTransition(t.container,!1).then(function(){if(e.get(t,"options.LayerExposureOnAdsReady",!1)){var i=Cbola.Globals.AdsService.getTriggersManagerByElementId(t.elementId);if(!e.isNil(i)){var o=[];return o.push(i.managerReady()),o.push(new Promise(function(i){return setTimeout(i,e.get(t,"options.DelayLayerExposure")||3e3)})),Promise.race(o)}}return Promise.resolve()}).then(function(){return i.toggleTransition(t.container,!0)}).then(function(){t.container.style["opacity"]="1"})},y=function(t){if(e.get(t,"data.DefaultSettings.IncludeAdvertisementTitle",!1)&&(i.isFriendlyIframe()||!i.isInIframe())){var o=Cbola.Templates.createElement("advertisement_title.html");t.topContainer.insertBefore(o,t.container),t.iframeBuster.checkIframeDimension()}},w=function(e){var t=document.querySelectorAll("."+c.inContentClass);0===t.length&&(t=document.querySelectorAll("."+c.placeholderClass));for(var o=0;o<t.length;o++){var n=t[o],r=n.getAttribute("cbola_wid");if(r==e||null===r)return i.dataset(n,"activeId",o),n}return null},v=function(t){var n=e.get(t,"data.DefaultSettings.LocationSelector");return e.isNil(n)?Promise.resolve(t):new Promise(function(e,r){var a=t.scriptElement,s=1,l=function l(){if(s>=c.findICSelectorElementMaxRetries)return void r(t);o.info("retry of SelectorElement for elementId: "+t.elementId+", cbola_findICSelectorElement function, retries: "+s);for(var h=0;h<n.length;h++){var m=n[h],p=document.querySelectorAll(m.SelectorValue);if(p.length>0){var u=p[Math.min(m.AppearancePosition,p.length-1)];return 1===m.LocationType?i.preappend(u,a):u.appendChild(a),void e(t)}}s+=1,o.warnM(d+".attachElementToSelector","Selector element was not found"),Cbola.taskManager.addTask(l,[],this,"placeholderAttachmentRetries")};l()})},C=function(e){return!i.isInIframe()&&!i.isElementDisplayed(e)},_=e.memoize(function(e){return Cbola.InContent.Layers.Base.prototype.isSidebar.apply(e)}),I=function(e){return"undefined"==typeof e.topContainer?A:P},x=function(n){var r=d+".testCompatibleContainer",a=n.scriptElement,s=Cbola.Templates.createElement("width_check.html"),m=i.isFriendlyIframe()&&!i.isElementDisplayed(window.frameElement),p=C(s),u=[];i.after(a,s),Cbola.taskManager.addExpBackoffTask({fn:function(a,d){for(var b=s.clientWidth,f=s,g=0,y=!1;0===b&&g<=c.maxParentElementsCheckWidth&&f;)try{"undefined"==typeof u[g]&&(u[g]=f.parentElement),f=u[g],g+=1,f&&(b=f.clientWidth,f.tagName&&"head"===f.tagName.toLowerCase()&&(y=!0))}catch(w){return t.setPageRequest(l.INITIALIZE_FAILED,n.data.IsServerCall),o.criticalM(r,"Initialize of IC was failed at "+r+" width element parents iteration. url: "+h.PageProperties.hostname,w),!1}if(y)return t.setPageRequest(l.INITIALIZE_FAILED,n.data.IsServerCall),o.criticalM(r,"Script injected in page's head. url: "+h.PageProperties.hostname+", pageviewid: "+h.PageProperties.cbola_pageViewId),!1;if(b>0)return i.remove(s),E(n,b),!1;if(_(n)&&!p&&!m&&!i.isInIframe())return I(n)(n),!1;if(d){var v="";p?v="In hidden containing element.":m?v="In hidden iFrame.":i.isInIframe()&&(v="In non-friendly iFrame."),o.errorM(r,"IC too small - div width is 0. "+v+" url: "+h.PageProperties.hostname),t.setPageRequest(m||p?l.HIDDEN_IFRAME:l.DIV_TOO_SMALL,n.data.IsServerCall,{width:0,height:e.get(s,"parentElement.clientHeight",0)}),i.remove(s)}},backoff:[500,1e3,2500,5e3]})},E=function(i,n){var r=d+".checkMinWidth";try{var m=c.getLayerMinSizes(i.type).width,p=e.get(i,"scriptElement.parentElement"),u=C(p);if(n=Math.max(e.get(p,"clientWidth")||0,n+e.get(i,"data.DefaultSettings.MaxWidthCompensation",0)),m>n&&(u||!_(i))){if(S(i,n))return;"undefined"!=typeof i.data.DefaultSettings.LocationSelector?(o.errorM(r,"ICsmall, selector element too small. Width: "+n+", url: "+h.PageProperties.hostname),a.fire(a.Events.ELEMENT_FAILED,{elementId:i.elementId,loadStatus:s.LoadStatusTypes.SELECTOR_TOO_SMALL})):(o.errorM(r,"ICsmall, width too small for IC. Width: "+n+", url: "+h.PageProperties.hostname),t.setPageRequest(u?l.HIDDEN_IFRAME:l.DIV_TOO_SMALL,i.data.IsServerCall,{width:n,height:e.get(p,"parentElement.clientHeight",0)}))}else I(i)(i)}catch(b){t.setPageRequest(l.INITIALIZE_FAILED,i.data.IsServerCall),o.criticalM(r,"failed: initialize of IC was failed at "+r+". url: "+h.PageProperties.hostname,b)}},S=function(e,t){for(var r=0;r<c.inContentFallbackWidths.length;r++){var a=c.inContentFallbackWidths[r];if(t>=a)return o.info(n.PALE_YELLOW,"trying fallback width "+a),e.fallbackMinimalWidth=a,Cbola.Common.RequestHandler.getPageElements(e.widgetId,a).then(function(t){return T(e,t)}).catch(i.noOp),!0}return!1},T=function(t,i){var n=d+".fallbackLayerReset";if(t){Cbola.bootstrapper.initializeServices({detail:i}),t.data=i;try{t.type=t.iframeBuster.layerType=e.get(i,"DefaultSettings.Layouts[0].LayoutType"),t.itemType=e.get(i,"DefaultSettings.Layouts[0].ItemType")}catch(r){o.info("initialize InContent layer type error")}A(t)}else o.errorM(n,n+" failed to reset layer")},A=function(e){var n=d+".buildStructure";"undefined"==typeof e.data.DefaultSettings.LocationSelector&&t.setPageRequest(l.PAGE_VIEW,e.data.IsServerCall);try{Cbola.InContent.Layers.Factory.createLayerContainers(e),i.after(e.scriptElement,e.topContainer),e.topContainer.style["z-index"]=i.getZIndexForElement(),i.CbolaSendLogsTimes("end of "+n),k(e)}catch(r){o.criticalM(n,"failed: initialize of IC was failed at "+n+". url: "+h.PageProperties.hostname,r)}},k=function(e){i.CbolaSendLogsTimes("cbola_checkMaxElements");var t=e.activeId;0===c.MaxWidgets?(o.info("elementId: "+e.elementId+", fail because maxOfElements in page"),a.fire(a.Events.ELEMENT_FAILED,{elementId:e.elementId,loadStatus:s.LoadStatusTypes.MAX_ELEMS_REACHED})):(t<=c.MaxWidgets||0===t||c.currentElementsSum<c.MaxWidgets)&&(c.currentElementsSum++,L(e))},L=function(t){h.adsDisabled||N(t),Cbola.InContent.Layers.Factory.createAsync(t.type,function(i){t=e.extend(i,t),O(t)})},O=function(e){var t=d+".onLayerScriptFetched";e?(o.info(n.PALE_GREEN,"Finished uploading layer "+e.type+": "+i.getRunTimeInMilis()),m[e.elementId]=e,delete u[e.widgetId],p[e.widgetId]=e,e.setOptions(Cbola.InContent.Layers.Options.Factory.create(e)),r.markStart("layer "+e.type+" -> init"),e.init(),r.markEnd("layer "+e.type+" -> init"),r.markStart("layer "+e.type+" -> onBeforeLoad"),e.onBeforeLoad(),r.markEnd("layer "+e.type+" -> onBeforeLoad"),r.markStart("layer "+e.type+" -> onLoad"),e.onLoad(),r.markEnd("layer "+e.type+" -> onLoad")):o.errorM(t,t+" "+e.type+" has not known prototype")},P=function(e){N(e),e.attach?e.attach():e.view&&e.view.attach&&e.view.attach(e.container),a.fire(a.Events.LAYER_READY,e),e.onAfterLoad()},N=function(t){if(c.abTestId!==s.AbTests.NO_ADS){Cbola.Globals.AdsService.addSovrnBeacon(t.data.DefaultSettings);var i=new Cbola.Common.AdTriggersManager({elementId:t.elementId,widgetId:t.widgetId,layerType:t.type,footerBackground:e.get(t,"data.DefaultSettings.FooterFixedAdBackground")}),o=new Cbola.Common.Ads.Stores.Manager(t.elementId,t.widgetId,t.type);Cbola.Globals.AdsService.registerLayerManager(i,o,t.elementId),Cbola.Common.FontsManager.getRoboto()}},B=function(){a.addEventListener(a.Events.LAYER_READY,b)};return B.prototype.init=r.record(function(r){var c=d+".init";i.CbolaSendLogsTimes("cbola_initializeInContent->Start");var b=w(r.widgetId);if(null===b)return void o.info(n.PALE_RED,"script Wasn't Found for widget id:"+r.widgetId);h.widgetId=r.widgetId;var f="true"===i.dataset(b,"manualBuild");if(f&&i.datasetRemove(b,"status"),e.isNil(i.dataset(b,"status"))){i.dataset(b,"status","started");var g=isNaN(r.widgetId)?"0":r.widgetId,y=Cbola.Globals.ElementIdFactory.getGlobalElementId();i.dataset(b,"elementId",y);var C={type:e.get(r,"DefaultSettings.Layouts[0].LayoutType"),itemType:e.get(r,"DefaultSettings.Layouts[0].ItemType")};if(e.isNil(C.type)||e.isNil(C.itemType))return void o.errorM(c,"initialize InContent layer type error");if(!f&&e.get(r,"DefaultSettings.outsideIframe",!1)&&i.isFriendlyIframe())Cbola.Common.IframeBuster.pushScriptAboveIframe(g)||t.setPageRequest(l.INITIALIZE_FAILED,C.data.IsServerCall);else{if("undefined"!=typeof r.DefaultSettings.LocationSelector&&t.setPageRequest(l.PAGE_VIEW,r.IsServerCall),e.extend(C,{data:r,elementId:y,widgetId:g,activeId:i.dataset(b,"activeId"),element:null,hbToken:i.dataset(b,"modelsToken")}),m[y]||p[g])return void o.errorM(c,"A layer with the same element id  or same widget id already exists, this should not happen!");C.iframeBuster=new Cbola.Common.IframeBuster(r.DefaultSettings,g,C.type),C.iframeBuster.init(),m[y]=C,u[g]=C,C.scriptElement=b,i.fixPixelHeight(b),v(C).then(x,function(){o.info(n.PALE_RED,"findICSelectorElement was failed. elementId:"+y),a.fire(a.Events.ELEMENT_FAILED,{elementId:y,loadStatus:s.LoadStatusTypes.SELECTOR_NOT_FOUND})}).catch(function(e){t.setPageRequest(l.INITIALIZE_FAILED,C.data.IsServerCall),o.criticalM(c,"failed: initialize of IC was failed at "+c+". url: "+h.PageProperties.hostname,e)})}i.CbolaSendLogsTimes("cbola_initializeInContent->End")}},d+".init"),B.prototype.getLayerByElementId=function(e){return m[e]},B.prototype.getLayerByWidgetId=function(e){return p[e]},B.prototype.getActiveLayersCount=function(){var t=0;return e.isEmpty(p)?0:(e.forEach(p,function(e){(e.isAttached||e.view&&e.view.isAttached)&&(t+=1)}),t)},B.prototype.detachAllLayers=function(){var t=this;Cbola.taskManager.removeTask("checkForPendingScripts"),e.forEach(p,function(e,i){e.options.ResetOnReAttach=!0,t.detachLayerByWidgetId(i)}),Cbola.taskManager.addTask(Cbola.bootstrapper.checkForPendingScripts,[],Cbola.bootstrapper,"checkForPendingScripts")},B.prototype.detachLayerByWidgetId=function(t){Cbola.taskManager.removeTask("checkForPendingScripts");var o=p[t];o?(e.isNil(o.scriptElement)||(i.datasetRemove(o.scriptElement,"status"),i.datasetRemove(o.scriptElement,"queued")),Cbola.Globals.AdsService.unRegisterLayerManager(o.elementId),e.isFunction(o.detach)?o.detach():o.view&&e.isFunction(o.view.detach)&&o.view.detach(),e.get(o,"options.ResetOnReAttach",!1)&&delete p[t]):u.hasOwnProperty(t)&&delete u[t]},B.prototype.attachLayerByWidgetId=function(e){var t=this,r=p[e];if(r)if(r.isAttached||r.view&&r.view.isAttached)Cbola.Common.AnalyticsService.setPageElementRequest({layer:r,loadStatus:s.LoadStatusTypes.SAME_ID_WIDGETS}),o.info(n.PALE_RED,"There are scripts with the same widget id: "+e+" already attached.");else{var a=w(e);document.body.contains(r.topContainer)||i.after(r.topContainer,a),r.scriptElement=a,x(r)}else Cbola.bootstrapper.isExistingWidgetId(e)&&!u[e]?Cbola.Common.RequestHandler.getPageElements(e).then(function(e){Cbola.bootstrapper.initializeServices({detail:e}),t.init(e)}).catch(i.noOp):Cbola.bootstrapper.checkForPendingScripts()},new B}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.HasViewability=Cbola.Common.HasViewability||function(){var e=Cbola,t=e._,i=e.Utils,o=e.EventBus,n=e.Env,r=o.Events,a=Cbola.Enums.ItemViewTypes,s=Cbola.Logger.getInstance(),l=8,d=2e3,c=t.memoize(function(){for(var e=["","webkit","moz","ms"],t=0;t<e.length;t++){var i=e[t],o=""===i?"hidden":i+"Hidden";if(o in document)return{hidden:o,changeEventName:i+"visibilitychange"}}return null}),h=function(){};h.prototype.init=function(e){this.becameViewableAt=0,this.viewableDuration=0,this.viewable=!1,this.element=e,this.viewId=null,this.observer=null,this.viewableEvent=""+r.LAYER_IS_VIEWABLE+this.elementId},h.prototype.updateViewability=function(){m.isViewabilityTestable()?this.observer=new m(this.element,this.elementId):p.isViewabilityTestable()&&(this.observer=new p(this.element,this.elementId)),o.addEventListener(""+r.OBSERVER_VIEWABLE+this.elementId,this.onObserverViewable.bind(this)),o.addEventListener(""+r.OBSERVER_NON_VIEWABLE+this.elementId,this.onObserverNonViewable.bind(this)),this.observer&&this.observer.init()||(this.viewable=!0,this.onBecameViewable(a.IN_IFRAME))},h.prototype.onObserverViewable=function(){this.viewId=i.generateViewId(),this.viewable=!0,this.onBecameViewable(a.VIEWABILITY)},h.prototype.onObserverNonViewable=function(){this.viewId=i.generateViewId(),this.viewable=!1,this.onBecameUnviewable()},h.prototype.isViewable=function(){return this.viewable},h.prototype.getViewId=function(){return this.viewId},h.prototype.getViewDuration=function(){return this.viewable?i.getRunTimeInSecs()-this.becameViewableAt:this.viewableDuration},h.prototype.onBecameViewable=function(){s.info("element became viewable.",this),o.fire(this.viewableEvent),this.becameViewableAt=i.getRunTimeInSecs()},h.prototype.onBecameUnviewable=function(){s.info("element became unviewable.",this),this.viewableDuration=i.getRunTimeInSecs()-this.becameViewableAt};var m=function(){function e(t,i){_classCallCheck(this,e),this.observed=t,this.elemId=i,this.ignoreIntersectionChanges=!1,this.observedViewable=!1}return _createClass(e,null,[{key:"isViewabilityTestable",value:function(){return!t.isNil(window.IntersectionObserver)}}]),_createClass(e,[{key:"init",value:function(){var e=g.init().isVisible();return t.isNil(e)?!1:(this.observer=new IntersectionObserver(this.onObserverChange.bind(this),{root:null,rootMargin:"0px",threshold:.5}),this.observer.observe(this.observed),o.addEventListener(r.PAGE_VISIBILITY_CHANGE,this.onVisibilityChange.bind(this)),!0)}},{key:"onObserverChange",value:function(e){var t=this;if(!this.ignoreIntersectionChanges){var i=e.shift(),n=i.intersectionRatio>.5;clearTimeout(this.intersectionTestTimeout),n!==this.observedViewable&&(this.intersectionTestTimeout=setTimeout(function(){var e=n?r.OBSERVER_VIEWABLE:r.OBSERVER_NON_VIEWABLE;t.observedViewable=n,o.fire(""+e+t.elemId)},d))}}},{key:"onVisibilityChange",value:function(e){var t=this,i=e.detail;i?(this.ignoreIntersectionChanges=!1,this.testViewabilityOnReturn&&(this.intersectionTestTimeout=setTimeout(function(){t.observedViewable=!0,o.fire(""+r.OBSERVER_VIEWABLE+t.elemId)},d))):(clearTimeout(this.intersectionTestTimeout),this.ignoreIntersectionChanges=!0,this.observedViewable&&(this.testViewabilityOnReturn=!0,this.observedViewable=!1,o.fire(""+r.OBSERVER_NON_VIEWABLE+this.elemId)))}}]),e}(),p=function(){function e(i,o){_classCallCheck(this,e),this.observed=i,this.observedWindow=t.result(this.observed,"ownerDocument.defaultView"),this.observedViewable=!1,this.viewabilityTestCounter=0,this.outOfViewabilityTestCounter=0,this.elemId=o,this.observedWindow||(s.errorM("ElementViewabilityObserver.ctor","ElementViewabilityObserver.ctor failed to get default view from element"),window.document.contains(this.observed)?this.observedWindow=window:s.errorM("ElementViewabilityObserver.ctor","ElementViewabilityObserver.ctor failed to get default view from element"))}return _createClass(e,null,[{key:"isViewabilityTestable",value:function(){return!t.isNil(n.viewportWindow)}}]),_createClass(e,[{key:"init",value:function(){var e=b.init().isFocused();return t.isNil(e)?!1:(o.addEventListener(r.FOCUS_CHANGE,this.onFocusChange.bind(this)),e&&this.testViewability(),!0)}},{key:"onFocusChange",value:function(e){var t=e.detail;t?this.testViewability():this.stopViewabilityTesting()}},{key:"testViewability",value:function(){this.isElementInViewport()?(this.viewabilityTestCounter=this.viewabilityTestCounter<l?this.viewabilityTestCounter+1:l,this.outOfViewabilityTestCounter=0):(this.viewabilityTestCounter=0,this.outOfViewabilityTestCounter=this.outOfViewabilityTestCounter<l?this.outOfViewabilityTestCounter+1:l);var e=null;this.observedViewable||this.viewabilityTestCounter!==l?this.observedViewable&&this.outOfViewabilityTestCounter===l&&(e=r.OBSERVER_NON_VIEWABLE):e=r.OBSERVER_VIEWABLE,e&&(this.observedViewable=!this.observedViewable,o.fire(""+e+this.elemId)),this.nextViewabilityTesting=setTimeout(this.testViewability.bind(this),d/l)}},{key:"stopViewabilityTesting",value:function(){clearTimeout(this.nextViewabilityTesting),this.viewabilityTestCounter=0,this.outOfViewabilityTestCounter=0,this.observedViewable&&(this.observedViewable=!1,o.fire(""+r.OBSERVER_NON_VIEWABLE+this.elemId))}},{key:"isElementInViewport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.observed.getBoundingClientRect().height,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.observed,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.observedWindow,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!o||t.isNil(o.offsetParent)||!r||"hidden"===r.getComputedStyle(o).visibility)return!1;try{var s=r.scrollY||r.pageYOffset,l=i.cumulativeOffset(o).top+a,d=l+e/2>=s&&s+r.innerHeight>l+e/2;return d&&r!==n.viewportWindow?this.isElementInViewport(e,r.frameElement,r.parent,l-s):d}catch(c){return!1}}}]),e}(),u=function(){this.focused=null,this.isInitialized=!1};u.prototype={init:function(){if(!this.isInitialized&&this.addFocusEvents()){var e=c()||{},t=e.hidden;this.focused=!document[t]&&n.viewportWindow.document.hasFocus(),this.isInitialized=!0}return this},isFocused:function(){return this.focused},addFocusEvents:function(){var e=this,t=c()||{},i=t.hidden,o=t.changeEventName;if(document.hasFocus&&i){var r="onfocusin"in window?"focusin":"focus",a="onfocusout"in window?"focusout":"blur",s=n.viewportWindow,l=function(t){t.type===r?setTimeout(function(){return e.updateFocus(!document[i]&&s.document.hasFocus())},300):e.updateFocus(!document[i]&&s.document.hasFocus())};try{return s.addEventListener(r,l),s.addEventListener(a,l),document.addEventListener(o,l),!0}catch(d){}}return!1},updateFocus:function(e){e!==this.focused&&(this.focused=e,o.fire(r.FOCUS_CHANGE,e))}};var b=new u,f=function(){this.visible=null,this.isInitialized=!1};f.prototype={init:function(){if(!this.isInitialized&&this.addVisibilityEvents()){var e=c()||{},t=e.hidden;this.visible=!document[t],this.isInitialized=!0}return this},addVisibilityEvents:function(){var e=this,t=c()||{},i=t.hidden,o=t.changeEventName;if(i)try{return document.addEventListener(o,function(){return e.updateVisibility(!document[i])}),!0}catch(n){}return!1},updateVisibility:function(e){e!==this.visible&&(this.visible=e,o.fire(r.PAGE_VISIBILITY_CHANGE,e))},isVisible:function(){return this.visible}};var g=new f;return h}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Types={FACTS:[100,101,102,110,130,131,132,133,136,138,152,1e3],TRIVIA:[120,121,140,1400],ON_THIS_DAY:[110,135,137,139,153,1100],TWITTER:[160],DIED_ON_THIS_DAY:[134,150],DIED_ON_THIS_WEEK:[151],SIDEBAR:Cbola.Config.layouts.sideBars.all,SIDEBAR_SLIDESHOW:Cbola.Config.layouts.sideBars.sidebarSlideshow,PLAYBOX_SLIDESHOW:Cbola.Config.layouts.sideBars.slideShow,STORIES_SLIDESHOW:Cbola.Config.layouts.sideBars.storiesSlideshow,IN_CONTENT:Cbola.Config.layouts.inContent.all},Cbola.InContent.Layers.FormFactors={MOBILE:"mobile",TABLET:"tablet",DESKTOP:"desktop"},Cbola.InContent.Layers.Base=Cbola.InContent.Layers.Base||function(){var e=Cbola._,t=Cbola.Logger.getInstance(),i=Cbola.InContent.Layers.Types,o=function(){t.debug("Layers.Base::ctor"),this.formFactor=Cbola.InContent.Layers.FormFactors.DESKTOP};return e.extend(o.prototype,Cbola.Common.HasViewability.prototype),o.prototype.init=function(){var e=Cbola.Common.HasViewability.prototype;t.debug("Layers.Base::init"),e.init.call(this,this.container)},o.prototype.setOptions=function(e){t.debug("Layers.Base::setOptions"),this.options=e||{}},o.prototype.applyOptions=function(){t.debug("Layers.Base::applyOptions"),e.assign(this.container.style,{"margin-top":this.options.MarginTopCover+"px","margin-bottom":this.options.MarginBottomCover+"px","padding-bottom":this.options.PaddingBottomCover+"px"})},o.prototype.onBeforeLoad=function(){t.debug("Layers.Base::onBeforeLoad")},o.prototype.onLoad=function(){t.debug("Layers.Base::onLoad")},o.prototype.onAfterLoad=function(){t.debug("Layers.Base::onAfterLoad",this),Cbola.taskManager.addTask(this.updateViewability,[],this)},o.prototype.bindEvents=function(){t.debug("Layers.Base::bindEvents")},o.prototype.unbindEvents=function(){t.debug("Layers.Base::bindEvents")},o.prototype.destroy=function(){t.debug("Layers.Base::destroy"),this.unbindEvents()},o.prototype.isMobile=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.MOBILE},o.prototype.isTablet=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.TABLET},o.prototype.isDesktop=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.DESKTOP},o.prototype.isSidebar=function(){var e=this;return i.SIDEBAR.some(function(t){return t===e.type})},o.prototype.isSidebarSlideshow=function(){var e=this;return i.SIDEBAR_SLIDESHOW.some(function(t){return t===e.type})},o.prototype.isStoriesSlideshow=function(){var e=this;return i.STORIES_SLIDESHOW.some(function(t){return t===e.type})},o.prototype.isPlaybox=function(){var e=this;return i.PLAYBOX_SLIDESHOW.some(function(t){return t===e.type})},o.prototype.isInContent=function(){var e=this;return i.IN_CONTENT.some(function(t){return t===e.type})},o.prototype.isFacts=function(){var e=this;return i.FACTS.some(function(t){return t===e.type})},o.prototype.isTrivia=function(){var e=this;return i.TRIVIA.some(function(t){return t===e.type})},o.prototype.isOnThisDay=function(){var e=this;return i.ON_THIS_DAY.some(function(t){return t===e.type})},o.prototype.isTwitter=function(){var e=this;return i.TWITTER.some(function(t){return t===e.type})},o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Factory={},Cbola.InContent.Layers.Factory=function(){var e=Cbola.InContent.Layers,t=Cbola.Common.RequestHandler,i=Cbola.Common.TimelineService,o=Cbola.Logger.getInstance(),n=Cbola._,r=Cbola.Utils,a=function(){};return a.prototype.create=function(t){o.info("Layers.Factory.create -> creating layer ",t);var i=e.TYPES_TO_NAMES_MAP[t];return n.isEmpty(i)?(o.info("LayersFactory.create","No layer prototype found for layer "+t),null):new e[i]},a.prototype.shouldFetch=function(t){var i=e.TYPES_TO_NAMES_MAP[t];return n.isNil(e[i])},a.prototype.createAsync=function(e,o){var n=this,a=Cbola.Env;if(i.markStart("Layers.Factory -> creating layer "+e),this.shouldFetch(e))if(a.DEBUG){var s=document.createElement("script");s.onload=function(){o&&o(this.create(e))}.bind(this);var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(s,l),s.src=a.clientPath+"container/layer_"+e+"/cbola_layer_"+e+"."+a.clientPathType+"js"}else t.getLayerScript(e).then(function(){i.markEnd("Layers.Factory -> creating layer "+e),o&&o(n.create(e))}).catch(r.noOp);else i.markEnd("Layers.Factory -> creating layer "+e),o&&o(this.create(e))},a.prototype.createLayerContainers=function(e){var t="";switch(e.type){case 100:case 101:case 110:Cbola.Env.DEBUG&&(e.data.DefaultSettings.FramedLayer=!0),t="desktop_container.html",Cbola.Utils.checkImageLoaded(e.data.Image);break;case 102:case 112:t=(n.result(e,"data.DefaultSettings.FramedLayer")?"framed_":"")+"desktop_container.html",Cbola.Utils.checkImageLoaded(e.data.Image);break;case 120:case 121:t="desktop_trivia_container.html";break;case 130:case 131:case 132:case 133:case 134:case 135:case 136:case 137:case 138:case 139:case 140:case 150:case 151:case 152:case 153:t="sidebar_container.html";break;case 160:t="desktop_container.html";break;case 1e3:case 1100:case 1400:t="mobile_container.html";break;default:throw o.errorM("Layers.Factory.createLayerContainers","Layers.Factory->createLayerContainers failed to build container due to unknown layer type: "+e.type),new Error("Unknown layer type")}e.topContainer=Cbola.Templates.createElement(t),e.container=e.topContainer.querySelector(".in-content-container-coverage"),160===e.type&&(e.container.style["max-width"]=null),e.topContainer.setAttribute("layerType",e.type.toString()),e.topContainer.classList.add("cbola-wid-"+e.widgetId),e.topContainer.classList.add("cbola-elem-id-"+e.elementId),Cbola.Utils.isFirefox?e.topContainer.classList.add("cbola-ua-ff"):Cbola.Utils.isIE&&e.topContainer.classList.add("cbola-ua-ie")},new a}(),Cbola.InContent.Layers.TYPES_TO_NAMES_MAP={100:"DesktopInContentSliderFactsLayer",101:"DesktopInContentSliderReadMoreLayer",102:"DesktopFactsCoverLayer",110:"DesktopInContentSliderOnThisDayLayer",112:"DesktopOnThisDayCoverLayer",120:"DesktopTriviaLayer",121:"DesktopTriviaMultiLayer",130:"SidebarFactsLayer",131:"SidebarFactsReadMoreLayer",132:"SidebarFactsWithSliderLayer",133:"SponsoredSidebarFactsLayer",134:"SidebarDiedOnThisDayLayer",135:"SidebarOnThisDayLayer",136:"SidebarSlideshowFactsLayer",137:"SidebarSlideshowOnThisDayLayer",138:"StoriesSlideshowFacts",139:"StoriesSlideshowOTD",140:"SidebarTriviaLayer",150:"SlideshowDiedOnThisDayLayer",151:"SlideshowDiedOnThisWeekLayer",152:"SlideshowFactsLayer",153:"SlideshowOnThisDayLayer",160:"DesktopTwitterLayer",1e3:"MobileFactsLayer",1100:"MobileOnThisDayLayer",1400:"MobileTriviaLayer"},window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopFactsOptions=function(){var e=Cbola._,t={InContentTitleBGColor:null,WidgetTitleFontColor:null,InContentTitleFontColor:null,RemoveInContentHeader:null,InContentTimerBackgroundColor1:"rgb(178,42,80)",InContentTimerBackgroundColor2:"rgb(167,38,76)",FramedLayer:!1,InContentAlignment:null},i=function(i,o){Cbola.InContent.Layers.Options.OptionsBase.call(this,i,o),e.defaults(this,t)};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopTriviaMultiOptions=function(){var e=Cbola._,t={DesktopMultiTriviaBorderColor:null,DesktopMultiTriviaDisplayAnswerLetters:!0,DesktopMultiTriviaAdvertisementTitle:!1,MaxInContentTriviaWidth:640,DesktopMultiTriviaInGameTimerDuration:15,DesktopMultiTriviaEndGameTimerDuration:15,DesktopMultiTriviaEndGameImg:null,DesktopMultiTriviaEndGameLink:null,DesktopMultiTriviaBackgroundColor:null,DesktopMultiTriviaFontColor:null,MultiTriviaProgressFontColor:null},i=function(i,o){Cbola.InContent.Layers.Options.TriviaOptions.call(this,i,o),e.defaults(this,t),e.isNil(this.MultiTriviaProgressFontColor)&&(this.MultiTriviaProgressFontColor=this.InContentThemeColor),("undefined"==typeof this.DesktopInContentMinWidth||null===this.DesktopInContentMinWidth)&&(this.DesktopInContentMinWidth=480),
Cbola.Env.DEBUG};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopTriviaOptions=function(){var e=Cbola._,t={showTriviaButtonIcons:!0,TriviaColorSkin:null,inContentTriviaFloatType:null,MaxInContentTriviaWidth:650},i=function(i,o){Cbola.InContent.Layers.Options.TriviaOptions.call(this,i,o),e.defaults(this,t),"false"==this.showTriviaButtonIcons&&(this.showTriviaButtonIcons=!1),("undefined"==typeof this.DesktopInContentMinWidth||null===this.DesktopInContentMinWidth)&&(this.DesktopInContentMinWidth=500)};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileFactsOptions=function(){var e=Cbola._,t={mobileTitleImage:null,mobileTitleFontSize:null,mobileThemeColor:"#f36463",mobileAutoplayDuration:4},i=function(i,o){Cbola.InContent.Layers.Options.MobileOptions.call(this,i,o),e.defaults(this,t)};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileOptions=function(){var e=Cbola._,t={MobileFontSize:null,MobileClippedHeight:0,MobilePaddingBottomCover:null,mobileThemeColor:"rgb(243,100,99)",mobileTitleFontSize:null,mobileFullScreen:{mode:"portrait",outsideIframe:!1},MobileInContentColorSkin:null,mobileTranslateZ:null,mobileCompressedHeight:!0,mobileShareEnabled:!0,BrandImg:null,BrandRedirect:null,mobileItemCount:null,mobileResizeCount:4},i=function(i,o){Cbola.InContent.Layers.Options.OptionsBase.call(this,i,o),e.defaults(this,t),this.mobileShareEnabled=Cbola.Utils.parseBool(this.mobileShareEnabled),this.mobileItemCount&&(this.mobileItemCount=parseInt(this.mobileItemCount))};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileTriviaOptions=function(){var e=Cbola._,t={MobileTriviaColorSkin:null,mobileThemeColor:"#19C2CC"},i=function(i,o){Cbola.InContent.Layers.Options.TriviaOptions.call(this,i,o),e.defaults(this,t),Cbola.InContent.Layers.Options.MobileOptions.call(this,i,o)};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.OptionsBase=function(){var e=Cbola._,t={MarginTopCover:0,MarginBottomCover:0,PaddingBottomCover:0,ShowAdAnimation:!0,DesktopInContentMinWidth:null,ResetOnReAttach:!1,SidebarTopContainerTextAlign:null,RemovePoweredByCarambola:!1,ShowAdvertisementTitleOnAds:!1},i=function(i,o){e.extend(this,i.DefaultSettings),e.defaults(this,t),(0===this.ShowAdAnimation||"false"===this.ShowAdAnimation)&&(this.ShowAdAnimation=!1),this.themeColor=e.get(i,"DefaultSettings.InContentThemeColor",null)||e.get(i,"DefaultSettings.ThemeColor","rgb(62,209,217)");var n=Cbola.Config.getLayersDefaultSize(o),r=n.height,a=n.width;this.layerHeight=r,this.layerWidth=a};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.Factory=function(){function e(e){if(i.isNil(e))return e;var o=t.getUrlParams();for(var n in e)e.hasOwnProperty(n)&&!i.isNil(o["cbola"+i.toLower(n)])&&(e[n]=o["cbola"+i.toLower(n)]);return e}var t=Cbola.Utils,i=Cbola._,o=function(){};return o.prototype.create=function(t){var i=Cbola.InContent.Layers.Options,o=null;switch(t.type){case 100:case 101:case 102:case 110:case 112:o=new i.DesktopFactsOptions(t.data,t.type);break;case 120:o=new i.DesktopTriviaOptions(t.data,t.type);break;case 121:o=new i.DesktopTriviaMultiOptions(t.data,t.type);break;case 130:case 131:case 132:case 133:case 134:o=new i.OptionsBase(t.data,t.type);break;case 135:o=new i.SidebarDiedOnOptions(t.data,t.type);break;case 136:case 137:o=new i.SlideshowOptions(t.data,t.type);break;case 138:case 139:o=new i.StoriesSlideshow(t.data,t.type);break;case 140:o=new i.SidebarTriviaOptions(t.data,t.type);break;case 150:case 151:case 152:case 153:o=new i.SlideshowOptions(t.data,t.type);break;case 160:o=new i.TwitterOptions(t.data,t.type);break;case 1e3:case 1100:o=new i.MobileFactsOptions(t.data,t.type);break;case 1400:o=new i.MobileTriviaOptions(t.data,t.type);break;default:Cbola.Logger.getInstance().warnM("OptionsFactory.create","No options prototype found for layer "+t.type),o=null}return o=e(o)},new o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SidebarDiedOnOptions=function(){var e=Cbola._,t={InContentTitleBGColor:null,InContentTitleFontColor:null},i=function(i,o){Cbola.InContent.Layers.Options.OptionsBase.call(this,i,o),e.defaults(this,t)};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SidebarTriviaOptions=function(){var e=Cbola._,t={SbTriviaEndGameImgBottom:null,SbTriviaEndGameImgTop:null,SbTriviaScoreTextColor:null,SbTriviaEndGameImgLink:null,BrandClickTracker:null,SbTriviaEndGameClickTracker:null,SBTriviaPaddingBottomCover:25},i=function(i,o){Cbola.InContent.Layers.Options.TriviaOptions.call(this,i,o),e.defaults(this,t)};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SlideshowOptions=function(){var e=Cbola._,t=Cbola.Utils,i={ArrowTeaser:1,SlideshowAutoplayDuration:4,SideboxStyleGuide:null,SideboxShareEnable:!0,PlayboxBrandImg:null,PlayboxBrandRedirect:null,PlayboxTextualHeader:null,PlayboxReutersStyleGuide:null},o=function o(n,r){Cbola.InContent.Layers.Options.OptionsBase.call(this,n,r),e.defaults(this,i),t.isMobile&&(this.themeColor=e.result(n,"DefaultSettings.InContentThemeColor",e.result(n,"DefaultSettings.ThemeColor",e.result(n,"DefaultSettings.mobileThemeColor","rgb(62,209,217)")))),this.ArrowTeaser=t.parseBool(this.ArrowTeaser),this.PlayboxReutersStyleGuide===o.ReutersStyleGuides.EXTENDED&&152===r&&(this.layerHeight=280)};return o.ReutersStyleGuides={BASIC:1,HIDDEN_BUTTONS:2,EXTENDED:3},o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.StoriesSlideshow=function(){var e,t,i=Cbola,o=i._,n=i.Utils,r=Cbola.InContent.Layers.Options.OptionsBase,a={SHARP:1,SHARP_LEFT:2,ROUND:3},s={SlideshowAutoplayDuration:10,StoriesSlideshowStyleGuide:a.ROUND,StoriesSlideshowBackgroundColor:"transparent",LayerExposureOnAdsReady:!0};return t=e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return o.defaults(r,s),n.isMobile&&(r.themeColor=o.get(e,"DefaultSettings.InContentThemeColor",o.get(e,"DefaultSettings.ThemeColor",o.get(e,"DefaultSettings.mobileThemeColor","rgb(62,209,217)")))),r}return _inherits(t,e),t}(r),e.StyleGuides=a,t}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.TriviaOptions=function(){var e=Cbola._,t={HideSocialButtons:!1,BrandImg:null,BrandRedirect:null,DesktopTriviaTimerDuration:10,DesktopTriviaTimerDisabled:!1,InContentThemeColor:"rgb(62, 209, 217)",InContentThemeHoverColor:"rgb(56, 185, 193)"},i=function(i,o){Cbola.InContent.Layers.Options.OptionsBase.call(this,i,o),e.defaults(this,t),this.InContentThemeColor=this.InContentThemeColor||e.result(i,"DefaultSettings.ThemeColor",null)};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.TwitterOptions=function(){var e=Cbola._,t={SlideshowAutoplayDuration:5,TwitterColorSkin:null,TwitterBgColor:null,InContentAlignment:null},i=function(i,o){Cbola.InContent.Layers.Options.OptionsBase.call(this,i,o),e.defaults(this,t)};return i}();var cbolaStartDateFileUploaded=new Date;window.Cbola=window.Cbola||{},window.Cbola.Bootstrapper=window.Cbola.Bootstrapper||function(){var e=Cbola.Utils,t=Cbola.Logger.getInstance(),i=Cbola.Config,o=Cbola._,n=Cbola.Env||{},r=Cbola.EventBus,a=Cbola.Enums,s=Cbola.InContent.Manager,l=Cbola.Common.AnalyticsService,d=Cbola.Common.TimelineService,c=Cbola.Common.LocalStorageService,h=function e(t){"beforeunload"===t.type&&window.removeEventListener("unload",e);try{o.result(window.top,"Cbola.Globals.ReportersManager.isPrimary",!1)&&(window.top.Cbola.Globals.ReportersManager.stopReporting(),delete window.top.Cbola.Globals.ReportersManager)}catch(t){}l.setPageClose()},m=function(){var i=e.getUrlParams()["cboladebug"];i||(i=e.getParamsFromUrl(n.proxyElem.getAttribute("src"))["cbola_d"],i||(i=!1)),i=i&&"0"!==i?"1":c.getItem("cbolaDebug")||"0",Cbola.Env.DEBUG=1===parseInt(i),Cbola.Env.DEBUG&&(t.level=Cbola.Logger.Levels.TRACE)},p=function(){var i=e.getParamsFromUrl(n.proxyElem.getAttribute("src")),o=e.getUrlParams();switch(n.queryServer=o["queryserver"]||i["queryserver"]||"0",n.activePid=o["cbolapid"]||i["pid"],n.wid=o["wid"]||i["wid"],n.clientPath=o["clientpath"]||i["clientpath"]||"0",n.domainId=parseInt(i["did"])||0,n.angularProxy=!!i["cbolang"]||!1,n.adsDisabled=o["cbolanoads"]||!1,n.widgetLoadAlert=o["cbolaalert"]||!1,n.categoryId=i["categoryid"]||"",n.tags=i["tags"]||"",n.title=i["title"]||"",n.body=i["body"]||"",n.url=i["pageurl"]||"",n.hbToken=i["hb_token"]||void 0,n.proxyPageViewId=i["pvid"]||void 0,n.clientPathType="min.",n.clientPath){case"1":case"31":n.clientPath="//qa1.carambo.la/inimage/versions/";break;case"2":n.clientPath="//cdata.carambo.la/Layer/InImage/QA/cbola_platform/version_"+n.clientVersion+"/";break;case"3":n.clientPathType="",n.clientPath="//10.0.0.17/platform/";break;case"5":n.clientPathType="",n.clientPath="//localhost:9000/platform/";break;case"6":case"36":n.clientPathType="",n.clientPath="//localhost:9000/platform/";break;case"7":n.clientPathType="",n.clientPath="//qa1.carambo.la/inimage/versions/";break;case"12":case"11":n.clientPathType="",n.clientPath="//qa1.carambo.la/inimage/mobile/";break;case"100":n.clientPath="//qa1.carambo.la/inimage/margeversions/";break;case"110":n.clientPath="//localhost:9000/";break;case"120":n.clientPath="//10.0.0.170:9000/";break;default:n.clientPath="//cdata.carambo.la/Layer/InImage/Prod/cbola_platform/version_"+n.clientVersion+"/"}n.protocol=/^https?.*/g.test(window.location.protocol)===!1?"https:":"",n.clientPath=""+n.protocol+n.clientPath,n.IntegrationType=e.integrationTypeCheck(),n.topWindow=e.isWindowTopSupported()?window.top:window,n.viewportWindow=e.isWindowTopSupported()||!e.isInIframe()?window.top:null,t.info("Working Path:"+n.clientPath+", QueryServer:"+n.queryServer+", ClientVer: "+n.clientVersion+", Pid: "+n.activePid)},u=function(e){try{var i={};"undefined"!=typeof e&&(i.filename=e.filename||"",i.lineno=e.lineno||"",i.colno=e.colno||"",i.message=e.message||"",i.type=e.type||"",i.filename.toLowerCase().indexOf("carambo.la")>-1&&(t.info("ER of cbola was found"),l.setClientError(i)))}catch(o){}},b=function(e){var i=e.detail;t.info("Element fail: "+i.elementId+" \n",i);try{l.setPageElementRequest({elementId:i.elementId,loadStatus:i.loadStatus});var o=Cbola.InContent.Manager.getLayerByElementId(i.elementId);o&&o.parentNode&&o.parentNode.removeChild(o)}catch(n){}},f=d.record(function(e){if(n.PageProperties.noShowLayer)l.setPageRequest(a.PageRequestTypes.NO_SHOW_META,e.IsServerCall),t.info("noShowLayer");else{e.DefaultSettings=e.DefaultSettings||{},i.MaxWidgets=e.DefaultSettings.MaxWidgets||9999,i.ZIndexLayer=e.DefaultSettings.ZIndexLayer||999999999;var r=o.get(e,"DefaultSettings.unitLoadTracking",null);if(r){var s=document.getElementsByTagName("body")[0],d=document.createElement("div");d.innerHTML=r,s&&s.insertBefore(d,s.children[0])}Cbola.Globals.AdsService.onlyOneRegistration=o.get(e,"DefaultSettings.AllowSingleAdServiceRegistration",!1),Cbola.Common.ConsentProviders.Manager.init({gfc:o.get(e,"DefaultSettings.EnableGFC",!1)}),v(e)}},"Bootstrapper._initOnFirstGetElements"),g=function(){var e=n.proxyElem.getAttribute("mt"),t=n.proxyElem.getAttribute("mediatype"),i=n.proxyElem.getAttribute("cbola");return"ic"===e||"InContent"===t||"ic"===i?a.ProductTypes.IN_CONTENT:null},y=function(e){var t=e.getAttribute("srcurl");return o.isEmpty(t)?null:decodeURIComponent(t)},w=function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0;o.isEmpty(i)?o.isNil(n.PageProperties.cbola_pageViewId)&&(o.isNil(n.topWindow.cbola_pageViewId)&&(n.topWindow.cbola_pageViewId=e.generateDoubleRandomViewID()),n.PageProperties.cbola_pageViewId=n.topWindow.cbola_pageViewId):(n.PageProperties.cbola_pageViewId=i,!o.isNil(n.topWindow.cbola_pageViewId)&&n.topWindow.cbola_pageViewId!==i&&r&&t.alwaysSendM("Bootstrapper._setPageViewId","Bootstrapper._setPageViewId overridden existing page view id ("+n.topWindow.cbola_pageViewId+") with header bidding page view id ("+i+")"))},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Cbola.PageAnalytics.ReportersManager.isPrimary()){var t=o.get(e,"DefaultSettings.ActivePageReporters",null);Cbola.PageAnalytics.ReportersManager.init(t?t+",pageLoad":"pageLoad",o.result(e,"widgetId",0))}},C=function(){Cbola.Env=n||{},o.defaults(Cbola.Env,{PageProperties:{optOutCookie:!1,IsServerCall:a.isServerCallTypes.FROM_CDN,PageStatus:0,unloadAlreadyDetected:!1,startTime:new Date,clientIP:""}}),this.firstLoad=!0,this.deferredLayerScriptTags=[],this.widgetIdArray=[]};return C.prototype.init=d.record(function(){if(n.proxyElem=document.getElementById(i.proxyId),!n.proxyElem)return void t.info(Cbola.Logger.Colors.PALE_RED,"CbolaScriptIsMissing");if(n.proxyElem.getAttribute("status")&&0===document.querySelectorAll(".cbolaExtension").length)return void t.info(Cbola.Logger.Colors.PALE_RED,"CbolaScriptAgain");n.proxyElem.setAttribute("status","started"),n.clientVersion="2.21.9",n.proxyId=i.proxyId,n.userId=0,m(),p(),i.init(),w(n.proxyPageViewId);var r="first log. pid: "+n.activePid+", did: "+n.domainId+", wid: "+(o.isEmpty(n.wid)?"0":n.wid)+" , abTestId: "+i.abTestId+", pageViewId: "+n.PageProperties.cbola_pageViewId+", randomLogId: "+Math.floor(899*Math.random()+100)+", ClientVersion: "+n.clientVersion;t.alwaysSendM("Bootstrapper.init",r),t.enableServer();var s=n.PageProperties;if(s.startDateFileUploaded=cbolaStartDateFileUploaded,s.checkInContentLocation=e.checkUrlParamExist("icshow"),s.activeDomain=document.domain,t.info("Domain: "+document.domain),s.originalPathNameHost=e.getLocationHref(),o.isArray(i.srcUrlEnabledDids)&&i.srcUrlEnabledDids.some(function(e){return e===n.domainId})&&(s.SrcUrl=e.getLocationHref()),s.hostname=e.queryStringCutRegex(),s.noShowLayer=e.checkNoShowLayer(),s.secondGlobal=e.setGlobalRedirectTime(),!o.isEmpty(n.url)&&!/^([[{])/g.test(n.url)){var l="";o.forEach({CategoryId:n.categoryId,Tags:n.tags,Title:n.title,Body:n.body},function(e,t){o.isEmpty(l)||(l+="&"),o.isEmpty(e)||(l+=t+"="+e)}),s.hostname=(""+decodeURIComponent(n.url)+(o.isEmpty(l)?"":"?"+l)).toLowerCase()}return s.isMobile=e.isMobile,s.isTablet=e.isTablet(),e.detectDeviceOrientation(),s.urlHashMD5=CryptoJSCbola.MD5(s.hostname).toString(),s.urlHashSHA1=CryptoJSCbola.SHA1(s.hostname).toString(),t.info("hostname: "+s.hostname),t.info("MD5 hash: "+s.urlHashMD5+" SHA1 hash: "+s.urlHashSHA1+" pid: "+n.activePid),i.abTestId===a.AbTests.NO_LAYER?void v():(this.bindEvents(),e.CbolaSendLogsTimes("initialize->end"),void this.checkForPendingScripts())},"Bootstrapper.init"),C.prototype.checkForPendingScripts=function(){var r=this,s=o.filter(document.querySelectorAll("."+i.inContentClass),function(e){return"script"===e.tagName.toLowerCase()});return 0!==s.length||n.angularProxy||(s=document.querySelectorAll("."+i.placeholderClass),0!==s.length)?(s=o.filter(s,function(t){return null===e.dataset(t,"queued")}),o.forEach(s,function(t){e.dataset(t,"queued",!0),r.deferredLayerScriptTags.push(t)}),this.deferredLayerScriptTags.length>0&&this.loadLayerFromScript(a.ProductTypes.IN_CONTENT),void((e.getRunTimeInSecs()<i.checkPendingICscriptsTimeLength||o.get(Cbola.Env,"PageProperties.CheckForPathChange",!1))&&Cbola.taskManager.addTask(this.checkForPendingScripts,[],this,"checkForPendingScripts"))):(l.setPageRequest(a.PageRequestTypes.NO_PLACEHOLDER_FOUND,a.isServerCallTypes.FROM_CDN),void t.info(Cbola.Logger.Colors.PALE_RED,"No placeholder found in page - terminating load process"))},C.prototype.loadLayerFromScript=d.record(function(i){var r=this,d=a.ProductTypes;if(i===d.IN_IMAGE_PENDING)i=d.IN_IMAGE;else{var c=g();c&&(i=c)}if(0!==this.deferredLayerScriptTags.length&&i===d.IN_CONTENT)for(;this.deferredLayerScriptTags.length>0;){var h=this.deferredLayerScriptTags.shift(),m=parseInt(h.getAttribute("cbola_wid"));if(m||(m=0,h.setAttribute("cbola_wid","0")),this.isExistingWidgetId(m))this.firstLoad?(l.setPageElementRequest({layer:{widgetId:m},loadStatus:a.LoadStatusTypes.SAME_ID_WIDGETS}),t.info(Cbola.Logger.Colors.PALE_RED,"There are scripts with the same wid: "+m)):s.attachLayerByWidgetId(m);else{this.widgetIdArray.push(m),o.isEmpty(n.PageProperties.SrcUrl)&&(n.PageProperties.SrcUrl=y(h));var p=e.dataset("modelsPvid");p&&w(p),Cbola.Common.RequestHandler.getPageElements(m).then(function(e){r.initializeServices({detail:e}),r.onPageElementsRecieved(e)}).catch(e.noOp)}}},"Bootstrapper.loadLayerFromScript"),C.prototype.isExistingWidgetId=function(e){return this.widgetIdArray.some(function(t){return t===e})},C.prototype.bindEvents=function(){r.addEventListener(r.Events.PAGE_ELEMENTS_DATA_RECEIVED,this.initializeServices.bind(this)),r.addEventListener(r.Events.ELEMENT_FAILED,b),window.addEventListener("error",u),window.addEventListener("beforeunload",h),window.addEventListener("unload",h)},C.prototype.initializeServices=d.record(function(t){var i=t.detail,r=Cbola.InContent.Layers.Services.FactsService,a=Cbola.InContent.Layers.Services.OnThisDayService,s=Cbola.InContent.Layers.Services.DiedThisDayService,l=Cbola.InContent.Layers.Services.DiedThisWeekService,d=Cbola.InContent.Layers.Services.TriviaService,c=Cbola.InContent.Layers.Services.TweetsService,h=Cbola.Common.UserService,m=Cbola.InContent.Layers.Item.Types;if(i){i.Language&&h.setLanguage(i.Language),i.Items&&o.get(i,"DefaultSettings.OTDIgnoreClientDate")&&a.setIgnoreClientDate(!0,i.Items[0]);var p=o.get(i,"DailyItemsCount");if(p&&(a.setTotalItemsForToday(p),s.setTotalItemsForToday(p),l.setTotalItemsForThisWeek(p)),i.Items){var u=i.widgetId;i.Items=o.map(i.Items,function(e){return new Cbola.InContent.Layers.Item(e)});for(var b=0;b<i.Items.length;b++){var f=i.Items[b];f.Type===m.FACT||f.Type===m.TIP?r.addItem(f,u):f.Type===m.ON_THIS_DAY?a.addItem(f,u):f.Type===m.DIED_THIS_DAY?(s.addItem(f,u),l.addItem(f)):f.Type===m.TRIVIA||f.Type===m.TRIVIA_MULTI||f.Type===m.TRIVIA_MULTI_PAIRS?d.addItem(f):f.Type===m.TWEET&&c.addItem(f,u)}}var g=e.getParamsFromUrl(n.PageProperties.originalPathNameHost.toLowerCase())["cbolagameset"];d.setFirstItemId(g)}},"Bootstrapper.initializeServices"),C.prototype.onPageElementsRecieved=d.record(function(){var r=this,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.info(Cbola.Logger.Colors.PALE_GREEN,"End GPE: "+e.getRunTimeInMilis()),n.IntegrationType===Cbola.Enums.IntegrationTypes.SAFE_FRAME&&!o.get(d,"DefaultSettings.EnableLoadOnKnownSafeFrame",!1))return l.setPageRequest(a.PageRequestTypes.BLOCKED_KNOWN_SAFE_FRAME,d.IsServerCall),void t.info(Cbola.Logger.Colors.RED,"Bootstrapper.onPageElementsRecieved stopped due to blocking known safe frame.");var c=a.UnitLoadTypes,h=function(){n.icManager=n.icManager||Cbola.InContent.Manager,r.firstLoad&&(r.firstLoad=!1,r._initPlatform(d)),s.init(d)};switch(i.LoadType=e.getUrlParams()["cbolaloadtype"]||(i.abTestId===a.AbTests.LAYER_ON_PAGE_LOAD?c.PAGE_LOAD:o.result(d,"DefaultSettings.LoadType",i.LoadType))||c.ASYNC,i.LoadType){case c.DOM_LOADED:e.documentReady(h);break;case c.PAGE_LOAD:e.pageReady(h);break;default:h()}},"Bootstrapper.onPageElementsRecieved"),C.prototype._initPlatform=d.record(function(e){var t=Cbola.Env,i=Cbola._,o=Cbola.Styles;t.PageProperties.Domain=i.get(e,"Domain",0),t.PageProperties.Category=i.get(e,"Category",0),t.PageProperties.PageId=i.get(e,"PageId",0),t.PageProperties.CheckForPathChange=i.get(e,"DefaultSettings.CheckForPathChange",!1)&&!t.angularProxy;var n=o.injectMainStyle(document,"cbolaPlatform.css");if(n&&t.topWindow!==window)o.injectMainStyle(t.topWindow.document,"cbolaPlatform.css");else if(!n){var a=document.createElement("link");a.rel="stylesheet",a.href=t.clientPath+"css/cbolaPlatform.min.css";var s=document.querySelector("head");s&&s.appendChild(a)}f(e),!t.url&&t.PageProperties.CheckForPathChange&&Cbola.taskManager.addTask(this.checkForPathChanges.bind(this)),r.fire(r.Events.PLATFORM_INITIALIZED)},"Bootstrapper._initPlatform"),C.prototype.checkForPathChanges=function(){n.PageProperties.originalPathNameHost!==e.getLocationHref()&&(this.resetUrlProperties(),this.resetPageProperties(),s.detachAllLayers(),this.firstLoad=!0),Cbola.taskManager.addTask(this.checkForPathChanges.bind(this))},C.prototype.resetUrlProperties=function(){var r=n.PageProperties;r.originalPathNameHost=e.getLocationHref(),o.isArray(i.srcUrlEnabledDids)&&i.srcUrlEnabledDids.some(function(e){return e===n.domainId})&&(r.SrcUrl=e.getLocationHref()),r.hostname=e.queryStringCutRegex(),r.urlHashMD5=CryptoJSCbola.MD5(r.hostname).toString(),r.urlHashSHA1=CryptoJSCbola.SHA1(r.hostname).toString(),t.info("hostname: "+r.hostname),t.info("MD5 hash: "+r.urlHashMD5+" SHA1 hash: "+r.urlHashSHA1+" pid: "+Cbola.Env.activePid)},C.prototype.resetPageProperties=function(){n.PageProperties.startTime=new Date,w(e.generateDoubleRandomViewID(),!1),i.ZIndexLayers=0},C}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.PrebidAdaptor=Cbola.Common.PrebidAdaptor||function(){var e=Cbola,t=e._,i=e.EventBus,o=i.Events,n=Cbola.Common,r=n.AnalyticsService,a=n.RequestHandler,s=n.UserService,l=Cbola.Logger.getInstance(),d=Cbola.Logger.Colors.ORANGE,c=Cbola.Enums.HeaderBiddingRequestStatus,h="PrebidAdaptor",m=2e3,p=window.Cbola_pbjs||null,u=0,b=function(){return u+=1},f=!1,g=[{getReady:function(){if(!this.promise){var e=new Promise(function(e){var n=function n(r){var a=r.detail.data;i.removeEventListener(o.GET_ADS_READY,n),e(t.get(a,"PbConfigType1"))};i.addEventListener(o.GET_ADS_READY,n)});this.promise=Promise.all([s.isEUUserAsync(),e])}return this.promise}},{getReady:function(){var e=this;return p?Promise.resolve():(this.promise||(this.promise=a.getJsBundle("external/prebid.min.js").then(function(){p=p||window.Cbola_pbjs},function(){return delete e.promise,Promise.reject()})),this.promise)}}];t.first(g).getReady();var y=t.once(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=t.last(e),o=t.first(e),n={};i&&(l.info(d,"Prebid config: setting user sync for bidders -> "+i),n.userSync={syncEnabled:!0,syncDelay:6e3,filterSettings:{iframe:{bidders:i.split(",").map(function(e){return e.trim()}),filter:"include"}}}),o&&(l.info(d,"Prebid config: setting consent management"),n.consentManagement={cmpApi:"iab",timeout:8e3}),t.isEmpty(n)?l.info(d,"Prebid config: none"):p.setConfig(n)}),w=function(e,i){var o="executeAuction";if(t.isEmpty(e))return Promise.reject(new Error("No bid instances provided"));var n=t.result(e,"[0].getTranslatedSizes",{width:0,height:0}),r=n.width,a=n.height;if(!r||!a)return Promise.reject(new Error("No valid size for auction"));var s=v(e),d=t.reduce(s,function(e,t,i){return e.push({code:i,mediaTypes:{banner:{sizes:[[r,a]]}},bids:t.map(function(e){return e.getBidRequest()})}),e},[]);return C(d,i).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=[],n=[];return l.info("cbolaPbjs bid response: ",e),t.forEach(e,function(e,r){var a=t.get(e,"bids")||[];t.forEach(a,function(e){var a=e.bidder,d=t.remove(s[r],function(e){return e.getBidder()===a});if(0===d.length)return void l.alwaysSendM(h+"."+o,h+"."+o+" failed to match bid to ad object, bidder: "+a);d.length>1&&l.alwaysSendM(h+"."+o,h+"."+o+" multiple bidders for ad unit, bidder: "+a);var m=t.head(d);if(e.cpm&&e.cpm>0){var p=e.ad||(e.adUrl?'<IFRAME SRC="'+e.adUrl+'" width="'+e.width+'" height="'+e.height+'" FRAMEBORDER="0" SCROLLING="no" MARGINHEIGHT="0" MARGINWIDTH="0" TOPMARGIN="0" LEFTMARGIN="0" ALLOWTRANSPARENCY="true"></IFRAME>':null);p&&(m.setCPM(e.cpm),m.setTag(p),m.setResponseTimestamp(e.responseTimestamp||Date.now()),m.setTimeToRespond(e.timeToRespond))}i.push(m),n.push({TagId:m.getID(),Cpm:m.getCPM(),Status:c.SUCCESS})})}),t.forEach(s,function(e){t.forEach(e,function(e){i.push(e),n.push({TagId:e.getID(),Cpm:0,Status:c.TIMEOUT})})}),_(n),Object.keys(s).forEach(function(e){return p.removeAdUnit(e)}),Promise.resolve(i)})},v=function(e){var i=t.groupBy(e,function(e){return e.getBidder()}),o=[],n={};return t.forEach(i,function(e){t.forEach(e,function(e,i){if("undefined"==typeof o[i]){var r="cbola_code_"+t.random(10,1e3)+"-"+b();o[i]=r,n[r]=[]}n[o[i]].push(e)})}),n},C=function(e,t){var i=new Promise(function(i){p.requestBids({bidsBackHandler:i,timeout:t,adUnits:e})}),o=new Promise(function(e){return setTimeout(e,t+50)});return Promise.race([i,o])},_=function(e){e&&e.length>0&&(e.push({TagId:t.head(e).TagId,Status:c.REQUEST_MADE}),r.setHbBidRequestProto(e))},I=function(){};return I.prototype={auction:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;return f?w(e,i):Promise.all(g.map(function(e){return e.getReady()})).then(function(o){return y(t.head(o)),f=!0,w(e,i)})}},new I}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.Factory=function(){var e=Cbola.Common.RequestHandler,t=Cbola.Logger.getInstance(),i=Cbola.Common.Ads.Writers,o=Cbola.Common.TimelineService,n=Cbola._,r={},a=function(){};return a.prototype.get=function(e){t.info("Ad.Writers.Factory.create -> creating writer type: "+e);var o=i.TYPES_TO_NAMES_MAP[e];return n.isEmpty(o)?(t.info("Writers.Factory.create', 'No Writer prototype found for writer "+e),null):i[o]},a.prototype.shouldFetch=function(e){var t=i.TYPES_TO_NAMES_MAP[e];return n.isNil(i[t])},a.prototype.getAsync=function(i){var a=this;return n.isNil(r[i])?(r[i]=new Promise(function(n,r){a.shouldFetch(i)?(t.alwaysSend("WriterFactory.createAsync -> fetching bundle... writerType:"+i),e.getJsBundle("external/ad_writers_bundle.js").then(function(){o.markEnd("WriterFactory -> getting ad writers bundle for type: "+i),n(a.get(i))}).catch(function(){r(new Error("couldnt fetch ad writers bundle."))})):(o.markEnd("WriterFactory -> creating writer "+i),n(a.get(i)))}),r[i]):r[i]},new a}(),Cbola.Common.Ads.Writers.TYPES_TO_NAMES_MAP={0:"IframeWriter",1:"AppendWriter",2:"PostscribeWriter",3:"IframeWriter",4:"PostscribeWriter",5:"IframeSrcdocWriter",6:"BilimbiWriter",7:"IframeWriter",8:"ConfiantIframeWriter",9:"AdLightningIframeWriter"},window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.IframeWriter=function(){var e=Cbola.Utils,t=Cbola.Env,i=function(){this.name="iframe_write"};return i.prototype.write=function(i,o,n){var r=e.createAdIframe(n.getTranslatedSizes());i.appendChild(r);var a=r.contentDocument;a.open(),a.write("<head>"+("https:"!==t.topWindow.location.protocol||e.isIE?"":'<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">')+"</head><body>"+o+"</body>"),a.close()},new i}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.ConfiantIframeWriter=function(){var e=Cbola.Utils,t=Cbola.Env,i=Cbola.Logger.getInstance(),o=Cbola.Common.AnalyticsService,n=Cbola.Enums.BlockedAdTriggerTypes,r=Cbola.Enums.AdTriggerTypes,a="clarium.global.ssl.fastly.net",s="kj7Ux6NuzZRX9RuZUDxzW2kAL60",l=function(e,t,i,o,n){function r(e){return(m(e)||"")[y]("/","_")[y]("+","-")}function a(t,i,o){var n=_+p(t)+"&d="+i,r="err__"+1*new Date;c[r]=o;var a="<"+f+" on"+w+'="void('+r+'())" '+g+'="'+n+'" type="text/java'+f+'" ></'+f+">";e[C](a)}function s(){var i=r(o+"/"+I.k.hb_bidder[0]+":"+I.k.hb_size[0]),s={wh:i,wd:h.parse(h[v](I)),wr:0};a(i,r(h[v](s)),function(){e[C](t.ad)});var l={prebid:{adId:t.adId,cpm:t.cpm}},d={d:s,t:t.ad,cb:n,id:l};c[o]={},c[o][i]=d}var l=t.bidder,d=t.size,c=e.parentWindow||e.defaultView,h=c.JSON,m=c.btoa,p=c.encodeURIComponent;if(!h||!m)return!1;var u="t",b="i",f="script",g="src",y="replace",w="error",v="stringify",C="wr"+b+u+"e",_="https://"+i+"/?wrapper="+p(o)+"&tpid=",I={k:{hb_bidder:[l],hb_size:[d]}};return s(),e.close(),!0},d=function(){this.name="confiant_write"};return d.prototype.write=function(d,c,h){var m=h.getTranslatedSizes(),p=e.createAdIframe(m);d.appendChild(p);var u=p.contentDocument;u.open(),"https:"!==t.topWindow.location.protocol||e.isIE||u.write('<head><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"></head>');var b=h.getID(),f={ad:c,bidder:b,size:m.width+"x"+m.height,cpm:0,adId:b},g=function(){var t=e.dataset(d,"elementId");o.setBlockedAdRequest(t,b,n.CONFIANT_BLOCK),i.info("Confiant found malware ad for tag id: "+b);var a=Cbola.Globals.AdsService.getTriggersManagerByElementId(t);if(a){var s=e.dataset(d,"apperance"),l=e.dataset(d,"spot"),c=e.dataset(d,"bannerId");a.malwareRefresh(s,l,c,r.REFRESH_CONFIANT_BLOCK)}};l(u,f,a,s,g)||(u.write(c),u.close())},new d}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.AdLightningIframeWriter=function(){var e=Cbola.Utils,t=Cbola.Templates,i=Cbola._,o="carambola_ADL_",n=o.length,r=Cbola.Logger.getInstance(),a=Cbola.Common.AnalyticsService,s=Cbola.Enums.BlockedAdTriggerTypes,l=Cbola.Enums.AdTriggerTypes,d="AdLightningIframeWriter",c=!1,h=function(){c||(c=!0,window.addEventListener("message",m))},m=function(e){var t="blockedAdMessageHandler";if(e.origin===window.location.origin&&"string"==typeof e.data&&e.data.startsWith(o)){var i={};try{i=JSON.parse(e.data.substr(n))}catch(c){return void r.errorM(d+"."+t,d+"."+t+" failed on message parsing - "+e.data+".",c)}var h=i,m=h.elemId,p=h.apperance,u=h.spot,b=h.bannerId,f=h.adId;a.setBlockedAdRequest(m,f,s.AD_LIGHTNING_BLOCK),r.info("Ad Lightning found malware ad for tag id: "+f);var g=Cbola.Globals.AdsService.getTriggersManagerByElementId(m);g&&g.malwareRefresh(p,u,b,l.REFRESH_AD_LIGHTNING_BLOCK)}},p=function(){this.name="ad_lightning_write"};return p.prototype.write=function(n,r,a){h();var s=a.getTranslatedSizes(),l=a.getID(),d={message:""+o+JSON.stringify({elemId:e.dataset(n,"elementId"),apperance:e.dataset(n,"apperance"),spot:e.dataset(n,"spot"),bannerId:e.dataset(n,"bannerId"),adId:l}),tag:r,adId:l};i.extend(d,s);var c=e.createAdIframe(s);n.appendChild(c);var m=t.getCompiledTemplate("ad_lightning_iframe.html"),p=c.contentDocument;
p.open(),p.write(m(d)),p.close()},new p}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Tags=Cbola.Common.Ads.Tags||{},Cbola.Common.Ads.Tags.Base=Cbola.Common.Ads.Tags.Base||function(){var e,t,i=Cbola.Logger.getInstance(),o=Cbola.Logger.Colors.ORANGE,n=Cbola._,r="BaseTag",a=135;return t=e=function(){function e(t){_classCallCheck(this,e),n.extend(this,t),this.sizeName=e.getAdSizeName(t),this.usedCounter=0,this.unAvailabilityParams={timeoutDelay:!1}}return _createClass(e,null,[{key:"getAdSizeName",value:function(t){var o=t.AdWidth+"_"+t.AdHeight;return e.AD_SIZES["W"+t.AdWidth+"H"+t.AdHeight]||i.warnOnceM(r+".getAdsSizeName",r+".getAdsSizeName encountered unfamiliar ad size: "+o),o}}]),_createClass(e,[{key:"onSelection",value:function(){return this.updateUsedCounter(),this.ProviderId===a&&this.delayAvailabilityBySec(),this}},{key:"delayAvailabilityBySec",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;i.info(o,"Base ad tag ("+this.sizeName+", "+this.Id+"): disabling availability for 60 sec"),this.unAvailabilityParams.timeoutDelay=!0,setTimeout(function(){i.info(o,"Base ad tag ("+e.sizeName+", "+e.Id+"): re-enabling timeout delay availability"),e.unAvailabilityParams.timeoutDelay=!1},1e3*t)}},{key:"updateUsedCounter",value:function(){this.usedCounter+=1}},{key:"getSizeName",value:function(){return this.sizeName}},{key:"getPriority",value:function(){return n.result(this,"Priority")||0}},{key:"getWeight",value:function(){return n.result(this,"Weight")||1}},{key:"getTypeName",value:function(){return this.isVideo()?e.AD_TYPES.VIDEO.name:e.AD_TYPES.DISPLAY.name}},{key:"getID",value:function(){return this.Id||0}},{key:"getMaxCap",value:function(){return this.MaxCap||0}},{key:"getProviderID",value:function(){return this.ProviderId}},{key:"getTag",value:function(){return this.Tag}},{key:"getTranslatedSizes",value:function(){return e.translateSize(this.AdWidth,this.AdHeight)}},{key:"getTagExtractionType",value:function(){return this.TagExtractionType||Cbola.Config.extractTypeAds}},{key:"isPremium",value:function(){return this.Mode===e.AD_MODES.PREMIUM}},{key:"isVideo",value:function(){return this.AdType===e.AD_TYPES.VIDEO.num}},{key:"isDisplay",value:function(){return this.AdType===e.AD_TYPES.DISPLAY.num}},{key:"isMaxCaped",value:function(){return this.MaxCap>0&&this.MaxCap<=this.usedCounter}},{key:"isAvailable",value:function(){return!this.isMaxCaped()&&!n.some(this.unAvailabilityParams)}},{key:"shouldShowX",value:function(){return this.ShowX}}]),e}(),e.translateSize=n.memoize(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{width:e,height:parseInt(10*Math.floor(t/10))}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+"_"+t}),e.AD_TYPES={DISPLAY:{name:"DisplayAdTag",num:0},VIDEO:{name:"VideoAdTag",num:1}},e.AD_SIZES={W300H250:"300_250",W300H251:"300_251",W300H252:"300_252",W300H600:"300_600",W728H90:"728_90",W320H50:"320_50",W728H91:"728_91",W728H92:"728_92",W310H260:"310_260",W400H300:"400_300",W500H300:"500_300",W630H90:"630_90",W10hH0:"10_10"},e.AD_MODES={REGULAR:1,PREMIUM:3,CPI:9},t}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.Base=Cbola.Common.Ads.Stores.Base||function(){var e=Cbola._,t=function(){function t(e){_classCallCheck(this,t),this.elemId=e.elemId,this.wid=e.wid,this.inventory={},this.store={}}return _createClass(t,[{key:"addToInventory",value:function(t){var i=t.getSizeName();e.isNil(this.inventory[i])&&(this.inventory[i]=[]),this.inventory[i].push(t)}},{key:"init",value:function(){return this}}]),t}();return t}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Tags.Waterfall=Cbola.Common.Ads.Tags.Waterfall||function(){var e=Cbola.Common.Ads.Tags.Base,t=Cbola.Logger.getInstance(),i=Cbola.Logger.Colors.ORANGE;return function(e){function o(e){_classCallCheck(this,o);var t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return t.inQueue=!1,t.psaCounter=0,t.unAvailabilityParams.maxPSA=!1,t}return _inherits(o,e),_createClass(o,[{key:"setInQueue",value:function(e){this.inQueue=e}},{key:"isInQueue",value:function(){return this.inQueue}},{key:"incrementPSACount",value:function(){this.psaCounter+=1,this.isMaxedPSA()&&(t.info(i,"WF Tag("+this.getID()+"): reached max PSA cap ("+this.PsaTagCap+") - removing from inventory."),this.unAvailabilityParams.maxPSA=!0)}},{key:"isMaxedPSA",value:function(){return this.PsaTagCap&&this.PsaTagCap===this.psaCounter}}]),o}(e)}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.WaterfallQueue=Cbola.Common.Ads.WaterfallQueue||function(){var e=Cbola._,t=Cbola.Utils,i=Cbola.Logger.getInstance(),o=Cbola.Logger.Colors.ORANGE,n=Cbola.Common.Ads.Tags.Base.AD_TYPES,r=function(){function r(t){var i=this;_classCallCheck(this,r),this.sizeName=t,this.queues={},e.forEach(n,function(e){return i.queues[e.name]=[]})}return _createClass(r,[{key:"isEmpty",value:function(t){var i=e.result(this,"queues."+t);return e.isNil(i)||e.isEmpty(i)||!i.some(function(e){return e.isAvailable()})}},{key:"pushAdsByTypeName",value:function(n,r){e.forEach(n,function(e){return e.setInQueue(!0)}),t.push.apply(this.queues[r],n),i.info(o,"Waterfall ads queue ("+this.sizeName+" -> "+r+") pushed new ads.",this.queues[r])}},{key:"pullAdByTypeName",value:function(e){for(var t=this.queues[e],i=0;i<t.length;i++){var o=t[i];if(o.isAvailable())return o.setInQueue(!1),t.splice(i,1),o}return null}}]),r}();return r}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.WaterfallTags=Cbola.Common.Ads.Stores.WaterfallTags||function(){var e=Cbola._,t=Cbola.Common.Ads.Stores.Base,i=Cbola.Common.Ads.Tags.Base,o=Cbola.Common.Ads.WaterfallQueue,n=Cbola.Logger.getInstance(),r=Cbola.Logger.Colors.ORANGE,a=function(t){function a(e){_classCallCheck(this,a);var t=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.psaCounter={},t.placementPSACap={},t.manager=e,t}return _inherits(a,t),_createClass(a,null,[{key:"shuffleAds",value:function(t){var i=0;return e.chain(t).sortBy("priority").reverse().reduce(function(e,t){var o=t.weights,n=t.ads,r=t.currentMaxWeight,a=t.priority;for(o=o.slice(0),n=n.slice(0);o.length>0&&a>=i;){for(var s=void 0,l=Math.ceil(Math.random()*r),d=-1,c=0,h=0;h<o.length;h++)o[h]>=l&&(-1===d?(d=h,s=n[h],c=s.getWeight()):o[h]-=c);o.splice(d,1),n.splice(d,1),r-=c,s&&!s.isInQueue()&&(s.getMaxCap()>0&&a>i&&s.isAvailable()&&(i=a),e.push(s))}return e},[]).value()}},{key:"getPathFromAd",value:function(e){return e.getSizeName()+"."+e.getTypeName()+"."+e.getPriority()}}]),_createClass(a,[{key:"addToInventory",value:function(t){var i=a.getPathFromAd(t),o={ads:[],weights:[],currentMaxWeight:0,priority:t.getPriority()},n=e.get(this.inventory,i,o);n.ads.push(t),n.currentMaxWeight+=t.getWeight(),n.weights.push(n.currentMaxWeight),e.setWith(this.inventory,i,n,Object)}},{key:"removeAdFromInventory",value:function(t){var i=a.getPathFromAd(t),o=e.get(this.inventory,i);if(!e.isNil(o)){for(var n=-1,r=t.getWeight(),s=t.getID(),l=0;l<o.ads.length;l++)-1===n?o.ads[l].getID()===s&&(n=l):o.weights[l]-=r;if(-1!==n&&(o.currentMaxWeight-=r,o.ads.splice(n,1),o.weights.splice(n,1)),e.isEmpty(o.ads)){var d=e.toPath(i);do e.unset(this.inventory,d),d.pop();while(d.length>0&&e.isEmpty(e.get(this.inventory,d)));0===d.length&&this.manager.resetHBSettingsTiersThresholdForSize(t.getSizeName())}}}},{key:"init",value:function(t){var n=this,r=e.result(t,"AdsForSize",{});e.forEach(r,function(t){var r=i.getAdSizeName(t),s=n.inventory[r];s&&(n.placementPSACap[r]=n.placementPSACap[r]||e.get(t,"PsaPlacementCap")||0,n.store[r]=n.store[r]||new o(r),n.psaCounter[r]=0,e.forEach(s,function(e,t){n.store[r].pushAdsByTypeName(a.shuffleAds(e),t)}))})}},{key:"getAd",value:function(t,i){var o=t.getPlaceholderSizeName(),s=this.store[o];if(!s)return null;if(s.isEmpty(i)){n.info(r,"WF store("+o+" -> "+i+"): is empty reshuffling ads.");var l=e.get(this.inventory,o+"."+i);l&&s.pushAdsByTypeName(a.shuffleAds(l),i)}var d=s.pullAdByTypeName(i);return e.isNil(d)?n.info(r,"WF store("+o+" -> "+i+"): failed getting waterfall ad."):(n.info(r,"WF store("+o+" -> "+i+"): selected waterfall ad: ",d),this.onSuccessfulAdSelection(d)),d}},{key:"onSuccessfulAdSelection",value:function(e){var t=e.getSizeName();e.onSelection(),e.isMaxCaped()&&(n.info(r,"WF store("+t+"): ad id "+e.getID()+" max caped - removing from inventory"),this.removeAdFromInventory(e))}},{key:"incrementPSACounter",value:function(e){this.psaCounter[e]+=1}},{key:"isMaxPlacementPSA",value:function(e){return this.placementPSACap[e]>0&&this.psaCounter[e]>=this.placementPSACap[e]}},{key:"removeAdsForSize",value:function(e){n.info(r,"WF store("+e+"): removing all ads"),delete this.inventory[e],delete this.store[e]}}]),a}(t);return a}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Tags=Cbola.Common.Ads.Tags||{},Cbola.Common.Ads.Tags.HeaderBiddingRequest=Cbola.Common.Ads.Tags.HeaderBiddingRequest||function(){var e=Cbola._;return function(){function t(i){_classCallCheck(this,t),this.request=e.clone(i.getTag()),this.id=i.getID(),this.hbFactor=i.HbFactor||1,this.manager=i,this.cpm=0,this.factoredCPM=0,this.translatedSizes=i.getTranslatedSizes()}return _createClass(t,[{key:"setCPM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.cpm=e,this.factoredCPM=this.cpm*this.hbFactor}},{key:"setTag",value:function(e){this.Tag=e}},{key:"setResponseTimestamp",value:function(e){this.responseTimestamp=e}},{key:"setTimeToRespond",value:function(e){this.timeToRespond=e}},{key:"getBidRequest",value:function(){return this.request}},{key:"getBidder",value:function(){return e.get(this.request,"bidder","")}},{key:"getID",value:function(){return this.id}},{key:"getCPM",value:function(){return this.cpm}},{key:"getFactoredCPM",value:function(){return this.factoredCPM}},{key:"getTag",value:function(){return this.Tag}},{key:"getTypeName",value:function(){return this.manager.getTypeName()}},{key:"shouldShowX",value:function(){return this.manager.shouldShowX()}},{key:"getResponseTimestamp",value:function(){return this.responseTimestamp||null}},{key:"getTimeToRespond",value:function(){return this.timeToRespond||null}},{key:"getTranslatedSizes",value:function(){return this.translatedSizes}},{key:"getTagExtractionType",value:function(){return this.manager.getTagExtractionType()}}]),t}()}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),_get=function e(t,i,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,o)}if("value"in n)return n.value;var a=n.get;return void 0===a?void 0:a.call(o)};window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Tags=Cbola.Common.Ads.Tags||{},Cbola.Common.Ads.Tags.HeaderBidding=Cbola.Common.Ads.Tags.HeaderBidding||function(){var e=Cbola.Common.Ads.Tags.Base,t="HeaderBiddingAdTag",i=Cbola.Logger.getInstance(),o=Cbola.Logger.Colors.ORANGE,n=Cbola._,r={REGULAR:1,PENDING:2,SAMPLING:3},a={PRE_AUCTION:"preAuction",POST_AUCTION:"postAuction"},s={type:r.REGULAR,consecutiveInvalidBidsCount:0,skippedAuctionsCount:0},l=function(e,t){var i=e;return i.type!==r.PENDING||n.isEmpty(t)||(i=c(e),i.skippedAuctionsCount>=t.BidsToWait?(i.type=t.BidsToSample>0?r.SAMPLING:r.REGULAR,i.skippedAuctionsCount=0,i.consecutiveInvalidBidsCount=0):i.skippedAuctionsCount+=1),i},d=function(e,t,i){var o=e,a=e.type;if(a!==r.PENDING&&!n.isEmpty(t))if(i>0&&(e.type!==r.REGULAR||e.consecutiveInvalidBidsCount>0))o=c(s);else{o=c(e);var l=a===r.REGULAR?"BidsWithoutCPM":"BidsToSample";e.consecutiveInvalidBidsCount+1>=t[l]?(o.type=r.PENDING,o.skippedAuctionsCount=0,o.consecutiveInvalidBidsCount=0):o.consecutiveInvalidBidsCount+=1}return o},c=function(e){return{type:e.type,consecutiveInvalidBidsCount:e.consecutiveInvalidBidsCount,skippedAuctionsCount:e.skippedAuctionsCount}};return function(e){function c(e){_classCallCheck(this,c);var r="ctor",a=_possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));try{a.Tag=JSON.parse(a.Tag);var l=n.get(a,"Tag.bidder");l||i.errorM(t+"."+r,t+"."+r+" found ad tag without bidder name, Id: "+a.Id),a.unAvailabilityParams.bidParseFail=!l}catch(d){i.errorM(t+"."+r,t+"."+r+" failed to convert ad tag "+a.Id+" to json format"),a.unAvailabilityParams.bidParseFail=!0}return a.throttlingState=s,n.isNil(a.ThrottlingRules)||(n.some(a.ThrottlingRules,n.isNil)?(a.ThrottlingRules=null,i.info(o,"HB Tag Manager ("+a.sizeName+" , "+a.Id+"): failed initializing throttling rules")):i.info(o,"HB Tag Manager ("+a.sizeName+" , "+a.Id+"): throttling rules: ",a.ThrottlingRules)),a}return _inherits(c,e),_createClass(c,[{key:"getBidInstance",value:function(){return new Cbola.Common.Ads.Tags.HeaderBiddingRequest(this)}},{key:"onAuctionResponse",value:function(e){return this.throttlingStateReducer({name:a.POST_AUCTION,cpm:e}),this}},{key:"onPreAuction",value:function(){return this.throttlingStateReducer({name:a.PRE_AUCTION}),this}},{key:"isAvailable",value:function(){return this.throttlingState.type!==r.PENDING&&_get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"isAvailable",this).call(this)}},{key:"throttlingStateReducer",value:function(e){var t=this.throttlingState;switch(e.name){case a.PRE_AUCTION:this.throttlingState=l(this.throttlingState,this.ThrottlingRules);break;case a.POST_AUCTION:this.throttlingState=d(this.throttlingState,this.ThrottlingRules,e.cpm)}var n=this.throttlingState;t!==n&&(i.info(o,"HB Tag Manager ("+this.sizeName+" , "+this.Id+") changed state on: "+e.name),i.info(o,"HB Tag Manager ("+this.sizeName+" , "+this.Id+"): previous throttling state: ",t),i.info(o,"HB Tag Manager ("+this.sizeName+" , "+this.Id+"): current throttling state: ",n))}}]),c}(e)}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.HeaderBiddingSettings=Cbola.Common.Ads.HeaderBiddingSettings||function(){var e=Cbola._,t=0,i=.5,o=2e3,n=function(){function n(r,a){_classCallCheck(this,n);var s=e.get(r,"UsePt");this.usePocket=e.isNil(s)||s;var l=e.get(r,"UseSW");this.useSandwich=this.usePocket&&(e.isNil(l)||l),this.pocketUsageThreshold=Math.max(Math.min(e.get(r,"PtThreshold")||i,1),0),this.hbTimeout=e.get(r,"Timeout")||o,this.hbMaxTimeInPocket=e.get(r,"PtTimeout"),this.hbTiersThreshold=Math.max(e.get(r,"TiersThreshold")||e.get(a,"HbThreshold")||t,0)}return _createClass(n,[{key:"isHbPocketSupported",value:function(){return this.usePocket}},{key:"isHbLowTierSupported",value:function(){return this.useSandwich}},{key:"getHBPocketUsageThreshold",value:function(){return this.pocketUsageThreshold}},{key:"getHbTimeout",value:function(){return this.hbTimeout}},{key:"getHbMaxTimeInPocket",value:function(){return this.hbMaxTimeInPocket}},{key:"getHbTiersThreshold",value:function(){return this.hbTiersThreshold}},{key:"resetTiersThreshold",value:function(){this.hbTiersThreshold=0}}]),n}();return n}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.HeaderBiddingPocket=Cbola.Common.Ads.HeaderBiddingPocket||function(){var e=Cbola._,t=Cbola.Utils,i=Cbola.Logger.getInstance(),o=Cbola.Logger.Colors.ORANGE,n=function(){function n(e,t){_classCallCheck(this,n),this.hbSettings=e,this.sizeName=t,this.highTier=[],this.hbSettings.isHbLowTierSupported()&&(this.lowTier=[]),this.batchesCounter=0}return _createClass(n,null,[{key:"mergeSortedBidsToPocket",value:function(e,i){for(var o=0,n=0,r=e.length,a=i.length;r>o&&a>n;){for(;e[o].getFactoredCPM()>i[n].getFactoredCPM();)o+=1;e.splice(o,0,i[n]),n+=1,o+=1}a>n&&t.push.apply(e,i.slice(n))}},{key:"removeFromPocketByDelay",value:function(t,i,o,n){n&&(e.forEach(i,function(e){return e.batchID=o}),setTimeout(function(){return e.remove(t,function(e){return e.batchID===o})},n))}}]),_createClass(n,[{key:"pushAds",value:function(t){var r=this.hbSettings.getHbTiersThreshold(),a=e.remove(t,function(e){return e.getFactoredCPM()>r}),s=this.hbSettings.getHbMaxTimeInPocket(),l=this.getBatchID();if(!e.isEmpty(a)){var d=e.result(a,"[0].getCPM",null),c=e.result(this.highTier,"[0].getCPM",null);e.forEach(a,function(e){e.pocketUsageType=n.PocketUsageTypes.FROM_AUCTION,e.pocketCPM=c}),e.forEach(this.highTier,function(e){e.pocketUsageType=n.PocketUsageTypes.FROM_HIGH_TIER,e.pocketCPM=null,e.auctionCPM=d}),n.mergeSortedBidsToPocket(this.highTier,a),this.updateHighTierBidsThreshold(),n.removeFromPocketByDelay(this.highTier,a,l,s),i.info(o,"HB Pocket ("+this.sizeName+"): added bids to high tier pocket: ",this.highTier)}this.hbSettings.isHbLowTierSupported()&&!e.isEmpty(t)&&(e.forEach(t,function(e){return e.pocketUsageType=n.PocketUsageTypes.FROM_LOW_TIER}),n.mergeSortedBidsToPocket(this.lowTier,t),n.removeFromPocketByDelay(this.lowTier,t,l,s),i.info(o,"HB Pocket ("+this.sizeName+"): added bids to low tier pocket: ",this.lowTier))}},{key:"updateHighTierBidsThreshold",value:function(){var t=this.hbSettings.getHBPocketUsageThreshold();e.forEach(this.highTier,function(e,i,o){return e.hasAllowedThreshold=0===i||(o[i-1].getFactoredCPM()-e.getFactoredCPM())/(o[i-1].getFactoredCPM()||1)<t})}},{key:"getBatchID",value:function(){return this.batchesCounter+=1,this.batchesCounter}},{key:"getHighTierAd",value:function(){return e.get(this.highTier,"[0].hasAllowedThreshold")?this.highTier.shift():null}},{key:"getLowTierAd",value:function(){return this.hbSettings.isHbLowTierSupported()?this.lowTier.shift():null}},{key:"mergeLowTierToHighTier",value:function(){e.isEmpty(this.lowTier)||(t.push.apply(this.highTier,this.lowTier),this.lowTier=[],this.updateHighTierBidsThreshold())}},{key:"extendAdWithTiersSizes",value:function(t){e.extend(t,{pocketSizeHT:this.highTier.length,pocketSizeLT:this.hbSettings.isHbLowTierSupported()?this.lowTier.length:null})}}]),n}();return n.PocketUsageTypes={FROM_AUCTION:1,FROM_HIGH_TIER:2,FROM_LOW_TIER:3},n}();var _get=function e(t,i,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,o)}if("value"in n)return n.value;var a=n.get;return void 0===a?void 0:a.call(o)},_createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.HeaderBiddingTags=Cbola.Common.Ads.Stores.HeaderBiddingTags||function(){var e=Cbola,t=e._,i=e.Config,o=Cbola.Common.PrebidAdaptor,n=Cbola.Common.Ads,r=n.HeaderBiddingPocket,a=n.HeaderBiddingSettings,s=Cbola.Common.Ads.Tags.Base,l=Cbola.Common.Ads.Stores.Base,d=Cbola.Logger.getInstance(),c=Cbola.Logger.Colors.ORANGE,h=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.activeAuctions={},t.premiumPlusInventory={},t.tagIdPerSize={},t.HbSettings={},t}return _inherits(n,e),_createClass(n,null,[{key:"onAuctionResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.forEach(e,function(e){return e.manager.onAuctionResponse(e.cpm)}),e.filter(function(e){return e.getFactoredCPM()>i}).sort(function(e,t){return t.getFactoredCPM()-e.getFactoredCPM()})}}]),_createClass(n,[{key:"addToInventory",value:function(e){if(e.isAvailable()){var i=e.getSizeName();if(t.isNil(this.tagIdPerSize[i])&&(this.tagIdPerSize[i]=e.getID()),e.isPremium()){for(var o=e.getProviderID(),r=t.get(this.premiumPlusInventory,"["+i+"]["+o+"]",[]),a=0,s=e.getPriority();a<r.length&&r[a].getPriority()>s;a++);r.splice(a,0,e),t.setWith(this.premiumPlusInventory,"["+i+"]["+o+"]",r,Object)}else _get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addToInventory",this).call(this,e)}}},{key:"removeAdFromInventory",value:function(e){var i=e.getSizeName(),o=e.getID();t.remove(this.inventory[i],function(e){return e.getID()===o})}},{key:"init",value:function(e){var o=this;t.forEach(e.AdsForSize,function(n){var l=s.getAdSizeName(n);t.isEmpty(o.inventory[l])&&t.isEmpty(o.premiumPlusInventory[l])||(t.isEmpty(o.HbSettings[l])&&(o.HbSettings[l]=new a(t.get(n,"HbSettings")||{},e),d.info(c,"HB store ("+l+"): created HB pocket and settings object: ",o.HbSettings[l])),o.HbSettings[l].isHbPocketSupported()&&t.isEmpty(o.store[l])&&(o.store[l]=new r(o.HbSettings[l],l),64===i.abTestId&&o.createAuctionToPocketPromise(l)))})}},{key:"getAd",value:function(e){var i=this,a=e.getPlaceholderSizeName();if(t.isEmpty(this.inventory[a])&&t.isEmpty(this.premiumPlusInventory[a]))return d.info(c,"HB store ("+a+"): No HB ads"),Promise.reject("No HB ads");if(this.HbSettings[a].isHbPocketSupported()){var s=this.store[a].getHighTierAd();return s?(this.store[a].extendAdWithTiersSizes(s),d.info(c,"HB store ("+a+"): selected ad from high tier pocket: ",s),Promise.resolve(s)):this.createAuctionToPocketPromise(a).then(function(){var e=i.store[a].getHighTierAd();return e?(i.store[a].extendAdWithTiersSizes(e),d.info(c,"HB store ("+a+"): selected ad from high tier pocket after auction: ",e),Promise.resolve(e)):(d.info(c,"HB store ("+a+"): failed selecting ad from high tier pocket."),Promise.reject(new Error("Failed to find high tier ad")))})}var l=this.HbSettings[a].getHbTimeout(),h=this.getBidsForAuction(a);return t.isEmpty(h)?(d.info(c,"HB store ("+a+"): No pocket support and no bids for auction, terminating HB process"),Promise.reject(new Error("No available bids for size: "+a))):(d.info(c,"HB store ("+a+"): No pocket support auctioning (TO: "+l+") for highest bid: ",h),o.auction(h,l).then(function(e){var o=n.onAuctionResponse(e,i.HbSettings[a].getHbTiersThreshold()).shift();return o?(t.extend(o,{pocketUsageType:r.PocketUsageTypes.FROM_AUCTION,pocketSizeHT:null,PocketSizeLT:null}),d.info(c,"HB store ("+a+"): No pocket support, Selected highest bid : ",o),Promise.resolve(o)):(d.info(c,"HB store ("+a+"): No pocket support, failed selecting highest bid"),Promise.reject(new Error("Failed to get ad")))}))}},{key:"createAuctionToPocketPromise",value:function(e){var i=this;if(!this.activeAuctions[e]){var r=this.HbSettings[e].getHbTimeout(),a=this.getBidsForAuction(e);if(t.isEmpty(a))return d.info(c,"HB store ("+e+"): failed getting bids for auction, terminating hb ad selection"),Promise.reject(new Error("No available bids for size: "+e));d.info(c,"HB store ("+e+"): Performing auction (TO: "+r+") on the following bids: ",a),this.activeAuctions[e]=o.auction(a,r).then(function(t){return t=n.onAuctionResponse(t),i.store[e].pushAds(t),delete i.activeAuctions[e],Promise.resolve()},function(t){return delete i.activeAuctions[e],Promise.reject(t)})}return d.info(c,"HB store ("+e+"): Pending auction response"),this.activeAuctions[e]}},{key:"getBidsForAuction",value:function(e){var i=this,o=t.get(this.premiumPlusInventory,e),n=[];o&&(n=t.reduce(o,function(n,r,a){var s=-1,l=-1,d=0;t.forEach(r,function(e,t){e.onPreAuction(),0>s&&e.isAvailable()&&(s=t),!d&&e.getMaxCap()>0&&(d=e.getPriority()),s>=0&&d<=e.getPriority()&&(l=t)});var c=r.splice(s,1)[0];return t.isNil(c)||(c.onSelection(),n.push(c.getBidInstance()),c.isMaxCaped()||r.splice(l,0,c)),t.isEmpty(r)&&(delete o[a],t.isEmpty(o)&&delete i.premiumPlusInventory[e]),n},[]));var r=t.get(this.inventory,e),a=[];return r&&(a=r.reduce(function(e,t){return t.onPreAuction().isAvailable()&&(t.onSelection(),e.push(t.getBidInstance()),t.isMaxCaped()&&i.removeAdFromInventory(t)),e},[])),n.concat(a)}},{key:"getLowTierAd",value:function(e){var t=e.getPlaceholderSizeName();if(!this.HbSettings[t].isHbLowTierSupported())return d.info(c,"HB store ("+t+"): low tier pocket is not supported"),null;var i=this.store[t].getLowTierAd();return i?(this.store[t].extendAdWithTiersSizes(i),d.info(c,"HB store ("+t+"): Selected low tier ad: ",i),i):(d.info(c,"HB store ("+t+"): Failed selecting low tier ad."),null)}},{key:"getTagIdForSize",value:function(e){return this.tagIdPerSize[e]}},{key:"isLowTierSupportedForSize",value:function(e){return t.result(this,"HbSettings["+e+"].isHbLowTierSupported",!1)}},{key:"resetTiersThresholdForSize",value:function(e){t.isNil(this.HbSettings[e])||(this.HbSettings[e].resetTiersThreshold(),this.store[e].mergeLowTierToHighTier())}}]),n}(l);return h}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Tags=Cbola.Common.Ads.Tags||{},Cbola.Common.Ads.Tags.A9=Cbola.Common.Ads.Tags.A9||function(){var e=Cbola.Common.Ads.Tags.Base;return function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"getDFPSlotName",value:function(){return this.Tag}},{key:"getPrebidBidsForAuction",value:function(){return this.headerBiddingStore.getBidsForAuction(this.getSizeName())}},{key:"getAuctionTimeout",value:function(){return this.auctionTimeout}},{key:"setAuctionTimeout",value:function(e){this.auctionTimeout=e}},{key:"setHeaderBiddingStore",value:function(e){this.headerBiddingStore=e}}]),t}(e)}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.A9Tags=Cbola.Common.Ads.Stores.A9Tags||function(){var e=Cbola._,t=Cbola.Logger.getInstance(),i=Cbola.Logger.Colors.ORANGE,o=Cbola.Common.Ads.HeaderBiddingSettings,n=Cbola.Common.Ads.Tags.Base,r=Cbola.Common.Ads.Stores.Base,a=function(r){function a(e,t){_classCallCheck(this,a);var i=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return i.headerBiddingStore=t,i.HbSettings={},i}return _inherits(a,r),_createClass(a,[{key:"addToInventory",value:function(t){var i=t.getSizeName();e.isNil(this.inventory[i])&&(this.inventory[i]=t,t.setHeaderBiddingStore(this.headerBiddingStore))}},{key:"init",value:function(t){var i=this;e.forEach(t.AdsForSize,function(r){var a=n.getAdSizeName(r);e.isEmpty(i.inventory[a])||(i.HbSettings[a]=new o(e.get(r,"HbSettings")||{},t),i.inventory[a].setAuctionTimeout(i.HbSettings[a].getHbTimeout()))})}},{key:"getAd",value:function(o){var n=o.getPlaceholderSizeName();if(e.isNil(this.inventory[n]))t.info(i,"A9 store ("+n+"): no a9 tag");else{if(e.isNil(o.injectedWithA9Tag)){o.injectedWithA9Tag=!0;var r=this.inventory[n];return t.info(i,"A9 store ("+n+"): selected a9 tag.",r),r}t.info(i,"A9 store ("+n+"): already attempted a9 tag injection on placeholder: ",o)}return null}}]),a}(r);return a}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.CPITags=Cbola.Common.Ads.Stores.CPITags||function(){var e=Cbola.Common.Ads.Stores.Base,t=(Cbola.Common.Ads.Tags.Base,Cbola.Logger.getInstance()),i=Cbola.Logger.Colors.ORANGE,o=Cbola._,n=function(e){function n(e){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return _inherits(n,e),_createClass(n,[{key:"addToInventory",value:function(e){var t=e.getSizeName();o.isNil(this.inventory[t])&&(this.inventory[t]=e)}},{key:"getAd",value:function(e){var n=e.getPlaceholderSizeName(),r=o.get(this,"inventory."+n,null);return r?(t.info(i,"CPI store ("+n+"): selected CPI ad: ",r),delete this.inventory):t.info(i,"CPI store ("+n+"): failed selecting CPI ad"),r}}]),n}(e);return n}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.PSATags=Cbola.Common.Ads.Stores.PSATags||function(){var e=Cbola.Common.Ads.Stores.Base,t=Cbola.Common.Ads.Tags.Base,i=Cbola._,o=Cbola.Enums,n=Cbola.Env,r=Cbola.Utils,a={
FilteringRules:null,Id:0,IsHb:!1,MaxCap:0,Mode:1,Priority:10,ProviderId:0,PsaTagCap:0,ShowX:!0,TagExtractionType:o.TagExtractionTypes.WRITE_IFRAME,ThrottlingRules:null,Weight:1},s=function(e){function o(e){return _classCallCheck(this,o),_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e))}return _inherits(o,e),_createClass(o,[{key:"init",value:function(e){var o=this,s=i.get(e,"AdsForSize");i.forEach(s,function(e){var s=t.getAdSizeName(e),l=e.AdHeight,d=e.AdWidth,c=t.translateSize(d,l),h=c.width,m=c.height;o.inventory[s]=new t(i.defaults({Tag:"<div id='cbola_psa'></div><script src='//psa.carambo.la/getPsa?width="+h+"&height="+m+"&did="+n.domainId+"&pid="+n.activePid+"&isMobile="+(r.isMobile?1:0)+"'></script>",AdHeight:l,AdWidth:d},a))})}},{key:"getAd",value:function(e){var t=e.getPlaceholderSizeName();return i.get(this.inventory,t,null)}}]),o}(e);return s}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.Manager=Cbola.Common.Ads.Stores.Manager||function(){var e=Cbola._,t=Cbola.Logger.getInstance(),i=Cbola.Logger.Colors.ORANGE,o=Cbola.Env,n=Cbola.Common.Ads.Stores,r=Cbola.Common.Ads.Tags,a=r.Base,s=a.AD_TYPES,l=a.AD_MODES,d=Cbola.Utils,c=Cbola.EventBus,h=Cbola.Common.UserService,m=Cbola.Enums.AdTriggerTypes,p="AdsStoresManager",u=204,b=[{toFind:"[\\[{]CLIENTCB[\\]}]",replaceWith:e.random(1e7,9e7)},{toFind:"[\\[{]CACHEBUSTER[\\]}]",replaceWith:d.generateViewId()},{toFind:"\\[USER_AGENT\\]",replaceWith:navigator.userAgent}],f=e.once(function(){d.push.apply(b,[{toFind:"{google_page_url}",replaceWith:o.PageProperties.originalPathNameHost},{toFind:"\\[PAGE_URL\\]",replaceWith:o.PageProperties.originalPathNameHost}])}),g=function(){function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments[2];_classCallCheck(this,o),this.wid=t,this.elemId=e,this.shouldIncludePromises=[],f(),Cbola.Common.RequestHandler.getAds(t,e,i).then(this.init.bind(this)).catch(d.noOp)}return _createClass(o,null,[{key:"replaceTagParams",value:function(t){var i=b.concat([{toFind:"\\[ID\\]",replaceWith:e.get(t,"Id",0)}]),o=e.get(t,"Tag","");e.forEach(i,function(e){var t=e.toFind,i=e.replaceWith;o=d.replaceAll(t,i,o)}),t.Tag=o}}]),_createClass(o,[{key:"init",value:function(){var i=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.get(r,"AdsForSize",[]);return e.isEmpty(a)?(t.errorM(p+".init",p+".init failed no ads data exist. Widget id: "+this.wid),this):(this.adsData=r,this.displayBeforeVideo=r.NumDisplayBeforeVideo||0,this.maxVideoAds=r.MaxVideos||0,this.maxDisplayAds=r.MaxDisplayAds,this.stores={psa:new n.PSATags(this),headerBidding:new n.HeaderBiddingTags(this),waterfall:new n.WaterfallTags(this),cpi:new n.CPITags(this)},this.stores.a9=new n.A9Tags(this,this.stores.headerBidding),this.storesToInit={headerBidding:!1,waterfall:!1,cpi:!1,a9:!1,psa:!0},this.storeSizes={},e.forEach(a,function(t){e.forEach(s,function(n){var r=t[n.name];e.isEmpty(r)||e.forEach(r,function(e){var t=o.FILTERS_MANAGER.shouldInclude(e);t instanceof Promise?i.shouldIncludePromises.push(t):t&&i.addToStoreInventoryByTagType(e)})})}),this.initStores(),c.fire(""+c.Events.ADS_STORES_MANAGER_READY+this.wid,this),void(this.shouldIncludePromises.length>0&&Promise.all(this.shouldIncludePromises).then(function(t){var o=Object.keys(i.storeSizes).length;e.forEach(t,function(t){e.isNil(t)||i.addToStoreInventoryByTagType(t)}),i.initStores(),o<Object.keys(i.storeSizes).length&&c.fire(""+c.Events.ADS_STORES_MANGER_ADDED_SIZES+i.wid)})))}},{key:"addToStoreInventoryByTagType",value:function(e){if(e.IsHb){var t={};e.ProviderId===u?(t=new r.A9(e),this.stores.a9.addToInventory(t),this.storesToInit.a9=!0):(t=new r.HeaderBidding(e),this.stores.headerBidding.addToInventory(t),this.storesToInit.headerBidding=!0),this.storeSizes[t.getSizeName()]=!0}else if(e.Mode===l.CPI)this.stores.cpi.addToInventory(new r.Base(e)),this.storesToInit.cpi=!0;else{o.replaceTagParams(e);var i=new r.Waterfall(e);this.stores.waterfall.addToInventory(i),this.storesToInit.waterfall=!0,this.storeSizes[i.getSizeName()]=!0}}},{key:"initStores",value:function(){var t=this;e.forEach(this.stores,function(e,i){t.storesToInit[i]&&(e.init(t.adsData),t.storesToInit[i]=!1)})}},{key:"getAd",value:function(e){var t=this;if(this.maxDisplayAds>0){var i=this.stores.a9.getAd(e);if(i)return this.onAdSelectionSuccess(e,i),Promise.resolve(i)}return this.maxDisplayAds>0?this.stores.headerBidding.getAd(e).then(function(i){return t.onAdSelectionSuccess(e,i),Promise.resolve(i)}).catch(function(){return t.getWaterfallAd(e)}):this.getWaterfallAd(e)}},{key:"getWaterfallAd",value:function(o){var n="getWaterfallAd",r=null;if(this.displayBeforeVideo<=0&&this.maxVideoAds>0?r=this.stores.waterfall.getAd(o,s.VIDEO.name):t.info(i,p+"."+n+" - skipped attempting to set video ad, displayBeforeVideo: "+this.displayBeforeVideo+" maxVideoAds: "+this.maxVideoAds+". Element ID: "+this.elemId+", widgetId: "+this.wid+"."),!r&&this.maxDisplayAds>0)r=this.stores.waterfall.getAd(o,s.DISPLAY.name);else if(this.maxDisplayAds<=0)return t.info(i,p+"."+n+" - reached max display ads. Element ID: "+this.elemId+", widget ID: "+this.wid),Promise.reject(!0);return e.isNil(r)?Promise.reject(!1):(this.onAdSelectionSuccess(o,r),Promise.resolve(r))}},{key:"onAdSelectionSuccess",value:function(t,i){var o=e.result(t,"getInjectionType");if(o===m.REFRESH_PSA||o===m.REFRESH_CONFIANT_BLOCK||o===m.REFRESH_AD_LIGHTNING_BLOCK)return this;var n=i.getTypeName();return n===s.VIDEO.name?this.maxVideoAds-=1:n===s.DISPLAY.name&&(this.displayBeforeVideo=Math.max(this.displayBeforeVideo-1,0),this.maxDisplayAds-=1),this}},{key:"getAdsData",value:function(){return this.adsData}},{key:"getLowTierFallbackAd",value:function(e){return this.stores.headerBidding.getLowTierAd(e)}},{key:"getRandomHbTagId",value:function(e){var t=e.getPlaceholderSizeName();this.stores.headerBidding.getTagIdForSize(t)}},{key:"getCPIFallbackAd",value:function(e){return this.stores.cpi.getAd(e)}},{key:"getPSA",value:function(e){return this.stores.psa.getAd(e)}},{key:"isLowTierSupported",value:function(e){var t=e.getPlaceholderSizeName();return this.stores.headerBidding.isLowTierSupportedForSize(t)}},{key:"hasAvailableAdsForSize",value:function(e){return this.storeSizes[e]}},{key:"updateWaterfallPSACounter",value:function(e){var t=e.getPlaceholderSizeName();this.stores.waterfall.incrementPSACounter(t)}},{key:"isWaterfallMaxPlacementPSA",value:function(e){var t=e.getPlaceholderSizeName();return this.stores.waterfall.isMaxPlacementPSA(t)}},{key:"removeWaterfallAdsForSize",value:function(e){var i=e.getPlaceholderSizeName();this.stores.waterfall.removeAdsForSize(i),this.resetHBSettingsTiersThresholdForSize(i),t.trace(p+".removeWaterfallAdsForSize: Removing all WF ads due to placement PSA cap, size: "+i+".")}},{key:"removeWaterfallAd",value:function(e){this.stores.waterfall.removeAdFromInventory(e),t.trace(p+".removeWaterfallAd: Removing WF ad due to PSA tag cap. tag ID: "+e.getID()+", size: "+e.getSizeName()+".")}},{key:"resetHBSettingsTiersThresholdForSize",value:function(e){t.info(i,p+"("+e+") - resetting low tier threshold"),this.stores.headerBidding.resetTiersThresholdForSize(e)}}]),o}();return g.FILTERS_MANAGER={IN:{id:1,isAsync:!1,shouldTestURL:!0,onMatch:function(){return!0},onMismatch:function(){return!1}},OUT:{id:2,isAsync:!1,shouldTestURL:!0,onMatch:function(){return!1},onMismatch:function(){return!0}},DFP_COMPLIANCE:{id:3,isAsync:!1,shouldTestURL:!1,onRule:function(e){return e.Tag=d.replaceAll('"compliance": \\["yes"\\]','"compliance": ["no"]',e.Tag),!0}},REMOVE_ON_IE:{id:4,isAsync:!1,shouldTestURL:!1,onRule:function(){return!d.isIE}},REMOVE_ON_EU_USER:{id:5,isAsync:!0,shouldTestURL:!1,onRule:function(){return h.isEUUserAsync().then(function(e){var t=!e;return Promise.resolve(t)})}},REMOVE_EU_USER_WO_CMP:{id:6,isAsync:!0,shouldTestURL:!1,onRule:function(){return h.isEUUserAsync().then(function(e){var t=!0;return e?Cbola.Common.ConsentProviders.Manager.consentProviderFound().then(function(){return Promise.resolve(t)}).catch(function(){return Promise.resolve(!t)}):Promise.resolve(t)})}},getRuleByType:e.memoize(function(t){return e.find(this,function(e){return e.id===t})}),shouldInclude:function(n){var r=this,a=n.Id,s=e.get(n,"FilteringRules");if(e.isObject(s)&&s.hasOwnProperty("FilterType")&&s.hasOwnProperty("ExplicitURL")&&(s=[s]),s&&e.isArray(s)&&!e.isEmpty(s)){var l=s.reduce(function(i,n){var s=e.get(n,"FilterType"),l=r.getRuleByType(parseInt(s,10));return l?i[l.isAsync?"push":"unshift"](e.extend({ExplicitURL:n.ExplicitURL},l)):t.errorM(p+".shouldInclude","Unknown ad filtering rule type: "+s+". Including tag "+a+" for URL: "+o.PageProperties.originalPathNameHost),i},[]).reduce(function(r,s){if(!r)return r;var l="";if(s.shouldTestURL){var d=e.isArray(s.ExplicitURL)?s.ExplicitURL:["^.*"],c=d.some(function(e){return new RegExp(e,"i").test(o.PageProperties.hostname)});l=c?"onMatch":"onMismatch"}else l="onRule";if(l.length>0){var h=s.id,m=e.get(s,l);if(!e.isFunction(m))return t.errorM(p+".shouldInclude","Filters manager rule type "+h+" is not supporting action "+l),r;t.info(i,"AdStoresManager::FilterManager (tag ID: "+a+"): Activated filter type "+h+" action: "+l);var u=s.isAsync;!e.isArray(r)&&u&&(r=[]);var b=m(n);u?r.push(b):r=b}return r},!0);return e.isArray(l)?Promise.all(l).then(function(e){return Promise.resolve(e.every(Boolean)?n:null)}):l}return!0}},g}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common._AdPlaceHolder=function(){var e=Cbola.Enums,t=e.HeaderBiddingRequestStatus,i=e.AdTriggerTypes,o=Cbola.Common.Ads.Tags.Base,n=Cbola.Logger.getInstance(),r=Cbola.Logger.Colors,a=Cbola.Common.AnalyticsService,s=Cbola.Utils,l=Cbola._,d=Cbola.Common.Ads.Writers,c=8e3,h=function(e,t,n){this.banner=n,this.bannerTags=[],this.bannerCount=0,this.id=l.random(0,1e4),this.elemId=t,this.tagSizeHeight=l.get(e,"TagSizeHeight",0),this.tagSizeWidth=l.get(e,"TagSizeWidth",0),this.placeholderSizeName=o.getAdSizeName({AdWidth:this.tagSizeWidth,AdHeight:this.tagSizeHeight}),this.originalAdHeight=this.adHeight=o.translateSize(this.tagSizeWidth,this.tagSizeHeight).height,this.originalAdWidth=this.adWidth=o.translateSize(this.tagSizeWidth,this.tagSizeHeight).width,this.refreshOnMalwareCounter=0,this.displayCloseButton=!1,this.stopAllRefreshes=!1,this.adInjectionTriggerType=i.APPERANCE,this.banner.style["height"]=this.adHeight+"px",this.banner.style["width"]=this.adWidth+"px"};h.prototype.injectAd=function(e){if(l.isEmpty(e))return this;if(l.isNil(this.banner)&&(n.warnM("AdPlaceHolder.injectAd","AdPlaceHolder.injectAd error, failed banner initialization"),this.stopAllRefreshes=!0),this.stopAllRefreshes)return this;this.displayCloseButton=e.shouldShowX();var t=e instanceof Cbola.Common.Ads.Tags.A9?p:m,i=new t(this.elemId,e,this.bannerCount,this.Apperance,this.spot).init();return i.setDatasetObj({bannerId:this.bannerCount,elementId:this.elemId,apperance:this.Apperance}),l.isNil(this.spot)||i.setDatasetObj({spot:this.spot}),this.bannerCount+=1,l.isEmpty(this.bannerTags)?i.setAsFront():i.toFrontTimeOut=setTimeout(this.bringToFront.bind(this),c),this.bannerTags.push(i),i.attach(this.banner),i.injectTag(this.adInjectionTriggerType),this.bannerTagStyle(i),s.dataset(this.banner,"stamp",Date.now()),this},h.prototype.injectAdToExistingBanner=function(e,t){var i=l.find(this.bannerTags,function(e){return e.getId()===t});return"undefined"!=typeof i&&i.injectFallbackAd(e,this.adInjectionTriggerType),this},h.prototype.bannerTagStyle=function(e){return e.setStyle({"background-color":l.result(e,"adObj.isVideo",!1)?"black":"transparent",height:this.adHeight+"px",width:this.adWidth+"px"}),this},h.prototype.preventBannerReplacement=function(e){var t=l.remove(this.bannerTags,function(t){return t.getId()===e}).shift();return t?t.isFront()?(this.bannerTags.unshift(t),!1):(clearTimeout(t.toFrontTimeOut),t.detach(),!0):!1},h.prototype.bringToFront=function(){if(this.bannerTags.length>=2){var e=this.bannerTags.shift();this.banner&&(e instanceof p&&l.isFunction(e.onRemoval)&&e.onRemoval(),e.detach()),this.bannerTags[0].setAsFront()}return this},h.prototype.getInjectionType=function(){return this.adInjectionTriggerType},h.prototype.setAdInjectionType=function(e){return this.adInjectionTriggerType=e,this},h.prototype.isRefreshable=function(){return!this.stopAllRefreshes},h.prototype.stopRefresh=function(){this.stopAllRefreshes=!0},h.prototype.getAdObjByBannerId=function(e){var t=l.find(this.bannerTags,function(t){return t.getId()===e});return t?t.getAdObj():null},h.prototype.incrementMalwareRefresh=function(){return this.refreshOnMalwareCounter+=1,this},h.prototype.resetMalwareRefresh=function(){return this.refreshOnMalwareCounter=0,this},h.prototype.getMalwareRefreshCount=function(){return this.refreshOnMalwareCounter},h.prototype.getPlaceholderSizeName=function(){return this.placeholderSizeName};var m=function(){function e(t,i,o){_classCallCheck(this,e),this.elemId=t,this.adObj=i,this.id=o.toString(),this.attached=!1}return _createClass(e,[{key:"init",value:function(){return this.buildBannerTag()}},{key:"buildBannerTag",value:function(){var e=document.createElement("div");e.className="cbola-banner__tag cbola-banner__tag--back";var t=l.result(this.adObj,"getTranslatedSizes",{width:0,height:0}),i=t.width,o=t.height;return e.style["width"]=i+"px",e.style["height"]=o+"px",this.bannerTag=e,this}},{key:"attach",value:function(e){return e&&this.bannerTag&&!this.attached&&(e.appendChild(this.bannerTag),this.attached=!0,this.container=e),this}},{key:"detach",value:function(){return this.container&&this.bannerTag&&this.attached&&(this.container.removeChild(this.bannerTag),this.attached=!1,delete this.container),this}},{key:"injectTag",value:function(e){var o=this,r=this.adObj,s=r.getID();return d.Factory.getAsync(r.getTagExtractionType()).then(function(d){var c=d.name;try{d.write(o.bannerTag,l.result(r,"getTag",""),r);var h=l.result(r,"getCPM",null),m=null;e===i.WF_FALLBACK?m=t.LOW_TIER_FILLED:e!==i.INJECT_PSA&&(a.setAdsRequest(o.elemId,s,e,h),l.isNil(h)||(m=t.HIGH_TIER_FILLED)),l.isNil(m)||a.setHbBidRequestProto([{TagId:s,Cpm:h,Status:m,TimeInPocket:r.getResponseTimestamp()?Date.now()-r.getResponseTimestamp():0,TimeToRespond:r.getTimeToRespond(),AuctionCpm:r.auctionCPM||null,PocketCpm:r.pocketCPM||null,PocketUsageType:r.pocketUsageType,PocketSizeHT:r.pocketSizeHT,PocketSizeLT:r.pocketSizeLT}]),o.setDatasetObj({adId:s,cbolaTagId:s,cbolaMethod:c}),n.info(Cbola.Logger.Colors.PALE_YELLOW,"elementId: "+o.elemId+". adId: "+s+". Ad extraction type: "+r.getTagExtractionType()+", selected Extraction type: "+c)}catch(p){n.warnM("AdBannerTag.injectTag","AdBannerTag.injectTag error, extraction method: "+c),n.info(p)}}),this}},{key:"setDatasetObj",value:function(e){var t=this;return l.forEach(e,function(e,i){l.isNil(e)||s.dataset(t.bannerTag,i,e)}),this}},{key:"injectFallbackAd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.WF_FALLBACK;this.adObj=e,this.bannerTag.innerHTML="",this.injectTag(t)}},{key:"setAsFront",value:function(){this.bannerTag.classList.remove("cbola-banner__tag--back"),this.bannerTag.classList.add("cbola-banner__tag--front")}},{key:"setStyle",value:function(e){l.extend(this.bannerTag.style,e)}},{key:"getElement",value:function(){return this.bannerTag}},{key:"getId",value:function(){return this.id}},{key:"getAdObj",value:function(){return this.adObj}},{key:"isFront",value:function(){return this.bannerTag.classList.contains("cbola-banner__tag--front")}}]),e}(),p=function(e){function i(e,t,o,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;_classCallCheck(this,i);var a=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t,o));return a.slotID="div-gpt-ad"+a.elemId+"-"+n+"-"+r,a.slotName=t.getDFPSlotName(),a.bidsToReport=[],a}return _inherits(i,e),_createClass(i,[{key:"injectTag",value:function(e){var t=this;n.info(r.GREEN,"A9("+this.slotID+"): start injecting a9 tag"),this.initDFPInIframe().then(function(){return n.info(r.GREEN,"A9("+t.slotID+"): iframe loaded successfully, start bidding"),t.performAuction()}).then(function(e){return n.info(r.GREEN,"A9("+t.slotID+"): performed bidding to the following bidders: "+e.join(",")),t.injectBidsToGoogleTag(e)}).then(function(){n.info(r.GREEN,"A9("+t.slotID+"): bids injected to google tag manager and the following data sent as SetHbBidRequest: ",t.bidsToReport),t.reportToAnalytics(e)}).catch(function(e){return n.errorM("DFPBannerTag.injectTag","A9: DFPBannerTag.injectTag failed, error: ",e)})}},{key:"initDFPInIframe",value:function(){var e=this;return new Promise(function(t){var i=s.createAdIframe(l.result(e,"adObj.getTranslatedSizes",{})),o=Cbola.Templates.getCompiledTemplate("a9_dfp_banner.html"),n=e.adObj.getTranslatedSizes(),r=o({clientPath:Cbola.Env.clientPath,width:n.width,height:n.height,slotName:e.slotName,slotID:e.slotID});i.onload=t,e.bannerTag.appendChild(i);var a=i.contentDocument;a.open(),a.write(r),a.close(),e.iframeWindow=i.contentWindow})}},{key:"performAuction",value:function(){var e=[this.getA9AuctionPromise()],t=this.adObj.getPrebidBidsForAuction();return l.isEmpty(t)||e.push(this.getPrebidAuctionPromise(t)),Promise.all(e)}},{key:"getA9AuctionPromise",value:function(){var e=this;return new Promise(function(i){var o=e.adObj.getTranslatedSizes();e.iframeWindow.apstag.fetchBids({slots:[{slotID:e.slotID,slotName:e.slotName,sizes:[new e.iframeWindow.Array(o.width,o.height)]}],timeout:e.adObj.getAuctionTimeout()},function(){e.bidsToReport.push({TagId:e.adObj.getID(),Cpm:0,Status:t.SUCCESS}),i("a9")})})}},{key:"getPrebidAuctionPromise",value:function(e){var i=this;return new Promise(function(o){var n=e.map(function(e){return l.extend(e.getBidRequest(),{cbolaTagID:e.getID()})}),r=i.iframeWindow,a=r.Cbola_pbjs,s=i.adObj.getTranslatedSizes();a.que.push(function(){a.addAdUnits([{code:i.slotID,bids:n,sizes:[new r.Array(s.width,s.height)]}]),a.requestBids({timeout:i.adObj.getAuctionTimeout(),bidsBackHandler:function(n){for(var r=l.get(n,i.slotID+".bids",[]),a=function(e,t,o){e.manager.onAuctionResponse(o||0),i.bidsToReport.push({TagId:e.getID(),Cpm:o||0,Status:t})};r.length>0;)for(var s=r.shift(),d=s.cpm,c=s.bidder,h=0;h<e.length;h++){var m=e[h];if(c===m.getBidder()){a(m,t.SUCCESS,d),e.splice(h,1);break}}l.forEach(e,function(e){return a(e,t.TIMEOUT,0)}),o("prebid")}})})})}},{key:"injectBidsToGoogleTag",value:function(e){var t=this;return new Promise(function(i){t.iframeWindow.googletag.cmd.push(function(){this.apstag.setDisplayBids(),e.some(function(e){return"prebid"===e})&&this.Cbola_pbjs.setTargetingForGPTAsync(),this.googletag.pubads().refresh(),i()}.bind(t.iframeWindow))})}},{key:"reportToAnalytics",value:function(e){this.bidsToReport.length>0&&(this.bidsToReport.push({TagId:this.bidsToReport[0].TagId,Status:t.REQUEST_MADE}),a.setHbBidRequestProto(this.bidsToReport),a.setAdsRequest(this.elemId,this.adObj.getID(),e))}},{key:"onRemoval",value:function(){this.iframeWindow.googletag.destroySlots()}}]),i}(m);return h}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common._AdTriggerBase=function(){var e=Cbola.Logger.getInstance(),t=Cbola.Utils,i=Cbola._,o=Cbola.Env,n=Cbola.EventBus,r=Cbola.Common.HasViewability.prototype,a=Cbola.Common.UserService,s=function(e,t){this.elemId=t.elementId,this.Apperance=e.Apperance,this.closeBehaviors=i.get(e,"CloseBehaviors")||[],this.openBehaviors=i.get(e,"OpenBehaviors")||[],this.refreshInterval=i.get(e,"RefreshInterval"),this.layerType=t.layerType,this.adStructureNode=Cbola.Templates.createFragmentFromTemplate("ad_banner_structure.html",{elemId:this.elemId,apperance:this.Apperance,advertisement:a.vocabulary("advertisement"),showAdvertisementTitle:t.showAdvertisementTitle}).querySelector(".cbola-banner-structure"),this.closeTriggerButton=this.adStructureNode.querySelector(".hide-ad-button"),this.banner=this.adStructureNode.querySelector(".cbola-banner"),this.containerWrapper=t.containerWrapperNode,this.appendTo=this.containerWrapper,this.triggerStructureAppended=!1,this.initialWrapperHeight=this.wrapperHeight=t.initialWrapperHeight,Cbola.Common._AdPlaceHolder.call(this,e,this.elemId,this.banner),this.styleProperties={},this.styleClassName="cbolaApperanceStyle_"+this.elemId+"_"+e.Apperance,this.styleElements=[],this.open=!1,this.animationEnabled=t.animationEnabled,this.viewable=!1,this.hasScaled=!1};return s.prototype=Object.create(Cbola.Common._AdPlaceHolder.prototype),i.extend(s.prototype,r),s.constructor=s,s.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||(this.appendTo.appendChild(this.adStructureNode),this.triggerStructureAppended=!0),this},s.prototype.appendTriggerStyle=function(){var e="cbolaApperanceStyle_"+this.Apperance+"_"+this.elemId,n=i.reduce(this.styleProperties,function(e,t,i){return""+e+i+": "+t+";"},"");n="."+e+"{"+n+"}";var r=t.injectStyle(document,n);if(r.className=this.styleClassName,this.styleElements.push(r),o.topWindow!==window){var a=t.injectStyle(o.topWindow.document,n);a.className=this.styleClassName,this.styleElements.push(a)}return this.adStructureNode&&this.adStructureNode.classList.add(e),this},s.prototype.closeAnimation=function(){return this.open?(this.adStructureNode.style["margin"]="0",this.setClose(),this):this},s.prototype.removeStyle=function(){var t=this;return setTimeout(function(){try{t.styleElements.forEach(function(e,t,i){e.parentNode.removeChild(e),delete i[t]}),t.styleElements=[]}catch(i){e.info("Failed to remove style for apperance: "+t.Apperance)}},1e3),this},s.prototype.removeStructure=function(){var t=this;return setTimeout(function(){try{t.adStructureNode.parentNode.removeChild(t.adStructureNode),delete t.adStructureNode,delete t.banner,delete t.closeTriggerButton,delete t.containerWrapper,t.triggerStructureAppended=!1}catch(i){e.info("Failed to delete DOM nodes pointers for apperance: "+t.Apperance)}},1e3),this},s.prototype.toggleXButton=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.displayCloseButton;return i.isNil(this.closeTriggerButton)?this:(e===!0&&this.closeTriggerButton.classList.contains("cbola-fade-out")?this.closeTriggerButton.classList.remove("cbola-fade-out"):e!==!1||this.closeTriggerButton.classList.contains("cbola-fade-out")||this.closeTriggerButton.classList.add("cbola-fade-out"),this)},s.prototype.triggerElementsStyle=function(){return this},s.prototype.adScale=function(o){var n=o/this.adWidth,r=this.adHeight;return i.isNil(o)||0===o?this:n>=1?(this.hasScaled&&(t.transform(this.banner,"scale(1)"),this.hasScaled=!1,this.adStructureNode&&(this.adStructureNode.style["width"]=this.originalAdWidth+"px",this.adStructureNode.style["height"]=this.originalAdHeight+"px")),this):(i.extend(this.banner.style,{"-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0","-ms-transform-origin":"0 0","-o-transform-origin":"0 0","transform-origin":"0 0"}),t.transform(this.banner,"scale("+n+")"),this.hasScaled=!0,this.adHeight=this.originalAdHeight*n,this.adStructureNode&&(this.adStructureNode.style["width"]=this.originalAdWidth*n+"px",this.adStructureNode.style["height"]=this.adHeight+"px"),r-=this.adHeight,e.info("Trigger with apperance: "+this.Apperance+" for element ID: "+this.elemId+" in scale: "+n),this.containerWrapper&&(this.wrapperHeight-=r,this.containerWrapper.style["height"]=this.wrapperHeight+"px"),this)},s.prototype.isOpen=function(){return this.open},s.prototype.isClose=function(){return!this.open},s.prototype.setOpen=function(){return this.open=!0,this},s.prototype.setClose=function(){return this.open=!1,this},s.prototype.isAppended=function(){return this.triggerStructureAppended},s.prototype.init=function(){return r.init.call(this),this.elementId=this.elemId+"_"+this.Apperance,i.isNil(this.spot)||(this.elementId+="_"+this.spot),this.viewableEvent=""+n.Events.TRIGGER_IS_VIEWABLE+this.elementId,this.element=this.adStructureNode,this},s}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerAboveMobile=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layer=Cbola.InContent.Manager.getLayerByElementId(this.elemId),this.layer?this.appendTo=this.layer.topAdPlaceHolder:Cbola.Logger.getInstance().errorM("AboveMobile.constructor","AdTriggerAboveMobile couldn't get layer object"),this.styleProperties={display:"block!important",opacity:"0","background-color":"transparent",position:"relative","margin-left":"auto","margin-right":"auto"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return e.extend(this.banner.style,{"float":"none","background-color":"transparent"}),setTimeout(function(){t.toggleXButton(!1),e.extend(t.adStructureNode.style,{"margin-top":"0","margin-bottom":"2px",height:t.adHeight,opacity:"1"}),t.layer.fixAllItemsHeight()},0),this},t.prototype.bannerTagStyle=function(t){return this.open?(t.setStyle({"background-color":e.result(t,"adObj.AdType",0)===Cbola.Config.adTypeVideo?"black":"transparent",margin:"0 auto",height:this.adHeight+"px",width:this.adWidth+"px"}),this.setClose(),this):this},t.prototype.adScale=function(){return this},t.prototype.closeAnimation=function(){return this},t.prototype.removeStyle=function(){return this},t.prototype.removeStructure=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerAbovePushContent=function(){var e=Cbola._,t=Cbola.Config,i=Cbola.InContent.Layers.Base.prototype,o=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.appendTo=this.containerWrapper.children[0],this.styleProperties={display:"block!important",width:"100%",opacity:"0","background-color":"transparent",position:"relative",margin:"0 auto -"+this.adHeight+"px","margin-left":"auto","margin-right":"auto","z-index":"-1","-webkit-transition":this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none"}};return o.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),o.constructor=o,o.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||(Cbola.Utils.before(this.appendTo,this.adStructureNode),this.triggerStructureAppended=!0),this},o.prototype.triggerElementsStyle=function(){var o=this,n=i.isInContent.call({type:this.layerType})?t.adBelowInContentExtraMargin:i.isSidebarSlideshow.call({type:this.layerType})?t.adBelowSlideShowMargin:t.adBelowSideBarMargin;return this.wrapperHeight=this.initialWrapperHeight+this.adHeight+n,e.extend(this.banner.style,{"float":"none","background-color":"transparent"}),setTimeout(function(){o.toggleXButton(!1),e.extend(o.adStructureNode.style,{"margin-bottom":n+"px",height:o.adHeight,opacity:"1"}),setTimeout(function(){o.adStructureNode.style["z-index"]=10},600)},0),this},o.prototype.closeAnimation=function(){return this.isClose()||(this.adStructureNode.style["z-index"]="-1",this.adStructureNode.style["margin-bottom"]="-"+this.adHeight+"px",this.setClose()),this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowCoverContent=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:-1*(this.initialWrapperHeight-1)+"px",display:"block!important",opacity:"0","-webkit-transition":"margin 0.6s ease,height 0.6s ease",transition:"margin 0.6s ease,height 0.6s ease","z-index":"-1","background-color":"transparent",width:this.adWidth+"px","max-height":this.initialWrapperHeight+"px",position:"relative","margin-left":"auto","margin-right":"auto",height:this.adHeight+"px"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return setTimeout(function(){t.toggleXButton(!0),t.banner.style.backgroundColor="transparent",e.extend(t.adStructureNode.style,{"margin-top":t.initialWrapperHeight+"px",opacity:"1"})},0),this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowMobile=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layer=Cbola.InContent.Manager.getLayerByElementId(this.elemId),this.layer?this.appendTo=this.layer.bottomAdPlaceHolder:Cbola.Logger.getInstance().errorM("AdTriggerBelowMobile.constructor","AdTriggerBelowMobile couldn't get layer object"),this.styleProperties={display:"block!important",opacity:"0","background-color":"transparent",position:"relative","margin-left":"auto","margin-right":"auto"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return e.extend(this.banner.style,{"background-color":"transparent"}),setTimeout(function(){t.toggleXButton(!1),e.extend(t.adStructureNode.style,{"margin-top":"0","margin-bottom":"auto",height:t.adHeight,opacity:"1"}),t.layer.fixAllItemsHeight()},0),this},t.prototype.bannerTagStyle=function(t){return t.setStyle({"background-color":e.result(t,"adObj.AdType",0)===Cbola.Config.adTypeVideo?"black":"transparent",margin:"0 auto",height:this.adHeight+"px",width:this.adWidth+"px"}),this},t.prototype.adScale=function(){return this},t.prototype.closeAnimation=function(){return this},t.prototype.removeStyle=function(){return this},t.prototype.removeStructure=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowPushContent=function(){var e=Cbola._,t=Cbola.Config,i=Cbola.InContent.Layers.Base.prototype,o=function(t,i){var o=this;Cbola.Common._AdTriggerBase.call(this,t,i),this.topStartingPoint=20,this.styleProperties={display:"block!important",width:"100%",height:this.adHeight+"px",opacity:"0","background-color":"transparent",position:"absolute",top:this.topStartingPoint+"px",left:"0","z-index":"-1","-webkit-transition":this.animationEnabled?"margin 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease":"none"},window.addEventListener("resize",e.debounce(function(){!e.isNil(o.containerWrapper)&&o.isOpen()&&o.adScale(o.containerWrapper.offsetWidth)},150,{leading:!1,maxWait:500,trailing:!0}))};return o.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),o.constructor=o,o.prototype.triggerElementsStyle=function(){var e=this,o=i.isInContent.call({type:this.layerType})?t.adBelowInContentExtraMargin:i.isSidebarSlideshow.call({type:this.layerType})||i.isStoriesSlideshow.call({type:this.layerType})?t.adBelowSlideShowMargin:t.adBelowSideBarMargin;return this.wrapperHeight=this.initialWrapperHeight+this.adHeight+o,this.banner.style["float"]="none",this.banner.style["background-color"]="transparent",this.toggleXButton(i.isInContent.call({type:this.layerType})&&this.displayCloseButton),setTimeout(function(){e.adStructureNode.style["margin-top"]=o+e.initialWrapperHeight-e.topStartingPoint+"px",e.adStructureNode.style["opacity"]="1"},0),setTimeout(function(){e.adStructureNode.style["z-index"]=10},1e3),this},o.prototype.closeAnimation=function(){return this.isClose()||(this.adStructureNode.style["z-index"]="-1",this.adStructureNode.style["margin"]=this.topStartingPoint+"px",this.setClose()),
this},o.prototype.injectAd=function(){for(var e=arguments.length,t=Array(e),o=0;e>o;o++)t[o]=arguments[o];return Cbola.Common._AdPlaceHolder.prototype.injectAd.apply(this,t),this.toggleXButton(i.isInContent.call({type:this.layerType})&&this.displayCloseButton),this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerCenterInsideUnit=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:-1*this.adHeight+"px",display:"block!important","-webkit-transition":this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none","z-index":"6","background-color":"rgba(255, 255, 255, 0.9)",width:"100%"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return this.triggerHeight=this.adHeight,e.extend(this.banner.style,{"float":"none","background-color":"transparent"}),setTimeout(function(){t.toggleXButton(!0),e.extend(t.adStructureNode.style,{margin:"auto",height:t.initialWrapperHeight,"margin-top":t.initialWrapperHeight+"px"})},0),this},t.prototype.bannerTagStyle=function(e){return e.setStyle({"background-color":"black",height:this.adHeight+"px",width:this.adWidth+"px"}),this},t.prototype.adScale=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerFixedFooter=function(){var e=Cbola._,t=Cbola.Env,i=function(i,o){Cbola.Common._AdTriggerBase.call(this,i,o),this.appendTo=t.topWindow.document.body,this.adStructureNode.id="cbola-footer-banner",this.styleProperties={position:"fixed",display:"block",top:"auto",left:"0",bottom:-1*this.adHeight+"px","z-index":"2147483647",height:this.adHeight+"px","-webkit-transition":this.animationEnabled?"bottom 0.9s ease":"none",transition:this.animationEnabled?"bottom 0.9s ease":"none"},e.isEmpty(o.footerBackground)?(this.styleProperties["width"]=this.adWidth+"px",this.styleProperties["margin"]="0 auto",this.styleProperties["left"]="0",this.styleProperties["right"]="0"):(this.styleProperties["width"]="100%",this.styleProperties["background-color"]=o.footerBackground)};return i.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),i.constructor=i,i.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||(this.appendTo.appendChild(this.adStructureNode),this.triggerStructureAppended=!0),this},i.prototype.triggerElementsStyle=function(){var t=this;return setTimeout(function(){t.toggleXButton(!0),t.banner.style.backgroundColor="transparent",e.extend(t.adStructureNode.style,{opacity:"1",height:t.adHeight,bottom:"0"})},0),this},i.prototype.adScale=function(){return this},i.prototype.closeAnimation=function(){return this.adStructureNode.style["bottom"]=-1*this.adHeight+"px",this.setClose(),this},i.prototype.isViewable=function(){return!0},i.prototype.init=function(){return this},i.prototype.updateViewability=function(){return this},i}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInItem=function(){var e=Cbola.Utils,t=Cbola._,i=Cbola.InContent.Layers.Base.prototype,o=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.element=this.adStructureNode=this.adStructureNode=this.banner=this.closeTriggerButton=this.title=this.containerWrapper=null,this.layer=Cbola.InContent.Manager.getLayerByElementId(this.elemId),this.spot=e.currentSpot,this.isCoveringAd=!1,this.hideButtons=!1,this.inItemDuration=0};return o.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),o.constructor=o,o.prototype.appendTriggerStructure=function(){return this.banner=this.layer.injectAdAfterItem({adSpot:this.spot,isCover:this.isCoveringAd,hideButtons:this.hideButtons,inItemDuration:this.inItemDuration}),this.element=this.banner.parentElement,this.triggerStructureAppended=!0,this},o.prototype.injectAd=function(){for(var t=arguments.length,i=Array(t),o=0;t>o;o++)i[o]=arguments[o];return Cbola.Common._AdPlaceHolder.prototype.injectAd.apply(this,i),e.dataset(this.banner,"adWidth",this.adWidth),e.dataset(this.banner,"adHeight",this.adHeight),this},o.prototype.triggerElementsStyle=function(){return this},o.prototype.bannerTagStyle=function(){return this},o.prototype.adScale=function(){return t.isFunction(this.layer.scaleInItemAd)?this.layer.scaleInItemAd(this.spot):i.isPlaybox.call({type:this.layerType})||Cbola.Common._AdTriggerBase.prototype.adScale.call(this,this.banner.clientWidth),this},o.prototype.closeAnimation=function(){return this},o.prototype.removeStyle=function(){return this},o.prototype.removeStructure=function(){return t.isFunction(this.layer.removeInItemAd)&&this.layer.removeInItemAd(this.spot),this},o}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AdTriggerInItemCover=function(){var e=Cbola._,t=Cbola.Common.AdTriggerInItem,i=function(i,o){t.call(this,i,o),this.isCoveringAd=!0,this.inItemDuration=e.get(i,"SpotsInterval",10)};return i.prototype=Object.create(t.prototype),i.constructor=i,i}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInItemMobile=function(){var e=Cbola.TaskManager,t=Cbola._,i=function(e,t){Cbola.Common.AdTriggerInItem.call(this,e,t)};return i.prototype=Object.create(Cbola.Common.AdTriggerInItem.prototype),i.constructor=i,i.prototype.injectAd=function(){for(var i=arguments.length,o=Array(i),n=0;i>n;n++)o[n]=arguments[n];return Cbola.Common.AdTriggerInItem.prototype.injectAd.apply(this,o),t.isFunction(this.layer.fixAllAdItemsStyle)&&e.addExpBackoffTask({fn:this.layer.fixAllAdItemsStyle.bind(this.layer)}),this},i.prototype.adScale=function(){return this},i}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AdTriggerInItemNoButtons=function(){var e=Cbola._,t=Cbola.Common.AdTriggerInItem,i=function(i,o){t.call(this,i,o),this.hideButtons=!0,this.inItemDuration=e.get(i,"SpotsInterval")||30};return i.prototype=Object.create(t.prototype),i.constructor=i,i}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AdTriggerInItemWithDuration=function(){var e=Cbola,t=e._,i=Cbola.Common.AdTriggerInItem;return function(e){function i(e,o){_classCallCheck(this,i);var n=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,o));return n.inItemDuration=t.get(e,"SpotsInterval",10),n}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInnerBanner=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layerType=t.layerType;var i=Cbola.InContent.Manager.getLayerByElementId(this.elemId);this.appendTo=i.boxElem.querySelector(".cbola-slider-ad-placeholder"),Cbola.Config.layouts.sideBars.teaserBanner.indexOf(this.layerType)>-1?this.styleProperties={"box-sizing":"border-box","border-right":"1px solid rgba(171, 171, 171, 0.25)","border-left":"1px solid rgba(171, 171, 171, 0.25)",height:"250px",top:"0px",opacity:"0","margin-left":"-1px",width:"300px"}:this.styleProperties={width:"300px",opacity:"0","box-sizing":"content-box","padding-top":"0px","padding-left":"0px"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return setTimeout(function(){t.toggleXButton(!1),t.banner.style.backgroundColor="transparent",e.extend(t.adStructureNode.style,{opacity:"1",height:t.adHeight})},0),this},t.prototype.adScale=function(){return this},t.prototype.closeAnimation=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerLeftInsideUnit=function(){var e=Cbola.Common._AdTriggerBase,t=Cbola.EventBus,i=Cbola.InContent.Layers.Base.prototype,o=function(t,o){e.call(this,t,o),this.layer=Cbola.InContent.Manager.getLayerByElementId(this.elemId),i.isPlaybox.call({type:this.layerType})&&(this.appendTo=this.layer.boxElem,this.inSlideShow=!0),this.styleProperties={top:"0",left:-1*this.adWidth+"px",display:"block!important","-webkit-transition":this.animationEnabled?"margin 0.6s ease, height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease, height 0.6s ease":"none","z-index":"6","background-color":"transparent",width:this.adWidth+"px",height:this.adHeight+"px",overflow:"hidden"}};return o.prototype=Object.create(e.prototype),o.constructor=o,o.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.inSlideShow?setTimeout(function(){return e.toggleXButton(!0)},2500):e.toggleXButton(!1),e.adStructureNode.style["margin"]="auto",e.adStructureNode.style["margin-left"]=e.adWidth+"px",e.adStructureNode.style["height"]=e.initialWrapperHeight+"px"},0),t.fire(""+t.Events.COVERING_TRIGGER_ON+this.elemId),this},o.prototype.closeAnimation=function(i){return e.prototype.closeAnimation.call(this),t.fire(""+t.Events.COVERING_TRIGGER_OFF+this.elemId,{byClick:i}),this},o.prototype.adScale=function(){return this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerLeftOfUnit=function(){var e=Cbola.Common._AdTriggerBase,t=Cbola.EventBus,i=Cbola._,o=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:Cbola.Config.layouts.inContent.facts.indexOf(this.layerType)>-1?this.initialWrapperHeight-this.adHeight+"px":"0",left:-1*(this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin)+"px",right:"auto",display:"block!important","z-index":"6","background-color":"transparent",width:this.adWidth+"px"}};return o.prototype=Object.create(e.prototype),o.constructor=o,o.prototype.appendTriggerStructure=function(){return e.prototype.appendTriggerStructure.call(this),t.fire(t.Events.RESIZE_ON_AD+this.elemId),this},o.prototype.triggerElementsStyle=function(){var e=this;return this.wrapperHeight=this.adHeight+Cbola.Config.adTitleStructureTriviaHeight,this.wrapperMarginLeft=this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin+"px",setTimeout(function(){e.toggleXButton(),e.banner.style.backgroundColor="transparent",i.extend(e.adStructureNode.style,{margin:"auto",height:e.adHeight})},0),this},o.prototype.adScale=function(){return this},o.prototype.removeStructure=function(){return e.prototype.removeStructure.call(this),t.fire(t.Events.RESIZE_ON_AD+this.elemId),this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerLeftPopOnUnit=function(){var e=Cbola.Common._AdTriggerBase,t=Cbola.EventBus,i=Cbola.InContent.Layers.Base.prototype,o=function(t,o){e.call(this,t,o),this.layer=Cbola.InContent.Manager.getLayerByElementId(this.elemId),i.isPlaybox.call({type:this.layerType})&&(this.appendTo=this.layer.view.itemsBoxElem,this.inSlideShow=!0),this.styleProperties={top:"0",left:"0",display:"none","z-index":"6","background-color":this.inSlideShow?"#fff":"transparent",width:this.adWidth+"px",height:this.adHeight+"px",overflow:"hidden"}};return o.prototype=Object.create(e.prototype),o.constructor=o,o.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.toggleXButton(!0)},2500),this.adStructureNode.style["display"]="block",t.fire(t.Events.COVERING_TRIGGER_ON+this.elemId),this},o.prototype.closeAnimation=function(){return this.isClose()?this:(this.adStructureNode.style["display"]="none",this.setClose(),this)},o.prototype.removeStructure=function(){return e.prototype.removeStructure.call(this),this.inSlideShow&&t.fire(t.Events.COVERING_TRIGGER_OFF+this.elemId),this},o.prototype.adScale=function(){return this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerRightInsideUnit=function(){var e=function(e,t){Cbola.Common.AdTriggerLeftInsideUnit.call(this,e,t),this.styleProperties={top:"0",right:-1*this.adWidth+"px",display:"block!important","-webkit-transition":this.animationEnabled?"transform 0.6s ease, height 0.6s ease":"none",transition:this.animationEnabled?"transform 0.6s ease, height 0.6s ease":"none","z-index":"6","background-color":"transparent",width:this.adWidth+"px",height:this.adHeight+"px",overflow:"hidden"}};return e.prototype=Object.create(Cbola.Common.AdTriggerLeftInsideUnit.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.inSlideShow?setTimeout(function(){e.toggleXButton(!0)},2500):e.toggleXButton(!1),e.banner.style["background-color"]="transparent",e.adStructureNode.style["transform"]="translateX(-"+e.adWidth+"px)",e.adStructureNode.style["height"]=e.initialWrapperHeight+"px"},0),this},e.prototype.closeAnimation=function(){return this.isClose()?this:(this.adStructureNode.style["transform"]="translateX(0)",this.setClose(),this)},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerRightOfUnit=function(){var e=Cbola._,t=Cbola.Common._AdTriggerBase,i=Cbola.EventBus,o=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:Cbola.Config.layouts.inContent.facts.indexOf(this.layerType)>-1?this.initialWrapperHeight-this.adHeight+"px":"0",right:-1*(this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin)+"px",display:"block",left:"inherit","z-index":"6","background-color":"transparent",width:this.adWidth+"px"}};return o.prototype=Object.create(t.prototype),o.constructor=o,o.prototype.appendTriggerStructure=function(){return t.prototype.appendTriggerStructure.call(this),i.fire(i.Events.RESIZE_ON_AD+this.elemId),this},o.prototype.triggerElementsStyle=function(){var t=this;return this.wrapperHeight=this.adHeight+Cbola.Config.adTitleStructureTriviaHeight,this.wrapperMarginRight=this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin+"px",setTimeout(function(){t.toggleXButton(),t.banner.style.backgroundColor="transparent",e.extend(t.adStructureNode.style,{margin:"auto",height:t.adHeight+"px"})},0),this},o.prototype.adScale=function(){return this},o.prototype.removeStructure=function(){return t.prototype.removeStructure.call(this),i.fire(i.Events.RESIZE_ON_AD+this.elemId),this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggersManager=function(){var t=Cbola.Logger.getInstance(),i=Cbola.Logger.Colors.PALE_YELLOW,o=Cbola.Enums,n=o.RefreshTypes,r=o.AdOpenBehaviors,a=o.AdCloseBehaviors,s=o.AdTriggerTypes,l=o.HeaderBiddingRequestStatus,d=Cbola.Common.AnalyticsService,c=Cbola.EventBus,h=c.Events,m=Cbola.Env,p=Cbola._,u=Cbola.Config,b=Cbola.Utils,f=Cbola.TaskManager,g=Cbola.Common.UserService,y=Cbola.Common.ConsentProviders.Manager,w=function(e,t){return""+e.Apperance+(e instanceof Cbola.Common.AdTriggerInItem?"_"+e.spot:"")+(t?"."+t:"")},v=1,C=50,_="AdTriggersManager",I={1:{TriggerConstructor:Cbola.Common.AdTriggerLeftInsideUnit,requiredContainerOverflow:"hidden",collidesWith:[2,5,12]},2:{TriggerConstructor:Cbola.Common.AdTriggerCenterInsideUnit,requiredContainerOverflow:"hidden",collidesWith:[1,3,5,12]},3:{TriggerConstructor:Cbola.Common.AdTriggerBelowCoverContent,requiredContainerOverflow:"visible",collidesWith:[2]},4:{TriggerConstructor:Cbola.Common.AdTriggerBelowPushContent,collidesWith:[9]},5:{TriggerConstructor:Cbola.Common.AdTriggerRightInsideUnit,requiredContainerOverflow:"hidden",collidesWith:[1,2,12]},6:{TriggerConstructor:Cbola.Common.AdTriggerRightOfUnit,requiredContainerOverflow:"visible",collidesWith:[7]},7:{TriggerConstructor:Cbola.Common.AdTriggerLeftOfUnit,requiredContainerOverflow:"visible",collidesWith:[6]},8:{TriggerConstructor:Cbola.Common.AdTriggerInnerBanner},9:{TriggerConstructor:Cbola.Common.AdTriggerAbovePushContent,requiredContainerOverflow:"hidden",collidesWith:[4]},12:{TriggerConstructor:Cbola.Common.AdTriggerLeftPopOnUnit,requiredContainerOverflow:"hidden",collidesWith:[1,2,5]},20:{TriggerConstructor:Cbola.Common.AdTriggerInItem},21:{TriggerConstructor:Cbola.Common.AdTriggerInItemCover,requiredContainerOverflow:"hidden"},22:{TriggerConstructor:Cbola.Common.AdTriggerInItemNoButtons},23:{TriggerConstructor:Cbola.Common.AdTriggerInItemWithDuration},200:{TriggerConstructor:Cbola.Common.AdTriggerInItemMobile},204:{TriggerConstructor:Cbola.Common.AdTriggerBelowMobile},209:{TriggerConstructor:Cbola.Common.AdTriggerAboveMobile},300:{TriggerConstructor:Cbola.Common.AdTriggerFixedFooter}},x={OPEN:"open",CLOSE:"close",REFRESH_CLICK:"refresh_on_click",REFRESH_VIEWABILITY:"refresh_on_viewability",REMOVE:"remove"},E=function(e){var t=this;this.layerType=e.layerType,this.wid=e.widgetId,this.elemId=e.elementId,this.FREEZE=!1,this.delayFromLastScroll=0,this.isReady=!1,this.resolvers=[],this.pendingTriggers=[],this.activeTriggers=[],this.finishedTriggers=[],this.footerBackground=e.footerBackground,this.handlers={};var i=""+h.ADS_STORES_MANAGER_READY+this.wid,n={adsStoreReadyEventFired:!1,layerReadyEventFired:!1,pageLoaded:u.abTestId!==o.AbTests.ADS_ON_PAGE_LOAD||m.topWindow!==window.top||"complete"===m.topWindow.document.readyState},r=function(){p.some(n,function(e){return!e})||t.start()},a=function(e){e.type===t.layerType&&e.elementId===t.elemId&&(c.removeEventListener("LayerReadyEvent",t,!1),n.layerReadyEventFired=!0,t.layer=e,r())},s=function(e){c.removeEventListener(i,t,!1),n.adsStoreReadyEventFired=!0,t.adsStore=e,t.adsData=e.getAdsData(),r()},l=function(){m.topWindow.removeEventListener("load",t,!1),n.pageLoaded=!0,r()};this.handleEvent=function(e){switch(e.type){case i:s(e.detail);break;case h.LAYER_READY:a(e.detail);break;case"load":l()}},c.addEventListener(i,this,!1),c.addEventListener(h.LAYER_READY,this,!1),n.pageLoaded||m.topWindow.addEventListener("load",this,!1)};return E.prototype.start=function(){var e=this;this.containerBox=this.layer.boxElem,this.containerWrapper=this.layer.container,this.initialWrapperHeight=this.layer.options.layerHeight||this.containerBox.getBoundingClientRect().height,this.initialWrapperMarginLeft=this.containerWrapper.style["margin-left"],this.initialWrapperMarginRight=this.containerWrapper.style["margin-right"],this.initTriggers().initConditionedRefreshData(),p.isEmpty(this.pendingTriggers)||112842!==m.domainId?p.isEmpty(this.pendingTriggers)?t.errorM(_+".start",_+" failed to start, no triggers initialized."):(y.hasConsent().then(b.noOp).catch(this.endAdsProcess.bind(this)),this.startPendingTriggers(!0)):g.isEUUserAsync().then(function(e){return e?y.hasConsent():Promise.resolve()}).then(function(){e.startPendingTriggers(!0)}).catch(this.endAdsProcess.bind(this))},E.prototype.initTriggers=function(){var e=this,t=p.get(this.adsData,"TriggerSettings",[]);return p.forEach(t,function(t){var i=p.extend({},t);!p.isEmpty(i.OpenBehaviors)&&e.translateApperance(i)&&(300!==i.Apperance||m.topWindow===window.top&&!m.topWindow.document.querySelector("#cbola-footer-banner"))&&(200===i.Apperance||20===i.Apperance||21===i.Apperance||22===i.Apperance||23===i.Apperance?p.isEmpty(i.Spots)||(i.Spots.sort(function(e,t){return e-t}).filter(function(e,t,i){return t===i.indexOf(e)}),i.OpenBehaviors.splice(1,i.OpenBehaviors.length-1),p.forEach(i.Spots,function(t){var o={currentSpot:t};p.extend(o,i),o.OpenBehaviors=i.OpenBehaviors.slice(0),o.CloseBehaviors=[],e.pushToPendingTriggers(o)})):e.pushToPendingTriggers(i))}),this},E.prototype.translateApperance=function(e){var o=this,n=p.get(u.triggersDictionary,""+e.Apperance);return n&&n.supportedLayers&&n.supportedLayers.some(function(e){return e===o.layerType})?(e.Apperance=p.get(n,"translatedTo",e.Apperance),!0):(t.info(i,_+".translateApperance could not translate appropriate trigger apperance #"+e.Apperance+" for element Id: "+this.elemId),!1)},E.prototype.pushToPendingTriggers=function(e){if("undefined"!=typeof I[e.Apperance]){var t=I[e.Apperance].TriggerConstructor;if(!t)return this;var i=new t(e,{elementId:this.elemId,containerWrapperNode:this.containerWrapper,initialWrapperHeight:this.initialWrapperHeight,layerType:this.layerType,footerBackground:this.footerBackground,animationEnabled:this.layer.options.ShowAdAnimation,showAdvertisementTitle:this.layer.options.ShowAdvertisementTitleOnAds}).init();i.refreshFixedTime=this.getRefreshFixedTime(),i.triggerOverflow=I[e.Apperance].requiredContainerOverflow,this.pendingTriggers.push(i)}return this},E.prototype.initConditionedRefreshData=function(){var e=this.getDelayLastScroll();return(b.isWindowTopSupported()||!b.isInIframe()&&e>0)&&(this.prevWindowScroll=m.topWindow.scrollY||m.topWindow.pageYOffset,this.testConditionedRefreshData(Date.now()-e)),this},E.prototype.testConditionedRefreshData=function(e){var t=this,i=this.getDelayLastScroll(),o=m.topWindow.scrollY||m.topWindow.pageYOffset,n=Math.abs(o-this.prevWindowScroll);return n>C?(this.delayFromLastScroll=i,this.prevWindowScroll=o,requestAnimationFrame(function(){return t.testConditionedRefreshData(Date.now())})):(this.delayFromLastScroll=i-(Date.now()-e),requestAnimationFrame(function(){return t.testConditionedRefreshData(e)})),this},E.prototype.startPendingTriggers=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;if(t){var i=""+h.ADS_STORES_MANGER_ADDED_SIZES+this.wid,o=function(){c.removeEventListener(i,o),this.startPendingTriggers(!1)}.bind(this);c.addEventListener(i,o)}var n=this.pendingTriggers.slice(0);return n.sort(function(e,t){return e.Apperance!==t.Apperance?e.Apperance-t.Apperance:p.isNil(e.spot)||p.isNil(t.spot)?0:e.spot-t.spot}),p.forEach(n,function(t){e.beforeActivationValidation(t)&&e.pullTriggerFromArray(e.pendingTriggers,t,"Apperance").pushTriggerOnce(e.activeTriggers,t,"Apperance").initTriggerOpening(t)}),this.isReady||this.testReadiness(),this},E.prototype.testReadiness=function(){for(var e=0;e<this.activeTriggers.length;e++)if("undefined"==typeof this.activeTriggers[e].currentOpenBehavior||!this.activeTriggers[e].isAppended()&&this.activeTriggers[e].currentOpenBehavior.Type===r.TIMER&&0===this.activeTriggers[e].currentOpenBehavior.Delay)return void f.addTask(this.testReadiness,[],this,"AdTriggersManager.testReadiness");this.isReady=!0,p.forEach(this.resolvers,function(e){p.isFunction(e)&&e()})},E.prototype.beforeActivationValidation=function(e){return!this.isActive(e,"Apperance")&&!this.isOverflowCollision(e.Apperance)&&!this.isApperanceCollision(e.Apperance)&&this.adsStore.hasAvailableAdsForSize(e.getPlaceholderSizeName())},E.prototype.initTriggerOpening=function(e){var o=e.openBehaviors.shift();if(p.isNil(o))return t.info(i,_+".initTriggerOpening haven't found openBehavior - closing apperance: "+e.Apperance),this.removeTrigger(e);if(e.isOpen())return this;if(e.setOpen(),e.currentOpenBehavior=o,o.Type===r.TIMER||o.Type===r.VIEWABLE&&this.layer.isViewable()||o.Type===r.PAGE_LOAD&&b.isPageReady())return t.info(_+".initTriggerOpening sent apperance: "+e.Apperance+" to open by timer"),this.openTriggerByTimer(e);var n=void 0,a=void 0;switch(o.Type){case r.VIEWABLE:n=[c],a=this.layer.viewableEvent;break;case r.HOVER_ON_UNIT:n=[this.containerBox],a="hover";break;case r.ENGAGEMENT:n=this.layer.boxElem.querySelectorAll(".cbola-refresh-click-trigger"),a="click";break;case r.PAGE_LOAD:n=[m.topWindow],a="load";break;default:return this.removeTrigger(e)}return n?(t.info(i,_+".initTriggerOpening attached event: "+a+" for Apperance: "+e.Apperance),this.setOpenTriggerEventHandler(n,a,e)):(t.errorM(_+".initTriggerOpening",_+".initTriggerOpening failed to find element to attach event "+a+" for apperance: "+e.Apperance),this)},E.prototype.setOpenTriggerEventHandler=function(e,t,i){var o=this,n=p.map(e,function(e){var n={attachedOn:e,fn:function(){this.onEventOpenTrigger(i)}.bind(o),eventName:t};return e.addEventListener(t,n.fn),n});if("load"===t){var r=p.get(i.currentOpenBehavior,"Duration",0);if(r>0){var a=""+h.PAGE_LOAD_FALLBACK+w(i),s=function(){this.onEventOpenTrigger(i)}.bind(this);n.push({attachedOn:c,eventName:a,fn:s}),c.addEventListener(a,s),setTimeout(function(){return c.fire(a)},1e3*r)}}var l=p.get(this.handlers,w(i,x.OPEN),[]);return p.isEmpty(l)?p.set(this.handlers,w(i,x.OPEN),n):b.push.apply(l,n),this},E.prototype.onEventOpenTrigger=function(e){return this.unbindTriggersEventHandlers(e,x.OPEN),this.openTriggerByTimer(e),this},E.prototype.openTriggerByTimer=function(e){var o=this,n=e.currentOpenBehavior.Delay;return t.info(i,_+".openTriggerByTimer open apperance "+e.Apperance+" in "+n+" seconds"),setTimeout(function(){return o.openTrigger(e,n>0)},1e3*n),this},E.prototype.openTrigger=function(e,o){var n=this;if(e.isAppended()||this.isFinished(e))e.isAppended()&&this.openAppendedTrigger(e);else{if(this.delayFromLastScroll>200&&o)return t.info(i,"Postponing trigger appearance "+e.Apperance+" opening by "+this.delayFromLastScroll+"mil-seconds due to scrolling"),setTimeout(function(){return n.openTrigger(e,o)},this.delayFromLastScroll),this;this.appendTrigger(e)}return this},E.prototype.appendTrigger=function(e){var i=this;return this.adsStore.getAd(e).then(function(t){e.appendTriggerStructure().appendTriggerStyle().injectAd(t).resetMalwareRefresh(),i.attachClickEventHandlers(e).setNextRefreshTime(e),(e instanceof Cbola.Common.AdTriggerBelowPushContent||e instanceof Cbola.Common.AdTriggerAbovePushContent)&&i.layer.iframeBuster.checkIframeDimension(e.adHeight+u.adTitleStructureTriviaHeight),e.closeTriggerButton&&e.closeTriggerButton.addEventListener("click",function(){var t=o.SetClickTypes;d.setClick(i.elemId,e instanceof Cbola.Common.AdTriggerFixedFooter?t.FOOTER_AD_BUTTON_CLOSE:t.AD_BUTTON_CLOSE),i.removeTrigger(e)}),i.isViewabilityRefreshEnabled()&&e.updateViewability(),i.openAppendedTrigger(e)}).catch(function(){t.warnM(_+".appendTrigger",_+".appendTrigger failed to load first ad for apperance: "+e.Apperance+" in element ID: "+i.elemId+" - removing apperance"),i.removeTrigger(e)}),this},E.prototype.attachClickEventHandlers=function(e){var o=this.layer.container.querySelectorAll(".cbola-refresh-click-trigger");if(p.isEmpty(o)||e instanceof Cbola.Common.AdTriggerInItem)return this;var n=function(t){return p.map(o,function(i){var o={attachedOn:i,eventName:"click",fn:function(){t(e)}};return i.addEventListener("click",o.fn),o})},r="",a=[];if(e instanceof Cbola.Common.AdTriggerLeftInsideUnit?(r=x.REMOVE,a=n(this.removeTrigger.bind(this))):this.isClickRefreshEnabled()&&(r=x.REFRESH_CLICK,a=n(this.refreshTriggerOnClick.bind(this))),r.length>0&&a.length>0){var s=p.get(this.handlers,w(e,r),[]);p.isEmpty(s)?p.set(this.handlers,w(e,r),a):b.push.apply(s,a)}else t.info(i,"No refreshes allowed on click for element Id:"+this.elemId);return this},E.prototype.openAppendedTrigger=function(e){e.triggerElementsStyle(),p.isNil(this.layer.boxElem)||e.adScale(this.layer.boxElem.getBoundingClientRect().width),this.setWrapperHeight().setContainerOverflow().setWrapperMargin().closeTrigger(e)},E.prototype.refreshTriggerAd=function(o){var n=this,r="refreshTriggerAd";return o.isRefreshable()?this.adsStore.getAd(o).then(function(e){o.injectAd(e).resetMalwareRefresh(),t.info(Cbola.Logger.Colors.PALE_GREEN,_+"."+r+" injected ad for apperance: "+o.Apperance)}).catch(function(a){a instanceof Error?t.warnM(_+"."+r,_+"."+r+" failed injecting ad for trigger apperance: "+o.Apperance+", element ID: "+n.elemId+". Error: ",e):a===!0&&(o.stopRefresh(),t.info(i,_+"."+r+" No ads left, stopping refreshes for trigger apperance: "+o.Apperance+", element ID: "+n.elemId))}):t.info(i,_+"."+r+" stopped refreshing apperance: "+o.Apperance+", element Id: "+this.elemId),this},E.prototype.setNextRefreshTime=function(e){var o=this,n="setNextRefreshTime",r=void 0;if(!e.isRefreshable())return t.info(i,_+"."+n+" stopped due to all refreshes stop for trigger Apperance: "+e.Apperance),this;if(this.isViewabilityRefreshEnabled()&&!e.isViewable())return t.info(i,_+"."+n+" adding event listener pending viewability to trigger refreshing for Apperance: "+e.Apperance),this.setRefreshOnViewability(e),this;if(!this.isTimeoutRefreshEnabled()&&!this.isViewabilityRefreshEnabled())return t.info(i,"Refresh by timeout is not allowed for elementId: "+this.elemId),this;if(e.refreshFixedTime.length>0){var a=e.refreshFixedTime.shift();if(e.refreshFixedTime.forEach(function(e,t,i){i[t]=e-a}),r=1e3*a,r&&r>0)return t.info(i,"Trigger apperance "+e.Apperance+" for element ID: "+this.elemId+" would try to refresh by timeout in : "+r+"mili-sec."),e.refreshTimeoutId=setTimeout(function(){return o.refreshOnTimeout(e)},r),this}else if(r=e.refreshInterval||this.getRefreshInterval(),r&&r>0)return t.info("Trigger apperance "+e.Apperance+" for element ID: "+this.elemId+" would try to refresh by timeout in: "+r+"mili-sec."),e.refreshTimeoutId=e.intervalRefreshTimeoutId=setTimeout(function(){return o.refreshOnTimeout(e)},r),this;return t.warnM(_+"."+n,_+"."+n+" stopped refreshing due to inability to set nextRefreshInterval for apperance "+e.Apperance+" in element Id: "+this.elemId),e.stopRefresh(),this},E.prototype.setRefreshOnViewability=function(e){var o={attachedOn:c,eventName:e.viewableEvent,fn:function(){t.info(i,_+".setRefreshOnViewability removed event listener pending viewability to trigger refreshing for Apperance: "+e.Apperance),this.unbindTriggersEventHandlers(e,x.REFRESH_VIEWABILITY),this.setNextRefreshTime(e)}.bind(this)};c.addEventListener(o.eventName,o.fn);var n=p.get(this.handlers,w(e,x.REFRESH_VIEWABILITY),[]);return p.isEmpty(n)?p.set(this.handlers,w(e,x.REFRESH_VIEWABILITY),[o]):n.push(o),this},E.prototype.refreshOnTimeout=function(e){var o=this;return e.setAdInjectionType(s.TIMEOUT),this.delayFromLastScroll>200?(t.info(i,"Delaying trigger apperance "+e.Apperance+" refresh by "+this.delayFromLastScroll+" mil-seconds due to scrolling"),setTimeout(function(){o.refreshOnTimeout(e)},this.delayFromLastScroll)):this.refreshTriggerAd(e).setNextRefreshTime(e),this},E.prototype.refreshTriggerOnClick=function(e){return e.isRefreshable()&&!this.isFinished(e)?(t.info(i,"Trigger apperance "+e.Apperance+" for element ID: "+this.elemId+" would try to refresh by click"),e.setAdInjectionType(s.CLICK),this.refreshTriggerAd(e),e.intervalRefreshTimeoutId&&(t.info(i,_+".refreshOnClick cleared timeout for apperance "+e.Apperance),clearTimeout(e.intervalRefreshTimeoutId),this.setNextRefreshTime(e))):(t.info(i,"Trigger apperance "+e.Apperance+" for element ID: "+this.elemId+" stops refresh by click"),this.unbindTriggersEventHandlers(e,x.REFRESH_CLICK)),this},E.prototype.closeTrigger=function(e){var o=e.closeBehaviors.shift();if(p.isNil(o))return t.info(i,"No closing behavior found for apperance: "+e.Apperance),this;if(e.isClose())return t.info(i,_+".closeTrigger trying to close already closed apperance: "+e.Apperance+" in element ID: "+this.elemId),this;if(e.currentCloseBehavior=o,o.Type===a.TIMER||o.Type===a.VIEWABLE&&this.layer.isViewable())return t.info(_+".closeTrigger sent apperance: "+e.Apperance+" to close by timer"),this.closeTriggerByTimer(e);var n=void 0,r=void 0;switch(o.Type){case a.VIEWABLE:n=[c],r=this.layer.viewableEvent;break;case a.HOVER_ON_UNIT:n=[this.containerBox],r="hover";break;case a.ENGAGEMENT:n=this.layer.boxElem.querySelectorAll(".cbola-refresh-click-trigger"),r="click";break;default:return this.removeTrigger(e)}return t.info(_+".closeTrigger attached event: "+r+" for Apperance: "+e.Apperance),this.setCloseTriggerEventHandler(n,r,e)},E.prototype.setCloseTriggerEventHandler=function(e,t,i){var o=this,n=p.map(e,function(e){var n={attachedOn:e,fn:function(){this.onEventCloseTrigger(i)}.bind(o),eventName:t};return e.addEventListener(t,n.fn),n}),r=p.get(this.handlers,w(i,x.CLOSE),[]);return p.isEmpty(r)?p.set(this.handlers,w(i,x.CLOSE),n):b.push.apply(r,n),this},E.prototype.onEventCloseTrigger=function(e){return this.unbindTriggersEventHandlers(e,x.CLOSE),this.closeTriggerByTimer(e),this},E.prototype.closeTriggerByTimer=function(e){var t=this,i=e.currentCloseBehavior.Duration;return this.FREEZE?this:(setTimeout(function(){t.FREEZE||t.isFinished(e)||(e.closeAnimation().setClose(),t.initTriggerOpening(e))},1e3*i),this)},E.prototype.removeTrigger=function(e){var o=this,n=void 0;return this.isFinished(e)?this:(this.pullTriggerFromArray(this.pendingTriggers,e).pullTriggerFromArray(this.activeTriggers,e).pushTriggerOnce(this.finishedTriggers,e).unbindTriggersEventHandlers(e),
e.closeAnimation().setClose(),n=e instanceof Cbola.Common.AdTriggerLeftInsideUnit?5e3:0,t.info(i,_+".removeTrigger, removing trigger with apperance: "+e.Apperance+", in "+n+"mil-seconds"),setTimeout(function(){e.removeStyle().removeStructure(),clearTimeout(e.refreshTimeoutId),o.setWrapperHeight().setContainerOverflow().setWrapperMargin().startPendingTriggers(!1)},n),this)},E.prototype.setWrapperHeight=function(){var e=this.initialWrapperHeight,t=this.containerWrapper.runtimeStyle||this.containerWrapper.style;return p.forEach(this.activeTriggers,function(t){e=e<t.wrapperHeight?t.wrapperHeight:e}),this.containerWrapper.offsetHeight!==e&&e>0&&!this.layer.isMobile()&&(t["height"]=e+"px"),this},E.prototype.setContainerOverflow=function(){for(var e="hidden",t=0;t<this.activeTriggers.length;t++){var i=this.activeTriggers[t];if(i.triggerOverflow){e=i.triggerOverflow;break}}return this.containerWrapper.style["overflow"]=e,this},E.prototype.setWrapperMargin=function(){for(var e=void 0,t=void 0,i=void 0,o=0;o<this.activeTriggers.length;o++){var n=this.activeTriggers[o];"undefined"!=typeof n.wrapperMarginLeft&&"auto"!==n.wrapperMarginLeft&&(e=n.wrapperMarginLeft,t="left",i="right"),"undefined"!=typeof n.wrapperMarginRight&&"auto"!==n.wrapperMarginRight&&(e=n.wrapperMarginRight,t="right",i="left")}return p.isNil(t)?(this.containerWrapper.style["margin-left"]=this.initialWrapperMarginLeft,this.containerWrapper.style["margin-right"]=this.initialWrapperMarginRight):(this.containerWrapper.style["margin-"+t]=e,"frbs61"===m.activePid&&(this.containerWrapper.style["margin-"+i]=0)),this},E.prototype.isActive=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Apperance",i=function(i){return i[t]===e[t]};return"Apperance"===t&&e instanceof Cbola.Common.AdTriggerInItem&&(i=function(t){return t.Apperance===e.Apperance&&t.spot===e.spot}),!p.isNil(p.find(this.activeTriggers,i))},E.prototype.isOverflowCollision=function(e){var t=I[e].overflow;if("undefined"==typeof t)return!1;for(var i=0;i<this.activeTriggers.length;i++){var o=this.activeTriggers[i].Apperance;if(I[o].overflow!==t)return!0}return!1},E.prototype.isApperanceCollision=function(e){var t=I[e].collidesWith;if("undefined"==typeof t)return!1;for(var i=0;i<this.activeTriggers.length;i++){var o=this.activeTriggers[i].Apperance;if(t.indexOf(o)>-1)return!0}return!1},E.prototype.isFinished=function(e){return!p.isNil(p.find(this.finishedTriggers,function(t){return t.id===e.id}))},E.prototype.pullTriggerFromArray=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return p.remove(e,function(e){return e[i]===t[i]}),this},E.prototype.pushTriggerOnce=function(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",o=0;o<e.length;o++){var n=e[o];if(n[i]===t[i]){if("Apperance"===i&&t instanceof Cbola.Common.AdTriggerInItem&&t.spot!==n.spot)continue;return this}}return e.push(t),this},E.prototype.getActiveTrigger=function(e,t){return e=parseInt(e),t=parseInt(t),p.find(this.activeTriggers,function(i){return i.Apperance===e&&(p.isNil(i.spot)&&isNaN(t)||i.spot===t)})},E.prototype.noFillFallback=function(e,t,i){var o=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,r=this.getActiveTrigger(e,t);if("undefined"==typeof r)return!1;var a=r.getAdObjByBannerId(i),m=0;if(a&&(m=a.getID()),r instanceof Cbola.Common.AdTriggerInItemNoButtons&&setTimeout(function(){return c.fire(""+h.SKIP_SPOT+o.elemId+"_"+t)},5e3),a instanceof Cbola.Common.Ads.Tags.Waterfall&&r.getInjectionType()!==s.INJECT_PSA&&(this.adsStore.updateWaterfallPSACounter(r),this.adsStore.isWaterfallMaxPlacementPSA(r)?this.adsStore.removeWaterfallAdsForSize(r):(a.incrementPSACount(),a.isMaxedPSA()&&this.adsStore.removeWaterfallAd(a))),r.isRefreshable()){var p=null;if(4===n&&this.adsStore.isLowTierSupported(r)&&(d.setHbBidRequestProto([{TagId:this.adsStore.getRandomHbTagId(r),Status:l.REQUEST_LOW_TIER_MADE}]),p=this.adsStore.getLowTierFallbackAd(r)),p||(p=this.adsStore.getCPIFallbackAd(r)),p)return r.setAdInjectionType(s.WF_FALLBACK).injectAdToExistingBanner(p,i),d.setLastMile({tag_id:m}),!0}return r.preventBannerReplacement(i)?(d.setLastMile({tag_id:m}),!0):!1},E.prototype.malwareRefresh=function(e,t,i,o){var n=this,r=this.getActiveTrigger(e,t);p.isNil(r)||(r.getMalwareRefreshCount()<this.getMaxMalwareBlockRefresh()?(r.setAdInjectionType(o),this.adsStore.getAd(r).then(function(e){r.injectAdToExistingBanner(e,i).incrementMalwareRefresh()}).catch(function(e){n.injectPSA(r,i,e)})):this.injectPSA(r,i))},E.prototype.injectPSA=function(e,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1,n="injectPSA";e.setAdInjectionType(s.INJECT_PSA).injectAdToExistingBanner(this.adsStore.getPSA(e),i).resetMalwareRefresh(),o instanceof Error?t.warnM(_+"."+n,_+"."+n+" failed injecting ad for trigger apperance: "+e.Apperance+", element ID: "+this.elemId+". Error: ",o):o===!0&&e.stopRefresh()},E.prototype.freezeAdsState=function(){return this.FREEZE=!0,p.forEach(this.activeTriggers,function(e){return e.stopRefresh()}),t.warn("AdTriggersManager froze ads process"),this},E.prototype.endAdsProcess=function(){var e=void 0;for(this.FREEZE||this.freezeAdsState();this.pendingTriggers.length>0;)e=this.pendingTriggers[0],this.pullTriggerFromArray(this.pendingTriggers,e);for(this.unbindTriggersEventHandlers();this.activeTriggers.length>0;)e=this.activeTriggers[0],this.removeTrigger(e);return t.info(i,_+" ended"),this},E.prototype.unbindTriggersEventHandlers=function(){for(var e=this,t=arguments.length,i=Array(t),o=0;t>o;o++)i[o]=arguments[o];var n=i.length>0&&p.isString(i[i.length-1])?i.pop():null,r=function(e){p.isEmpty(e)||p.forEach(e,function(e){e.attachedOn.removeEventListener(e.eventName,e.fn)})},a=function(e){p.forEach(x,function(t){r(e[t])})};return p.isEmpty(i)?(p.forEach(this.handlers,a),delete this.handlers):p.forEach(i,function(t){var i=w(t,n),o=p.get(e.handlers,i);p.isEmpty(o)||(n?(r(o[n]),delete o[n]):(a(o),p.unset(e.handlers,i)))}),this},E.prototype.managerReady=function(){var e=this;return this.isReady?Promise.resolve():new Promise(function(t){return e.resolvers.push(t)})},E.prototype.getRefreshInterval=function(){return p.get(this.adsData,"RefreshInterval")},E.prototype.getRefreshFixedTime=function(){var e=p.get(this.adsData,"RefreshFixedTime",null);return p.isArray(e)?e.slice(0):[]},E.prototype.getDelayLastScroll=function(){return 1e3*(p.get(this.adsData,"DelayLastScroll",null)||0)},E.prototype.getMaxMalwareBlockRefresh=function(){return v},E.prototype.isClickRefreshEnabled=function(){var e=p.isNil(this.adsData.RefreshType)?n.BOTH:this.adsData.RefreshType;return e===n.BOTH||e===n.CLICK},E.prototype.isViewabilityRefreshEnabled=function(){return p.get(this.adsData,"RefreshType")===n.VIEWABILITY},E.prototype.isTimeoutRefreshEnabled=function(){var e=p.isNil(this.adsData.RefreshType)?n.BOTH:this.adsData.RefreshType;return e===n.BOTH||e===n.TIMEOUT},E}(),window.Cbola=window.Cbola||{},Cbola.Globals=Cbola.Globals||{},Cbola.Globals.AdsService=function(){var e=Cbola.Logger.getInstance(),t=window;try{window.top.document&&(t=window.top)}catch(i){}var o={},n={},r={},a=!1,s=function(){};s.prototype={registerLayerManager:function(t,i,o){if(n.hasOwnProperty(o)&&n[o])return void e.errorM("AdsService.registerLayerManager","Cbola.Globals.AdsService failed, trying to assign ad triggers manager to the same element ID.");if(n[o]=t,r[o]=i,this.onlyOneRegistration)for(var a in n)n.hasOwnProperty(a)&&a!==o.toString()&&this.unRegisterLayerManager(a)},unRegisterLayerManager:function(e){n.hasOwnProperty(e)&&n[e]&&(n[e].endAdsProcess(),delete n[e],delete r[e])},getTriggersManagerByElementId:function(e){return n[e]},getAllTriggersManagers:function(){return n},getAdsStoreByElementId:function(e){return r[e]},freezeAds:function(){for(var e in n)this.freezeAdsByElementId(e)},freezeAdsByElementId:function(e){n.hasOwnProperty(e)&&n[e]&&n[e].freezeAdsState()},addSovrnBeacon:function(i){try{if(!a&&i&&i.SovrnBeaconSrc&&i.SovrnBeaconId){a=!0;var o=t.document.createElement("script");o.id=i.SovrnBeaconId;var n=t.document.getElementsByTagName("head")[0];n&&(n.appendChild(o),o.src=i.SovrnBeaconSrc)}}catch(r){e.alwaysSendM("AdsService.addSovrnBeacon","Sovrn beacon injection failed.")}}};try{t!==window?(t.Cbola=t.Cbola||{},t.Cbola.Globals=t.Cbola.Globals||{},t.Cbola.Globals.AdsService=t.Cbola.Globals.AdsService||new s,o=t.Cbola.Globals.AdsService):o=new s}catch(l){o=new s,e.errorM("AdService","Failed to add AdService initialization process")}return o}(),window.Cbola=window.Cbola||{},Cbola.PageAnalytics=Cbola.PageAnalytics||{},Cbola.PageAnalytics.Reporters=Cbola.PageAnalytics.Reporters||{},Cbola.PageAnalytics.Factory=Cbola.PageAnalytics.Factory||function(){var e=Cbola.PageAnalytics.Reporters,t=function(){};return t.prototype.create=function(t){var i=Cbola.PageAnalytics.Reporters.TYPES_TO_NAMES_MAP,o=i.hasOwnProperty(t)&&i[t];return"undefined"!=typeof o&&o?e[o]:{}},new t}(),Cbola.PageAnalytics.Reporters.TYPES_TO_NAMES_MAP={scroll:"ScrollReporter",data:"Data",pageLoad:"PageLoadReporter"},window.Cbola=window.Cbola||{},Cbola.PageAnalytics=Cbola.PageAnalytics||{},Cbola.PageAnalytics.ReportersManager=Cbola.PageAnalytics.ReportersManager||function(){function e(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function t(){return{ClientVersion:Cbola.Env.clientVersion,PageViewId:r.PageProperties.cbola_pageViewId,PageId:r.PageId,WidgetId:c,DomainId:r.Domain,CategoryId:r.Category,PublisherId:r.activePid,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT,AbTestId:n.abTestId,UserId:a.getUserId(),Second:o.getRunTimeInSecs(),IsMobile:r.PageProperties.isMobile,IsTablet:r.PageProperties.isTablet,isPortrait:r.PageProperties.isPortrait}}var i=Cbola._,o=Cbola.Utils,n=Cbola.Config,r=Cbola.Env,a=Cbola.Common.UserService,s=Cbola.Logger.getInstance(),l=Cbola.Logger.Colors,d=Cbola.PageAnalytics.Factory,c=0,h=[],m=function(){};return m.prototype={init:function(e,t){"string"==typeof e&&(c=t,e.replace(/\s/g,"").split(",").map(function(e){var t=d.create(e);i.isFunction(t.init)&&!h.some(function(t){return t.type===e})&&(h.push({type:e,reporter:t}),t.init(),s.info("Initialized reporter: "+e))}))},fireAnalytic:function(r){var a=r.analyticMethod,d=r.params,c=void 0===d?{}:d,h=r.onSuccess,m=void 0===h?!1:h,p=r.onError,u=void 0===p?!1:p;i.extend(c,t());var b={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:o.encodePayload(c)};fetch(""+n.Defaults.pageAnalyticsServer+a,b).then(e).then(function(e){s.info(l.PALE_PURPLE,"fired "+a+" page analytics to server."),m&&m(e)}).catch(function(e){s.trace(a+" failed."),u&&u(e)})},stopReporting:function(e){i.forEach(h,function(t){(i.isNil(e)||t.type===e)&&i.isFunction(t.reporter.stop)&&t.reporter.stop()})},isPrimary:function(){return!0}},o.isInIframe()&&!o.isWindowTopSupported()||i.get(window.top,"Cbola.Globals.ReportersManager",!1)?{isPrimary:function(){return!1}}:(window.top.Cbola=window.top.Cbola||{},window.top.Cbola.Globals=window.top.Cbola.Globals||{},window.top.Cbola.Globals.ReportersManager=window.top.Cbola.Globals.ReportersManager||new m,window.top.Cbola.Globals.ReportersManager)}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window.Cbola=window.Cbola||{},Cbola.PageAnalytics=Cbola.PageAnalytics||{},Cbola.PageAnalytics.Reporters=Cbola.PageAnalytics.Reporters||{},Cbola.PageAnalytics.Reporters.Data=Cbola.PageAnalytics.Reporters.Data||function(){function e(){p.removeEventListener(p.Events.LAYER_READY,e),f=t(),f&&i()}function t(){var e=window.top;for(var t in e)if(!/webkitStorageInfo|webkitIndexedDB/.test(t)&&e.hasOwnProperty(t)&&null!==e[t]&&"object"===_typeof(e[t])&&-1===t.indexOf("cbola")&&"function"==typeof e[t].getBidResponses&&"function"==typeof e[t].getHighestCpmBids)return e[t];return null}function i(){y=[];var e=f.getBidResponses();C=f.getHighestCpmBids().map(function(e){return e.adId}),l.forEach(e,function(e){l.forEach(e.bids,o)}),y.length>0&&d.fireAnalytic({analyticMethod:c,params:{data:y}}),b=setTimeout(i,h)}function o(e){var t=e.adId;if(!(g[t]||e.cpm<0)){g[t]=!0;var i=("function"==typeof e.getSize?e.getSize():"0x0").split("x");y.push({r:n(e.bidder),l:s(e),j:Math.trunc(e.cpm*m),b:r(e.adUnitCode),t:i[0]*m,m:i[1]*m})}}function n(e){return v[e]||(v[e]=a(e)),v[e]}function r(e){return w[e]||(w[e]=a(e)),w[e]}function a(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=0,i=0;i<e.length;i++)t+=e.charCodeAt(i);return t>0?Math.trunc(t*e.charCodeAt(e.length-1)/(10+e.charCodeAt(Math.round(e.length/2))%10)):0}function s(e){var t="function"==typeof e.getStatusCode?e.getStatusCode():u.ER.bStat;return t===u.SUC.bStat?C.indexOf(e.adId)>-1?u.HG.cStat:u.SUC.cStat:_(t)}var l=Cbola._,d=Cbola.PageAnalytics.ReportersManager,c="SetData",h=3e4,m=123450,p=Cbola.EventBus,u={PND:{bStat:0,cStat:21},HG:{bStat:1,cStat:64},SUC:{bStat:1,cStat:86},FL:{bStat:2,cStat:21},TO:{bStat:3,cStat:21},ER:{bStat:-1,cStat:99}},b=null,f=null,g={},y=[],w={},v={},C=[],_=l.memoize(function(e){var t=l.find(u,function(t){return t.bStat===e});return t?t.cStat:u.ER.cStat}),I=function(){};return I.prototype={init:function(){p.addEventListener(p.Events.LAYER_READY,e)},stop:function(){clearTimeout(b)}},new I}(),window.Cbola=window.Cbola||{},Cbola.PageAnalytics=Cbola.PageAnalytics||{},Cbola.PageAnalytics.Reporters=Cbola.PageAnalytics.Reporters||{},Cbola.PageAnalytics.Reporters.PageLoadReporter=Cbola.PageAnalytics.Reporters.PageLoadReporter||function(){function e(){setTimeout(function(){var e=0,o=0;try{e=t.result(window.top,"performance.timing.fetchStart",0),o=t.result(window.top,"performance.timing.loadEventEnd",0)}catch(r){}e&&o&&i.fireAnalytic({analyticMethod:n,params:{EventId:Cbola.Enums.SetEventTypes.PAGE_LOAD_EVENT,SecondGlobal:Math.round(100*(o-e))/1e5}})},0)}var t=Cbola._,i=Cbola.PageAnalytics.ReportersManager,o=Cbola.Utils,n="SetEvent",r=function(){};return r.prototype={init:function(){o.pageReady(e)}},new r}(),window.Cbola=window.Cbola||{},Cbola.PageAnalytics=Cbola.PageAnalytics||{},Cbola.PageAnalytics.Reporters=Cbola.PageAnalytics.Reporters||{},Cbola.PageAnalytics.Reporters.ScrollReporter=Cbola.PageAnalytics.Reporters.ScrollReporter||function(){function e(){try{return window.top.scrollY||window.top.pageYOffset}catch(e){return 0}}function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=e(),d={Order:s++,PixelsFromTop:o};o!==i&&n.fireAnalytic({analyticMethod:r,params:d}),a=setTimeout(function(){t(o)},1e3*l.next().value)}function i(){d.cancel();try{window.top.removeEventListener("scroll",d)}catch(e){}t()}var o=Cbola._,n=Cbola.PageAnalytics.ReportersManager,r="SetScroll",a=void 0,s=1,l=function(){var e=1;return{next:function(){var t=30;return 2>=e?t=5:4>=e?t=10:6>=e&&(t=20),e++,{done:!1,value:t}}}}(),d=o.debounce(i,300,{leading:!1,maxWait:500,trailing:!0}),c=function(){};return c.prototype={init:function(){try{window.top.addEventListener("scroll",d)}catch(e){}},stop:function(){clearTimeout(a)}},new c}(),
//{{LAYER_CODE}}
Cbola.isBrowserSupported&&(Cbola&&Cbola.bootstrapper?(Cbola.Common.TimelineService.mark("reinitialization of carambola.min.js"),Cbola.Logger.getInstance().info("Bootstrapper is already loaded")):(Cbola.Common.TimelineService.markStart("First time initialization carambola.min.js"),Cbola.bootstrapper=new Cbola.Bootstrapper,Cbola.taskManager=Cbola.TaskManager,Cbola.bootstrapper.init(),Cbola.Common.TimelineService.markEnd("First time initialization carambola.min.js")));
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Styles"]=window["Cbola"]["Styles"]||{},window["Cbola"]["Styles"]["Compiled"]=window["Cbola"]["Styles"]["Compiled"]||{},window["Cbola"]["Styles"]["Compiled"]["cbola_layer_121.css"]=function(t){var e,i="";return i+=".cbola-d-trivia-multi,.cbola-d-trivia-multi *{box-sizing:border-box}.cbola-d-trivia-multi{width:100%;height:250px;position:relative;margin:0 auto;z-index:5;border:1px solid #ededed;overflow:hidden}.cbola-d-trivia-multi__body{width:100%;height:100%;position:relative;background-color:#fff}.cbola-d-trivia-multi__game{width:53.2%;max-width:calc(638px * .532);min-width:calc(478px * .532);height:100%;float:left;position:relative;z-index:10;-webkit-transition:opacity .6s ease;transition:opacity .6s ease}h2.cbola-d-trivia-multi__game-header{color:#b7115e;background-color:#fff;font-size:18px!important;font-weight:400!important;line-height:25px;font-family:Oswald,\"Open Sans\",sans-serif!important;letter-spacing:0;text-transform:uppercase!important;height:62px!important;margin:0!important;padding:8px 10px 5px 8px;text-align:left!important;overflow:hidden;-webkit-transition:opacity .6s ease-in;transition:opacity .6s ease-in;border:0}.cbola-d-trivia-multi-md h2.cbola-d-trivia-multi__game-header{font-size:16px!important}.cbola-d-trivia-multi-sm h2.cbola-d-trivia-multi__game-header{font-size:15px!important}h2.cbola-d-trivia-multi__game-header-game-end{color:#7b7b7b;opacity:.3}.cbola-d-trivia-multi__item-container{margin-left:8px;text-align:left}.cbola-d-trivia-multi__question-wrapper{width:105%;height:60px;padding-left:10px;border-radius:2px;overflow:visible!important;text-align:left!important;background:-webkit-linear-gradient(left,#b7115e 0,#b8115e 73%,rgba(184,17,94,.5) 100%);background:-webkit-linear-gradient(left, #b7115e 0, #b8115e 73%, rgba(184,17,94,.5) 100%);background:linear-gradient(to right,#b7115e 0,#b8115e 73%,rgba(184,17,94,.5) 100%)}.cbola-d-trivia-multi__question-wrapper:after{content:' ';position:absolute;width:0;height:0;left:21px;top:60px;border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #b7115e}.cbola-d-trivia-multi__question-container{width:calc(100% - 75px);height:100%;margin:0 5px 0 0!important;position:relative;overflow:hidden}.cbola-d-trivia-multi__answer-list-wrapper{width:95%;height:120px;padding-top:8px;position:relative;margin:0 5% 0 0;overflow:hidden}.cbola-d-trivia-multi__answer-list-container{width:100%;height:100%;overflow:hidden;margin:0;position:relative;text-align:left}.cbola-d-trivia-multi__next-game{position:absolute;top:8px;left:0;height:100%;width:100%;background-color:rgba(255,255,255,.3);opacity:1;-webkit-transition:opacity .6s ease;transition:opacity .6s ease}.cbola-d-trivia-multi__start-next-button{position:absolute;top:calc(36% - 9px);left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:19px;font-weight:700;font-family:Oswald,'Open Sans',sans-serif;color:#fff;background-color:#b7115e;width:66%;padding:4px 0;text-transform:uppercase;cursor:pointer;text-align:center}.cbola-d-trivia-multi__start-next-button:hover{box-shadow:0 0 1px 3px #fff,0 0 1px 5px rgba(183,17,94,.5)}.cbola-page-item{-webkit-transition:-webkit-transform .6s ease-in;transition:transform .6s ease-in}.cbola-page-item--prev{-webkit-transform:translateX(-500px);transform:translateX(-500px)}.cbola-page-item--active{-webkit-transform:translateX(0);transform:translateX(0)}.cbola-page-item--next{-webkit-transform:translateX(500px);transform:translateX(500px)}.cbola-d-trivia-multi__content-wrapper{width:46.8%;max-width:calc(638px * .468);min-width:calc(478px * .468);height:100%;z-index:1;float:right;position:relative}.cbola-d-trivia-multi__image-wrapper{width:100%;height:100%;overflow:hidden;position:relative;z-index:1}.cbola-d-trivia-multi__share{position:absolute;right:0;top:0;height:30px;width:80px;padding-top:6px;font-size:18px;z-index:100;background:-webkit-linear-gradient(left,rgba(0,0,0,0) 0,rgba(0,0,0,0) 1%,rgba(0,0,0,.35) 100%);background:-webkit-linear-gradient(left, rgba(0,0,0,0) 0, rgba(0,0,0,0) 1%, rgba(0,0,0,.35) 100%);background:linear-gradient(to right,rgba(0,0,0,0) 0,rgba(0,0,0,0) 1%,rgba(0,0,0,.35) 100%);-webkit-transition:opacity .3s ease;transition:opacity .3s ease}.cbola-d-trivia-multi__share .cbola-icon{color:#fff;float:right;margin-right:5px;cursor:pointer}.cbola-d-trivia-multi-share__fb:hover{color:#3b5998}.cbola-d-trivia-multi-share__tw:hover{color:#3cf}.cbola-d-trivia-multi_image-container{width:100%;height:100%;position:relative;overflow:hidden}.cbola-d-trivia-multi-game-end{width:100%;height:100%;position:absolute;background-color:transparent;top:-100%;-webkit-transition:-webkit-transform .55s ease;transition:transform .55s ease;z-index:100;color:#fff;box-shadow:inset 10px 10px 100px 24px rgba(0,0,0,.75)}.cbola-d-trivia-multi-game-end--active{-webkit-transform:translateY(100%);transform:translateY(100%)}.cbola-d-trivia-multi-game-end--active~.cbola-d-trivia-multi_image-container .cbola-d-trivia-multi__image--active .cbola-d-trivia-multi__image{-webkit-filter:blur(5px);filter:blur(5px)}.cbola-ua-ie .cbola-d-trivia-multi-game-end{background-color:rgba(62,62,66,.7)}.cbola-d-trivia-multi-game-end--active~.cbola-d-trivia-multi__share{opacity:0;pointer-events:none}div.cbola-d-trivia-multi-game-end__container{padding-left:8%;text-align:left}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__container,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end__container{padding-left:7%}.cbola-d-trivia-multi-game-end__score-container{width:100%;height:63px;padding-top:8px}.cbola-d-trivia-multi-game-end__score-container>div{display:inline-block}.cbola-d-trivia-multi-game-end__text{font-family:'Open Sans',Oswald,sans-serif;font-size:17px;text-transform:capitalize;max-width:calc(96% - 62px);min-width:152px;line-height:1em}.cbola-d-trivia-multi-game-end__score{font-family:'Open Sans',sans-serif;font-size:22px;font-weight:700;height:62px;width:62px;line-height:63px;border-radius:50%;background-color:#b7115e;text-align:center;letter-spacing:-1px;margin-right:2%;margin-left:2%}.cbola-d-trivia-multi-game-end__challenge,.cbola-d-trivia-multi-game-end__your-friends{text-transform:uppercase;font-size:28px;line-height:28px;font-family:'Open Sans',sans-serif;font-weight:100}.cbola-d-trivia-multi-game-end__social-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.cbola-d-trivia-multi-game-end__share{overflow:hidden;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:auto;flex:auto;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}.cbola-d-trivia-multi-game-end-share__fb,.cbola-d-trivia-multi-game-end-share__tw{width:25px;height:25px;border:1px solid #fff;border-radius:50%;margin-left:5%;cursor:pointer;box-sizing:content-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.cbola-d-trivia-multi-game-end-share__fb{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;background-color:#3a5081;font-size:20px}.cbola-d-trivia-multi-game-end-share__fb>.cbola-icon-facebook{-webkit-transform:translateY(1px);transform:translateY(1px)}.cbola-d-trivia-multi-game-end-share__fb:hover{background-color:#2b3c62}.cbola-d-trivia-multi-game-end-share__tw{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#41aae1;font-size:17px}.cbola-d-trivia-multi-game-end-share__tw>.cbola-icon-twitter{-webkit-transform:none;transform:none}.cbola-d-trivia-multi-game-end-share__tw:hover{background-color:#3389b6}.cbola-d-trivia-multi-game-end__teaser{width:100%;height:80px}p.cbola-d-trivia-multi-game-end__next-quiz{text-transform:uppercase;width:80px;font-family:\"Open Sans\",sans-serif!important;font-size:14px!important;font-weight:400!important;margin:0;text-align:left;color:#fff}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__text{font-size:15px;max-width:calc(96% - 55px)}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__score{font-size:18px;height:55px;width:55px;line-height:54px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__your-friends{letter-spacing:0;font-size:24px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end-share__fb,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__share{font-size:19px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end-share__fb,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end-share__tw{width:24px;height:24px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end-share__tw{font-size:16px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end__text{font-size:14px;max-width:calc(96% - 46px)}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end__score{font-size:18px;height:46px;width:46px;line-height:45px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end__your-friends{letter-spacing:0;font-size:23px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end-share__fb,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end-share__tw{width:22px;height:22px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end-share__fb{font-size:18px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end-share__tw{font-size:15px}.cbola-d-trivia-multi__content-footer{height:30px;width:100%;background-color:rgba(40,40,40,.8);font-size:0;text-align:left!important;z-index:10;position:absolute;bottom:0}.cbola-d-trivia-multi__logo-container,.cbola-d-trivia-multi__progress-wrapper{display:inline-block;vertical-align:middle;height:100%}.cbola-d-trivia-multi__progress-wrapper{width:192px;overflow:hidden}.cbola-d-trivia-multi-md .cbola-d-trivia-multi__progress-wrapper{width:167px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi__progress-wrapper{width:154px}.cbola-d-trivia-multi--pt .cbola-d-trivia-multi__progress-wrapper{letter-spacing:-.9px}.cbola-d-trivia-multi-footer__question,.cbola-d-trivia-multi-footer__your-score{font-family:Roboto,Arial,sans-serif;font-size:14px;font-weight:400;color:#fff;text-transform:capitalize;padding-right:3px;padding-left:4px}.cbola-d-trivia-multi-footer__progress,.cbola-d-trivia-multi-footer__score{font-family:Roboto,Arial,sans-serif;font-size:14px;color:#de3885;font-weight:600}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-footer__progress,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-footer__question,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-footer__score,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-footer__your-score{font-size:12px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-footer__progress,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-footer__question,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-footer__score,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-footer__your-score{font-size:11px}.cbola-d-trivia-multi--pt .cbola-d-trivia-multi__progress-wrapper{padding-left:2px}.cbola-d-trivia-multi--pt.cbola-d-trivia-multi-sm .cbola-d-trivia-multi__progress-wrapper{letter-spacing:-.7px;padding-left:1px}.cbola-d-trivia-multi__logo-container{width:calc(100% - 192px);float:right;position:relative;text-align:right}.cbola-d-trivia-multi-md .cbola-d-trivia-multi__logo-container{width:calc(100% - 167px)}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi__logo-container{width:calc(100% - 154px)}.cbola-d-trivia-multi__logo{height:100%;cursor:pointer;margin:0 auto;opacity:1;max-width:95%}.cbola-d-trivia-multi__carambola_logo{background:url('"+(null==(e=t.clientPath)?"":e)+"css/assets/cbolaSprite.png') -61px -47px no-repeat;width:63px;height:15px;margin-right:6px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi__carambola_logo{margin-left:1px;margin-right:3px}.cbola-d-trivia-multi__logo-container:hover .cbola-d-trivia-multi__carambola_logo{opacity:.7}.cbola-d-trivia-multi__add-this{position:absolute;height:20px;padding:3px 5px;background-color:rgba(40,40,40,.8);color:#e6e6e6;text-transform:capitalize;font-size:12px;font-weight:300;top:-20px;right:0;width:166px;font-family:'Open Sans',sans;cursor:pointer;-webkit-transition:opacity .2s ease-in;transition:opacity .2s ease-in}ul.cbola-d-trivia-multi__answers-list{list-style-type:none;padding:2px 0 0!important;margin:0!important;width:100%;height:100%;-webkit-transition:-webkit-transform .6s ease-in;transition:transform .6s ease-in;position:absolute}ul.cbola-d-trivia-multi__answers-list li.cbola-d-trivia-multi__answer{width:98%;-webkit-transition:opacity .2s ease-in;transition:opacity .2s ease-in;padding:0}ul.cbola-d-trivia-multi__three-answers li.cbola-d-trivia-multi__answer{margin:0 0 8px 2px}ul.cbola-d-trivia-multi__four-answers li.cbola-d-trivia-multi__answer{margin:0 0 4px 2px}ul.cbola-d-trivia-multi__four-answers-pairs{font-size:0}ul.cbola-d-trivia-multi__four-answers-pairs li.cbola-d-trivia-multi__answer{display:inline-block;width:48%;height:56px;margin-left:0}ul.cbola-d-trivia-multi__four-answers-pairs li.cbola-d-trivia-multi__answer:nth-child(2n+1){margin-right:2.5%}.cbola-d-trivia-multi__answer:last-child{margin-bottom:0}.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc{background-color:rgba(183,17,94,.5)}p.cbola-d-trivia-multi__answer-desc{margin:0!important;font-family:Roboto,Oswald,sans-serif;font-size:13px;color:#282828;background-color:#F4F4F4;vertical-align:middle;border-bottom-left-radius:2px;border-top-left-radius:2px;box-shadow:inset 0 1px 1px 0 rgba(0,0,0,.1),inset 0 -1px 1px 0 rgba(0,0,0,.1);cursor:pointer;overflow:hidden;padding:0;text-align:center}.cbola-d-trivia-multi__answers-letters p.cbola-d-trivia-multi__answer-desc{text-align:left}.cbola-d-trivia-multi__three-answers p.cbola-d-trivia-multi__answer-desc{height:30px;line-height:30px}.cbola-d-trivia-multi__four-answers p.cbola-d-trivia-multi__answer-desc{height:24px;line-height:24px}.cbola-d-trivia-multi__four-answers p.cbola-d-trivia-multi__answer-desc,.cbola-d-trivia-multi__three-answers p.cbola-d-trivia-multi__answer-desc{padding-left:6px;text-align:left}.cbola-d-trivia-multi__four-answers-pairs p.cbola-d-trivia-multi__answer-desc{height:46px;line-height:46px;border-radius:6px}.cbola-d-trivia-multi-md p.cbola-d-trivia-multi__answer-desc{font-size:12px}.cbola-d-trivia-multi-sm p.cbola-d-trivia-multi__answer-desc{font-size:11px}.cbola-d-trivia-multi__answers-letters p.cbola-d-trivia-multi__answer-desc:before{text-transform:uppercase;display:inline-block;color:#b7115e;font-family:'Open Sans',sans-serif;font-size:14px;font-weight:700;vertical-align:top;text-align:center;width:10%;max-width:20px;margin-right:4px;box-sizing:border-box;border-bottom-left-radius:2px;border-top-left-radius:2px;margin-left:2px}.cbola-d-trivia-multi__three-answers p.cbola-d-trivia-multi__answer-desc:before{height:30px;line-height:30px}.cbola-d-trivia-multi__four-answers p.cbola-d-trivia-multi__answer-desc:before{height:24px;line-height:24px}.cbola-d-trivia-multi__answers-letters .cbola-d-trivia-multi__answers-list .cbola-d-trivia-multi__answer:nth-child(1) .cbola-d-trivia-multi__answer-desc:before{content:'a'}.cbola-d-trivia-multi__answers-letters .cbola-d-trivia-multi__answers-list .cbola-d-trivia-multi__answer:nth-child(2) .cbola-d-trivia-multi__answer-desc:before{content:'b'}.cbola-d-trivia-multi__answers-letters .cbola-d-trivia-multi__answers-list .cbola-d-trivia-multi__answer:nth-child(3) .cbola-d-trivia-multi__answer-desc:before{content:'c'}.cbola-d-trivia-multi__answers-letters .cbola-d-trivia-multi__answers-list .cbola-d-trivia-multi__answer:nth-child(4) .cbola-d-trivia-multi__answer-desc:before{content:'d'}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__circle-answer .cbola-d-trivia-multi__four-answers-pairs p.cbola-d-trivia-multi__answer-desc:before{height:20px;width:20px;margin-top:13px;border:1px solid #b7115e;border-radius:50%;line-height:1.3em}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer p.cbola-d-trivia-multi__answer-desc:before{width:0;box-sizing:border-box;height:30px;margin-top:0;margin-left:0;padding-left:0;border-top-left-radius:0;border-bottom-left-radius:0;border-bottom:30px solid transparent;content:\" \"!important}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:before{position:absolute;color:#fff;text-transform:uppercase;font-family:'Open Sans',sans;font-size:14px;font-weight:600;line-height:1.1em;padding-left:4px}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__answers-list.cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:nth-child(1):before{content:'a'}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__answers-list.cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:nth-child(2):before{content:'b'}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__answers-list.cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:nth-child(3):before{content:'c'}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__answers-list.cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:nth-child(4):before{content:'d'}li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-correct p.cbola-d-trivia-multi__answer-desc{background-color:#33cf4d;color:#fff}li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-wrong p.cbola-d-trivia-multi__answer-desc{background-color:#727272;color:#fff}li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-fade{opacity:.3}li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-fade:hover p.cbola-d-trivia-multi__answer-desc{background-color:#F4F4F4!important}.cbola-d-trivia-multi_image-loader{height:100%;width:100%;position:absolute;-webkit-transition:-webkit-transform .6s ease-in;transition:transform .6s ease-in;z-index:1}.cbola-d-trivia-multi__image{height:100%;width:100%;position:relative;background-position-x:50%;background-position-y:-1%;background-size:auto;background-repeat:no-repeat;background-color:transparent}.cbola-d-trivia-multi__image--prev{-webkit-transform:translateX(-101%);transform:translateX(-101%)}.cbola-d-trivia-multi__image--active{-webkit-transform:translateX(0);transform:translateX(0)}.cbola-d-trivia-multi__image--next{-webkit-transform:translateX(101%);transform:translateX(101%)}div.cbola-d-trivia-multi__question{position:absolute;overflow:hidden;height:100%;width:100%}.cbola-d-trivia-multi__question p{font-size:14px;color:#fff;font-family:\"Open Sans\",sans-serif!important;margin:-2px 0 0!important;padding:0!important;font-weight:400!important;line-height:normal;text-align:left}.cbola-d-trivia-multi-md .cbola-d-trivia-multi__question p,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi__question p{font-size:13px;margin:0!important;line-height:16px}"}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Styles"]=window["Cbola"]["Styles"]||{},window["Cbola"]["Styles"]["Compiled"]=window["Cbola"]["Styles"]["Compiled"]||{},window["Cbola"]["Styles"]["Compiled"]["cbola_layer_121_theme.css"]=function(t){var e,i="";Array.prototype.join;return i+=".cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer p.cbola-d-trivia-multi__answer-desc:before{color:"+(null==(e=t.InContentThemeColor)?"":e)+"}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc{background-color:"+(null==(e=Cbola.Utils.rgbToRgba(t.InContentThemeColor,.5))?"":e)+";color:"+(null==(e=t.DesktopMultiTriviaFontColor)?"":e)+"}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer li.cbola-d-trivia-multi__answer-correct.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc{color:#fff;background-color:#33cf4d}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer li.cbola-d-trivia-multi__answer-correct.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc:before{color:#fff}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer li.cbola-d-trivia-multi__answer-wrong.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc{color:#fff;background-color:#727272}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer li.cbola-d-trivia-multi__answer-wrong.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc:before,.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-correct p.cbola-d-trivia-multi__answer-desc:before,.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-wrong p.cbola-d-trivia-multi__answer-desc:before{color:#fff}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__circle-answer .cbola-d-trivia-multi__four-answers-pairs p.cbola-d-trivia-multi__answer-desc:before{border:1px solid}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer p.cbola-d-trivia-multi__answer-desc:before{border-left:30px solid ",i+=t.InContentThemeColor?" "+(null==(e=t.InContentThemeColor)?"":e)+" ":" #b7115e ",i+="}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .in-content-container-coverage{padding-bottom:"+(null==(e=t.PaddingBottomCover)?"":e)+"px!important;margin-top:"+(null==(e=t.MarginTopCover)?"":e)+"px!important;margin-bottom:"+(null==(e=t.MarginBottomCover)?"":e)+"px!important;max-width:"+(null==(e=t.MaxInContentTriviaWidth)?"":e)+"px!important;min-width:"+(null==(e=t.DesktopInContentMinWidth)?"":e)+"px!important}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__body{border-color:"+(null==(e=t.DesktopMultiTriviaBorderColor)?"":e)+";background-color:"+(null==(e=t.DesktopMultiTriviaBackgroundColor)?"":e)+"}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer h2.cbola-d-trivia-multi__game-header{color:"+(null==(e=t.InContentThemeColor)?"":e)+";background-color:"+(null==(e=t.DesktopMultiTriviaBackgroundColor)?"":e)+"}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__question-wrapper{background:-moz-linear-gradient(left,"+(null==(e=t.InContentThemeColor)?"":e)+" 0,"+(null==(e=t.InContentThemeColor)?"":e)+" 73%,"+(null==(e=Cbola.Utils.rgbToRgba(t.InContentThemeColor,.5))?"":e)+" 100%);background:-webkit-linear-gradient(left,"+(null==(e=t.InContentThemeColor)?"":e)+" 0,"+(null==(e=t.InContentThemeColor)?"":e)+" 73%,"+(null==(e=Cbola.Utils.rgbToRgba(t.InContentThemeColor,.5))?"":e)+" 100%);background:linear-gradient(to right,"+(null==(e=t.InContentThemeColor)?"":e)+" 0,"+(null==(e=t.InContentThemeColor)?"":e)+" 73%,"+(null==(e=Cbola.Utils.rgbToRgba(t.InContentThemeColor,.5))?"":e)+" 100%)}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi-game-end__score,.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__start-next-button{background-color:"+(null==(e=t.InContentThemeColor)?"":e)+"}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__question-wrapper:after{border-top-color:"+(null==(e=t.InContentThemeColor)?"":e)+"}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__start-next-button:hover{background-color:"+(null==(e=t.InContentThemeColor)?"":e)+";box-shadow:0 0 1px 3px ",i+=t.DesktopMultiTriviaBackgroundColor?" "+(null==(e=t.DesktopMultiTriviaBackgroundColor)?"":e)+" ":"#fff ",i+=",0 0 1px 5px ",i+=Cbola.Utils.rgbToRgba(t.InContentThemeColor,.5)?" "+(null==(e=Cbola.Utils.rgbToRgba(t.InContentThemeColor,.5))?"":e)+" ":"rgba(183,17,94,.5) ",i+="}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi-game-end{background-image:",i+=t.DesktopMultiTriviaEndGameImg?" url('"+(null==(e=t.DesktopMultiTriviaEndGameImg)?"":e)+"') ":"null",i+=";background-size:auto;background-position:0 50%;background-repeat:no-repeat;cursor:",i+=t.DesktopMultiTriviaEndGameLink?"pointer":"default",i+="}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__next-game{background-color:"+(null==(e=Cbola.Utils.rgbToRgba(t.DesktopMultiTriviaBackgroundColor,.3))?"":e)+"}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi-footer__progress,.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi-footer__score{color:"+(null==(e=t.MultiTriviaProgressFontColor)?"":e)+"}.cbola-wid-"+(null==(e=t.wid)?"":e)+".cbola-elem-id-"+(null==(e=t.elementId)?"":e)+".cbola-layer .cbola-d-trivia-multi__logo-container{display:",i+=t.RemovePoweredByCarambola?" none ":" block",i+="}"}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["desktop_trivia_multi_answers.html"]=function(t){var e,i="";Array.prototype.join;return Cbola._.forEach(t.Items,function(t,o){i+='\r\n  <ul class="cbola-d-trivia-multi__answers-list cbola-page-item cbola-page-item-',i+=0===o?"-active":"-next",i+=" cbola-d-trivia-multi__",i+=4===t.Answers.length?"four":"three",i+="-answers",t.Type===Cbola.InContent.Layers.Item.Types.TRIVIA_MULTI_PAIRS&&(i+="-pairs"),i+='">\r\n    ',Cbola._.forEach(t.Answers,function(t){i+='\r\n      <li class="cbola-d-trivia-multi__answer" data-answer-id="'+(null==(e=t.Id)?"":e)+'">\r\n        <p class="cbola-d-trivia-multi__answer-desc">'+(null==(e=t.Title)?"":e)+"</p>\r\n      </li>\r\n    "}),i+="\r\n  </ul>\r\n"}),i}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["desktop_trivia_multi_image.html"]=function(t){var e="";Array.prototype.join;return Cbola._.forEach(t.Items,function(t,i){e+='\r\n<div class="cbola-d-trivia-multi_image-loader cbola-d-trivia-multi__image--',e+=0===i?"active":"next",e+='" ',t.Link&&(e+=' style="cursor:pointer"'),e+='>\r\n  <div class="cbola-loader"></div>\r\n  <div class="cbola-d-trivia-multi__image"></div>\r\n</div>\r\n'}),e}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["desktop_trivia_multi_questions.html"]=function(t){var e,i="";Array.prototype.join;return Cbola._.forEach(t.Items,function(t,o){i+='\r\n  <div class="cbola-d-trivia-multi__question cbola-ghost-center-container cbola-page-item cbola-page-item--',i+=0===o?"active":"next",i+='" ',t.Link&&(i+='style="cursor:pointer"'),i+='>\r\n    <p class="cbola-ghost-center-inner">\r\n      '+(null==(e=t.Description)?"":e)+"\r\n    </p>\r\n  </div>\r\n"}),i}}(),Cbola.Templates["desktop_trivia_multi_view.html"]='<div class="cbola-d-trivia-multi unselectDrag">\n  <div class="cbola-d-trivia-multi__body">\n    <div class="cbola-d-trivia-multi__game">\n      <h2 class="cbola-d-trivia-multi__game-header"></h2>\n      <div class="cbola-d-trivia-multi__item-container">\n        <div class="cbola-d-trivia-multi__question-wrapper cbola-ghost-center-container">\n          <div class="cbola-d-trivia-multi__question-container cbola-ghost-center-inner">\n          </div>\n          <div class="cbola-d-trivia-multi__timer-placeholder cbola-ghost-center-inner">\n          </div>\n        </div>\n        <div class="cbola-d-trivia-multi__answer-list-wrapper">\n          <div class="cbola-d-trivia-multi__answer-list-container cbola-refresh-click-trigger"></div>\n          <div class="cbola-d-trivia-multi__next-game cbola-hidden">\n            <div class="cbola-d-trivia-multi__start-next-button"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="cbola-d-trivia-multi__content-wrapper">\n      <div class="cbola-d-trivia-multi__image-wrapper">\n        <div class="cbola-d-trivia-multi-game-end">\n          <div class="cbola-d-trivia-multi-game-end__container">\n            <div class="cbola-d-trivia-multi-game-end__score-container cbola-ghost-center-container">\n              <div class="cbola-d-trivia-multi-game-end__text cbola-ghost-center-inner">you scored a fair</div>\n              <div class="cbola-d-trivia-multi-game-end__score cbola-ghost-center-inner">5/10</div>\n            </div>\n            <div class="cbola-d-trivia-multi-game-end__challenge">challenge</div>\n            <div class="cbola-d-trivia-multi-game-end__social-container">\n              <div class="cbola-d-trivia-multi-game-end__your-friends">your friends</div>\n              <div class="cbola-d-trivia-multi-game-end__share">\n                <div class="cbola-d-trivia-multi-game-end-share__fb">\n                  <i class="cbola-icon cbola-icon-facebook"></i>\n                </div>\n                <div class="cbola-d-trivia-multi-game-end-share__tw">\n                  <i class="cbola-icon cbola-icon-twitter"></i>\n                </div>\n              </div>\n            </div>\n            <div class="cbola-d-trivia-multi-game-end__teaser cbola-ghost-center-container">\n              <p class="cbola-d-trivia-multi-game-end__next-quiz cbola-ghost-center-inner">next quiz starts in:</p>\n              <div class="cbola-d-trivia-multi-game-end__timer-placeholder cbola-ghost-center-inner">\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="cbola-d-trivia-multi__share">\n          <i class="cbola-icon cbola-icon-facebook cbola-d-trivia-multi-share__fb"></i>\n          <i class="cbola-icon cbola-icon-twitter cbola-d-trivia-multi-share__tw"></i>\n        </div>\n        <div class="cbola-d-trivia-multi_image-container">\n        </div>\n        <div class="cbola-d-trivia-multi__content-footer">\n          <div class="cbola-d-trivia-multi__progress-wrapper cbola-ghost-center-container">\n            <span class="cbola-d-trivia-multi-footer__your-score cbola-ghost-center-inner">your score</span>\n            <span class="cbola-d-trivia-multi-footer__score cbola-ghost-center-inner">0</span>\n            <span class="cbola-d-trivia-multi-footer__question cbola-ghost-center-inner">question</span>\n            <span class="cbola-d-trivia-multi-footer__progress cbola-ghost-center-inner">1/10</span>\n          </div>\n          <div class="cbola-d-trivia-multi__logo-container cbola-ghost-center-container">\n            <div class="cbola-d-trivia-multi__add-this cbola-fade-out">add this widget to your site</div>\n            <div class="cbola-d-trivia-multi__logo cbola-d-trivia-multi__carambola_logo cbola-ghost-center-inner"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>';
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}();window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Components=Cbola.InContent.Components||{},Cbola.InContent.Components.TimerBase=function(){var t=Cbola.EventBus,e=10,i=function(){function i(){_classCallCheck(this,i),this.running=!1,this.startTime=0,this.lastUnfilledStrike=0,this.frameRequestId=null,this.enablementStatus=!0,this.timerEndedEvent=""+t.Events.TIMER_ENDED+Math.floor(1e3*Math.random())}return _createClass(i,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;return this.setDuration(t),this}},{key:"setDuration",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;return this.duration=t,this.reset(),this}},{key:"reset",value:function(){return this.stopTimer(),this.frameRequestId=null,this.startTime=0,this.running=!1,this}},{key:"startTimer",value:function(){return this.enablementStatus&&(this.reset(),this.running=!0,this.startTime=Date.now(),this.frameRequestId=requestAnimationFrame(this.runTimer.bind(this))),this}},{key:"runTimer",value:function(){var t=Date.now()-this.startTime;return t>1e3*this.duration?void this.timerEnded():void(this.frameRequestId=requestAnimationFrame(this.runTimer.bind(this)))}},{key:"stopTimer",value:function(){return cancelAnimationFrame(this.frameRequestId),this.running=!1,this}},{key:"timerEnded",value:function(){this.running=!1,t.fire(this.timerEndedEvent,{detail:this})}},{key:"getTimerEndedEvent",value:function(){return this.timerEndedEvent}},{key:"isRunning",value:function(){return this.running}},{key:"enable",value:function(){return this.enablementStatus=!0,this}},{key:"disable",value:function(){return this.enablementStatus=!1,this}},{key:"isEnabled",value:function(){return this.enablementStatus}}]),i}();return i}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["countdown_timer.html"]=function(t){var e,i="";return i+='<div class="cbola-countdown-timer-wrapper">\r\n  <div class="cbola-countdown-timer__time"></div>\r\n  <div class="cbola-countdown-timer__seconds">'+(null==(e=t.seconds)?"":e)+"</div>\r\n</div>\r\n"}}();var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),_get=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,o)}if("value"in n)return n.value;var r=n.get;return void 0===r?void 0:r.call(o)};Cbola.InContent.Components.CountdownTimer=function(){var t=Cbola.Common.UserService,e=Cbola._,i=function(i){function o(){_classCallCheck(this,o);var t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return t.appended=!1,t.template=o.TEMPLATE+".html",t}return _inherits(o,i),_createClass(o,[{key:"init",value:function(t){return this.getElements(),_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"init",this).call(this,t),this}},{key:"getElements",value:function(){this.timerElemFragment=Cbola.Templates.createFragmentFromTemplate(this.template,{seconds:t.vocabulary("seconds")}),this.timerWrapper=this.timerElemFragment.querySelector(".cbola-countdown-timer-wrapper"),this.timerTimeElem=this.timerElemFragment.querySelector(".cbola-countdown-timer__time")}},{key:"getTimerWrapperElement",value:function(){return this.timerWrapper}},{key:"reset",value:function(){return _get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"reset",this).call(this),this.updateTimeDisplayElem(this.duration),this}},{key:"replacePlaceholder",value:function(t){var i=this,o=t.parentElement;return e.isNil(o)?"":(this.appended||(this.timerPlaceholder=o.replaceChild(this.timerElemFragment,t),e.forEach(t.classList,function(t){return i.timerWrapper.classList.add(t)}),this.appended=!0),this)}},{key:"removeTimer",value:function(){this.appended&&(this.timerWrapper.parentElement.replaceChild(this.timerPlaceholder,this.timerWrapper),this.appended=!1)}},{key:"startTimer",value:function(){return this.appended&&_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"startTimer",this).call(this),this}},{key:"runTimer",value:function(){return Date.now()-this.startTime>1e3*this.duration?(this.timerEnded(),this):(this.updateTimeDisplayElem(),this.frameRequestId=requestAnimationFrame(this.runTimer.bind(this)),this)}},{key:"updateTimeDisplayElem",value:function(t){return t=t||this.duration-Math.floor((Date.now()-this.startTime)/1e3),t!==this.prevDisplayedTime&&this.timerTimeElem?(this.timerTimeElem.textContent=t,this.prevDisplayedTime=t,!0):!1}},{key:"stopTimer",value:function(){return this.appended&&cancelAnimationFrame(this.frameRequestId),this}},{key:"timerEnded",value:function(){_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"timerEnded",this).call(this),this.updateTimeDisplayElem("0")}},{key:"isAppended",value:function(){return this.appended}}]),o}(Cbola.InContent.Components.TimerBase);return i.TEMPLATE="countdown_timer",i}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Styles"]=window["Cbola"]["Styles"]||{},window["Cbola"]["Styles"]["Compiled"]=window["Cbola"]["Styles"]["Compiled"]||{},window["Cbola"]["Styles"]["Compiled"]["spinner_timer.css"]=function(t){var e="";return e+=".cbola-spinner-timer__wrapper{height:44px;width:44px;position:relative;-webkit-transform:translateZ(0);transform:translateZ(0)}.cbola-spinner-timer__time{color:#fff;font-family:Oswald,sans-serif!important;font-size:20px!important;font-weight:400!important;position:absolute;top:48%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.cbola-spinner-timer__strikes{position:absolute;top:1px;left:31px}.cbola-spinner-timer__section{position:absolute;top:0;left:0;opacity:0;width:11px;max-width:11px;height:6px}.cbola-spinner-timer__section path{stroke:#fff;stroke-width:3}.cbola-spinner-timer__section:nth-of-type(1){-webkit-transform:translate(-12px,-2px) rotate(7deg);transform:translate(-12px,-2px) rotate(7deg)}.cbola-spinner-timer__section:nth-of-type(2){-webkit-transform:translate(-3px,2px) rotate(37deg);transform:translate(-3px,2px) rotate(37deg)}.cbola-spinner-timer__section:nth-of-type(3){-webkit-transform:translate(3px,10px) rotate(68deg);transform:translate(3px,10px) rotate(68deg)}.cbola-spinner-timer__section:nth-of-type(4){-webkit-transform:translate(4px,20px) rotate(96deg);transform:translate(4px,20px) rotate(96deg)}.cbola-spinner-timer__section:nth-of-type(5){-webkit-transform:translate(0,29px) rotate(126deg);transform:translate(0,29px) rotate(126deg)}.cbola-spinner-timer__section:nth-of-type(6){-webkit-transform:translate(-8px,35px) rotate(158deg);transform:translate(-8px,35px) rotate(158deg)}.cbola-spinner-timer__section:nth-of-type(7){-webkit-transform:translate(-18px,36px) rotate(188deg);transform:translate(-18px,36px) rotate(188deg)}.cbola-spinner-timer__section:nth-of-type(8){-webkit-transform:translate(-27px,32px) rotate(218deg);transform:translate(-27px,32px) rotate(218deg)}.cbola-spinner-timer__section:nth-of-type(9){-webkit-transform:translate(-33px,24px) rotate(245deg);transform:translate(-33px,24px) rotate(245deg)}.cbola-spinner-timer__section:nth-of-type(10){-webkit-transform:translate(-34px,14px) rotate(279deg);transform:translate(-34px,14px) rotate(279deg)}.cbola-spinner-timer__section:nth-of-type(11){-webkit-transform:translate(-30px,5px) rotate(307deg);transform:translate(-30px,5px) rotate(307deg)}.cbola-spinner-timer__section:nth-of-type(12){-webkit-transform:translate(-22px,-1px) rotate(340deg);transform:translate(-22px,-1px) rotate(340deg)}"}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["spinner_timer.html"]=function(t){var e="";Array.prototype.join;e+='<div class="cbola-spinner-timer__wrapper">\r\n  <div class="cbola-spinner-timer__time"></div>\r\n  <div class="cbola-spinner-timer__strikes">\r\n    ';for(var i=0;i<t.curvesNum;i++)e+='\r\n    <svg class="cbola-spinner-timer__section">\r\n      <path d="M 1,4 C4.5,3.2 6.5,3.2 10,4"/>\r\n    </svg>\r\n    ';return e+="\r\n  </div>\r\n</div>\r\n"}}();var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),_get=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,o)}if("value"in n)return n.value;var r=n.get;return void 0===r?void 0:r.call(o)};window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Components=Cbola.InContent.Components||{},Cbola.InContent.Components.SpinnerTimer=function(){var t=Cbola.Common.FontsManager,e=12,i=(Cbola.Utils,Cbola._),o=function(o){function n(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,n);var o=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return o.template="spinner_timer.html",o.type=i.type||n.RUN,o.tailLength=i.tailLength&&i.tailLength<e?i.tailLength:Math.round(.66*e),o.lastUnfilledStrike=0,t.getOswald(),o}return _inherits(n,o),_createClass(n,[{key:"init",value:function(t){return _get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"init",this).call(this,t),this.strikeOpacityIncrement=parseFloat((Math.floor(1/this.tailLength*100)/100).toFixed(2)),this}},{key:"setDuration",value:function(t){this.timerTimeElem.textContent=t,this.prevDisplayedTime=t,this.strikeUnFillPerSec=this.strikes.length/t,_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setDuration",this).call(this,t)}},{key:"getElements",value:function(){this.timerElemFragment=Cbola.Templates.createFragmentFromTemplate(this.template,{curvesNum:e}),this.timerWrapper=this.timerElemFragment.querySelector(".cbola-spinner-timer__wrapper"),this.strikes=this.timerElemFragment.querySelectorAll(".cbola-spinner-timer__section"),this.timerTimeElem=this.timerElemFragment.querySelector(".cbola-spinner-timer__time")}},{key:"reset",value:function(){this.stopTimer(),this.frameRequestId=null,this.lastUnfilledStrike=0,this.startTime=0;for(var t=this.type===n.UNFILL?1:0,e=0;e<this.strikes.length;e++)this.strikes[e].style["opacity"]=t;return this.updateTimeDisplayElem(this.duration),this}},{key:"replacePlaceholder",value:function(t){return i.isUndefined(this.styleElem)&&(this.styleElem=Cbola.Styles.injectMainStyle(document,"spinner_timer.css")),_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"replacePlaceholder",this).call(this,t)}},{key:"startTimer",value:function(){if(!this.appended)return this;this.reset(),this.startTime=(new Date).getTime();var t=this.type===n.UNFILL?this.unFillTimer:this.runTimer;return this.frameRequestId=requestAnimationFrame(t.bind(this)),this}},{key:"unFillTimer",value:function(){var t=Date.now()-this.startTime;if(t>=1e3*this.duration){for(var e=this.lastUnfilledStrike;e<this.strikes.length;e++)this.strikes[e].style["opacity"]=0;return void this.timerEnded()}var i=Math.floor(t*this.strikeUnFillPerSec/1e3),o=this.updateTimeDisplayElem();if(o){for(var n=this.lastUnfilledStrike;i>=0&&i>n;n++)this.strikes[n].style["opacity"]=0;this.lastUnfilledStrike=i}this.updateTimeDisplayElem(),this.frameRequestId=requestAnimationFrame(this.unFillTimer.bind(this))}},{key:"runTimer",value:function(){var t=Date.now()-this.startTime,e=0;if(t>1e3*this.duration)return void this.timerEnded();var i=Math.floor(t%1e3/1e3*this.strikes.length),o=void 0;o=1e3>t?i>=this.tailLength?i-this.tailLength:0:i>=this.tailLength?i-this.tailLength:this.strikes.length-(this.tailLength-i);for(var n=o;n!==i;)this.strikes[n].style["opacity"]=e,e+=this.strikeOpacityIncrement,n++,n===this.strikes.length&&(n=0);this.strikes[i].style["opacity"]=1,this.updateTimeDisplayElem(),this.frameRequestId=requestAnimationFrame(this.runTimer.bind(this))}}]),n}(Cbola.InContent.Components.CountdownTimer);return o.Types={RUN:1,UNFILL:2},o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.TriviaUtils=function(){var t=Cbola.Common.UserService,e=function(){},i="https://www.facebook.com",o="/dialog/share",n="264749280348555";return e.prototype.getGameEndedText=function(e){var i=t.vocabulary("YouScoredaRidiculous");return e>.9?i=t.vocabulary("youScoredaPerfect"):e>.8?i=t.vocabulary("YouScoredanAwesome"):e>.6?i=t.vocabulary("YouScoredaMighty"):e>.4?i=t.vocabulary("YouScoredaFair"):e>.2&&(i=t.vocabulary("YouScoredaLame")),i},e.prototype.shareOnFacebook=function(t){var e=""+i+o+"?app_id="+n+"&href="+encodeURIComponent(Cbola.Utils.checkIfQueryStingExist(t,!0))+"&quote="+encodeURIComponent(t.text)+"&redirect_uri="+encodeURIComponent(i);window.open(e,"_blank","width=560,height=380")},e.prototype.shareOnTwitter=function(t){Cbola.Utils.getBitlyUrlAsync(t,function(e){window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(t.title+" "+t.text)+"&url="+encodeURIComponent(e),"_blank","width=560,height=380")})},new e}(),Cbola.InContent.Layers.CommonTriviaLayer=function(){var t=Cbola.Logger.getInstance(),e=Cbola.InContent.Layers.Services.TriviaService,i=Cbola.Common.AnalyticsService,o=Cbola.InContent.Layers.TriviaUtils,n=Cbola.Common.UserService,a=Cbola.Enums.ItemViewTypes,r=Cbola._,s=e.triviaTypes.TRUE_FALSE,l=Cbola.EventBus,c="CommonTriviaLayer",d=function(){this.currItemIdx=0,this.items=[],this.itemsForAnalytics=[],this.itemsViewOrder=1,this.itemsDisplayOrder=1},m=Cbola.InContent.Layers.Base.prototype;return r.extend(d.prototype,m),d.prototype.init=function(){m.init.call(this)},d.prototype.setOptions=function(t){this.options=t},d.prototype.onBeforeLoad=function(){t.debug(c+"::onBeforeLoad"),this.boxElem=this.view.element,this.view.container=this.container,this.view.applyViewOptions(this.options),this.view.adjustLanguage(),this.view.reset()},d.prototype.onLoad=function(){var i=this;t.debug(c+"::onLoad"),e.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(t){i.game=t,i.game&&(i.view.setTitle(i.game.title),i.view.addItems(i.game.items),i.view.attach(i.container),i.view.gotoQuestion(0,i.game.getCurrentQuestionItem().Answers),i.view.onLoad(),l.fire(l.Events.LAYER_READY,i))})},d.prototype.onUserAnswered=function(t,e){this.setItemsViewability(!1,t,a.ON_NEXT_BTN);var i=this.game.answerCurrentQuestion(t);this.view.setScore(this.game.score),this.view.playFeedbackAnimation(this.game.getCurrentQuestionNumber()-2,e,i,this.afterAnswerFeedbackAnimation.bind(this))},d.prototype.afterAnswerFeedbackAnimation=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;this.game.isCompleted?(this.setGameViewability(!0,t).reportAndClearItems(),this.onGameEnded()):this.selectInGameAction(t)},d.prototype.selectInGameAction=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;this.setItemsViewability(!0,0,t?a.ON_NEXT_AUTOPLAY:a.ON_NEXT_BTN),this.pageToNextQuestion(t)},d.prototype.pageToNextQuestion=function(){var t=this.game.getCurrentQuestionNumber();this.view.gotoQuestion(t-1,this.game.getCurrentQuestionItem().Answers),this.view.setProgress(t+"/10"),this.reportAndClearItems()},d.prototype.onGameEnded=function(){var i=this;e.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(e){null===e&&t.warnM(c+".onGameEnded",c+"::onGameEnded -> No new game available, doing nothing"),i.nextGame=e,i.view.applyGameEndedUI(),i.view.gameEndingScreen.setGameEndedText(o.getGameEndedText(i.game.score/i.game.items.length)).setNextGameUI(i.nextGame).toggleGameEndedAnimation(!0)})},d.prototype.startNextGame=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;this.setGameViewability(!1,t),this.game=this.nextGame,this.view.reset(),this.nextGame=null,this.view.setTitle(this.game.title),this.view.addItems(this.game.items),this.view.gotoQuestion(0,this.game.getCurrentQuestionItem().Answers),this.view.removeGameEndedUI(),this.view.gameEndingScreen.toggleGameEndedAnimation(!1),this.game.setViewable(!0),this.setItemsViewability(!0,0,a.ON_NEXT_BTN),this.reportAndClearItems()},d.prototype.getGameScore=function(){return this.game.score},d.prototype.onBecameViewable=function(t){m.onBecameViewable.call(this),r.isNil(this.game)||this.setLayerViewability(!0,t).reportAndClearItems()},d.prototype.onBecameUnviewable=function(){m.onBecameUnviewable.call(this),r.isNil(this.game)||this.setLayerViewability(!1).reportAndClearItems()},d.prototype.onMouseEnter=function(){i.setPageElementView(this.elementId,a.ON_HOVER,a.NONE)},d.prototype.onShareInGame=function(t){var e=void 0,n=void 0;e=this.game.getCurrentQuestionItem(),n={text:e.Description,title:e.ChartTitle||this.game.shortTitle,image:0!==e.Image.indexOf("http")?"https:"+e.Image:e.Image,ParentId:e.ParentId},2===e.Answers.length&&(n.text+=". "+e.Answers[0].Title+" or "+e.Answers[1].Title),this.isFacebookShare(t)?(n.text="I've just played an interactive trivia widget within this article. Check it out",o.shareOnFacebook(n),i.setClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_BEFORE_FACEBOOK,e)):this.isTwitterShare(t)&&(o.shareOnTwitter(n),i.setClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_BEFORE_TWITTER,e))},d.prototype.onShareEndGame=function(t){var e=void 0,a=void 0;a=this.game.getQuestionItem(this.game.items.length-1);var r=this.game.title.replace(/<br\s*\/?>/gi,"");e={text:n.vocabulary("canYouBeatThat"),title:n.vocabulary("iScored")+" "+this.game.score+"/10 "+n.vocabulary("playingIn")+' "'+r+'"',image:0!==a.Image.indexOf("http")?"https:"+a.Image:a.Image,ParentId:a.ParentId},this.isFacebookShare(t)?(e.text="I scored "+this.game.score+'/10 in "'+r+'" when playing an interactive trivia widget within this article. Check it out.',o.shareOnFacebook(e),i.setClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_AFTER_FACEBOOK,a)):this.isTwitterShare(t)&&(o.shareOnTwitter(e),i.setClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_AFTER_TWITTER,a))},d.prototype.isFacebookShare=function(t){for(;t.parentNode&&!/__share/g.test(t.className);){if(/__fb/g.test(t.className))return!0;t=t.parentNode}return!1},d.prototype.isTwitterShare=function(t){for(;t.parentNode&&!/__share/g.test(t.className);){if(/__tw/g.test(t.className))return!0;t=t.parentNode}return!1},d.prototype.onPoweredBy=function(t){var e=this.options.BrandRedirect||Cbola.Config.brandRedirectTemplate({layerType:this.type});i.setClick(this.elementId,Cbola.Enums.SetClickTypes.CARAMBOLA_ICON),t&&i.setClickTracker(t),window.open(e)},d.prototype.setLayerViewability=function(e,i){var o=e?i:a.UNVIEWABILITY,n=null,s=this.game.getCurrentQuestionNumber()-1;return r.result(this,"adSpots["+s+"]",!1)&&(r.isNil(this.adSpots[s].closeType)||this.adSpots[s].closeType===a.NONE)?(n=this.adSpots[s],n.Id=parseInt(this.view.getInItemAdId(s))):r.isNil(this.game)?t.errorM(c+".setLayerViewability",c+".setLayerViewability found null game. url: "+Cbola.Env.PageProperties.hostname):n=this.game.getCurrentQuestionItem(),n&&(n.setViewOrder(this.itemsViewOrder),n.setDisplayOrder(this.itemsDisplayOrder),n.setViewable(e),n.setOpenType(o),n.setCloseType(a.NONE),this.itemsForAnalytics.push(n)),this},d.prototype.setItemsViewability=function(e,i,o){var n=e?o:a.NONE,s=e?a.NONE:o,l=void 0;return r.isNil(this.game)?t.errorM(c+".setItemsViewability",c+".setItemsViewability found null game. url: "+Cbola.Env.PageProperties.hostname):l=this.game.getCurrentQuestionItem(),this.updateItemsForAnalytics(l,e,n,s,i),this},d.prototype.setGameViewability=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,o=i?a.ENDING_SCREEN_AUTOPLAY:a.ENDING_SCREEN,n=e?o:a.NONE,s=e?a.NONE:o,l=void 0;return r.isNil(this.game)?t.errorM(c+".setItemsViewability",c+".setItemsViewability found null game. url: "+Cbola.Env.PageProperties.hostname):l=this.game,this.updateItemsForAnalytics(l,e,n,s),this},d.prototype.updateItemsForAnalytics=function(e,i,o,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return r.isNil(e)?void t.warnM(c+".updateItemsForAnalytics",c+".updateItemsForAnalytics failed to report empty item"):(e.setViewable(i),e.isViewable&&(this.itemsViewOrder+=1,e.setViewOrder(this.itemsViewOrder),this.itemsDisplayOrder+=1,e.setDisplayOrder(this.itemsDisplayOrder)),e.setUserAnswerId(a),e.setOpenType(o),e.setCloseType(n),void this.itemsForAnalytics.push(e))},d.prototype.reportAndClearItems=function(){return i.setItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[],this},d.prototype.endGameClickTracking=function(){i.setClick(this.elementId,Cbola.Enums.SetClickTypes.ENDING_SCREEN_OUT)},d.prototype.getTriviaType=function(){return s},d}(),Cbola.InContent.Layers.DesktopTriviaMultiLayer=function(){var t=Cbola._,e=Cbola.Logger.getInstance(),i=Cbola.Common.AnalyticsService,o=Cbola.InContent.Layers.Services.TriviaService,n=o.triviaTypes.MULTI_ANSWER,a=Cbola.Config,r=Cbola.Enums.ItemViewTypes,s=Cbola.EventBus,l=function(){Cbola.InContent.Layers.CommonTriviaLayer.call(this),this.view=new Cbola.InContent.Layers.DesktopTriviaMultiView(this),this.firstTimeLoad=!0},c=Cbola.InContent.Layers.CommonTriviaLayer.prototype;return t.extend(l.prototype,c),l.prototype.getTriviaType=function(){return n},l.prototype.onLoad=function(){var t=this;e.debug("DesktopTriviaMultiLayer::onLoad"),o.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(e){t.game=e,t.game&&(t.view.setTitle(t.game.title),t.view.addItems(t.game.items),t.view.attach(t.container),t.view.onLoad(),s.fire(s.Events.LAYER_READY,t),t.view.loadImagesIfNeeded(0))})},l.prototype.onUserAnswered=function(e,i){var o=this,n=t.isNil(i);this.setItemsViewability(!1,e,n?r.ON_NEXT_AUTOPLAY:r.ON_NEXT_BTN);var a=this.game.getCurrentQuestionCorrectAnswerIdx(),s=this.game.getCurrentQuestionNumber();this.game.answerCurrentQuestion(e),this.view.playFeedbackAnimation(s-1,i,a,function(){o.afterAnswerFeedbackAnimation(n)})},l.prototype.pageToNextQuestion=function(){this.view.setScore(this.game.score),this.view.gotoQuestion(this.game.getCurrentQuestionNumber()-1),this.reportAndClearItems()},l.prototype.startNextGame=function(i){var o=this;if(!this.pendingNextGameToStart){if(this.pendingNextGameToStart=!0,t.isNil(this.nextGame))return e.errorM("DesktopTriviaMultiLayer.startNextGame","DesktopTriviaMultiLayer.startNextGame encountered null game stopping game restart. url: "+Cbola.Env.PageProperties.hostname),void e.info(this.game);this.setGameViewability(!1,i),this.view.removeGameEndedUI(),this.view.gameEndingScreen.toggleGameEndedAnimation(!1),this.game=this.nextGame,this.nextGame=null,this.view.reset().setTitle(this.game.title).addItems(this.game.items).loadImagesIfNeeded(0),this.game.setViewable(!0),this.setItemsViewability(!0,0,i?r.ON_NEXT_AUTOPLAY:r.ON_NEXT_BTN).reportAndClearItems(),setTimeout(function(){o.view.startGame(),o.pendingNextGameToStart=!1},400)}},l.prototype.openCurrentQuestionLink=function(){if(!t.isNil(this.game)){var e=this.game.getCurrentQuestionItem();e&&e.Link&&window.open(e.Link)}},l.prototype.onPoweredBy=function(t){var e=a.brandRedirectTemplate({layerType:this.type}),o=t?this.options.BrandRedirect||e:e;i.setClick(this.elementId,Cbola.Enums.SetClickTypes.CARAMBOLA_ICON),window.open(o)},l.prototype.onBecameViewable=function(e){c.onBecameViewable.call(this,e),this.firstTimeLoad?(this.firstTimeLoad=!1,this.view.startGame()):t.isNil(this.game)||this.view.resumeTimer(this.game.hasEnded())},l.prototype.onBecameUnviewable=function(){c.onBecameUnviewable.call(this),t.isNil(this.game)||this.view.pauseTimer(this.game.hasEnded())},l}();var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}();window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.DesktopTriviaMultiView=Cbola.InContent.Layers.DesktopTriviaMultiView||function(){var t=Cbola.Utils,e=Cbola.EventBus,i=Cbola.Common.FontsManager,o=Cbola.Common.UserService,n=Cbola._,a=Cbola.Logger.getInstance(),r=Cbola.InContent.Components.SpinnerTimer,s=Cbola.Styles,l=function(t){var e=t.className,i=void 0===e?"cbola-page-item":e,o=t.toActive,n=void 0===o?null:o,a=t.toPrev,r=void 0===a?null:a,s=t.toNext,l=void 0===s?null:s;r&&(r.classList.remove(i+"--active"),r.classList.add(i+"--prev")),n&&(n.classList.remove(i+"--next"),n.classList.add(i+"--active")),l&&(l.classList.remove(i+"--active"),l.classList.remove(i+"--prev"),l.classList.add(i+"--next"))},c=function(t){var e=Cbola.Templates.createFragmentFromTemplate("desktop_trivia_multi_questions.html",{Items:[{Description:t}]}).querySelector(".cbola-d-trivia-multi__question");return l({toNext:e}),e},d=function(t){this.ignoreUserInput=!0,this.isAttached=!1,this.presenter=t,this.container=this.presenter.container,this.element=Cbola.Templates.createElement("desktop_trivia_multi_view.html"),this.lastImageIdx=0,this.uiItems=[],this.pausedTimer=null,this.bind()};d.prototype={bind:function(){this.answersContainer=this.element.querySelector(".cbola-d-trivia-multi__answer-list-container"),this.imageContainer=this.element.querySelector(".cbola-d-trivia-multi_image-container"),this.questionsContainer=this.element.querySelector(".cbola-d-trivia-multi__question-container"),this.gameEndingScreen=new m({view:this,presenter:this.presenter}),this.shareInGame=this.element.querySelector(".cbola-d-trivia-multi__share"),this.titleElem=this.element.querySelector(".cbola-d-trivia-multi__game-header"),this.footer=this.element.querySelector(".cbola-d-trivia-multi__content-footer"),this.logoContainer=this.element.querySelector(".cbola-d-trivia-multi__logo-container"),this.poweredBy=this.element.querySelector(".cbola-d-trivia-multi__logo"),this.addThisWidgetContact=this.logoContainer.querySelector(".cbola-d-trivia-multi__add-this"),this.addThisWidgetContact.textContent=o.vocabulary("addThisWidgetToYourSite"),this.scoreElem=this.element.querySelector(".cbola-d-trivia-multi-footer__score"),this.progressElem=this.element.querySelector(".cbola-d-trivia-multi-footer__progress");var t=this.element.querySelector(".cbola-d-trivia-multi__timer-placeholder");this.inGameTimer=new r({type:r.Types.UNFILL}).init(),this.inGameTimerWrapper=this.inGameTimer.getTimerWrapperElement(),this.inGameTimerEndedEvent=this.inGameTimer.replacePlaceholder(t).getTimerEndedEvent(),this.addEventListeners()},addEventListeners:function(){var t=this;window.addEventListener("resize",n.debounce(this.onResize.bind(this),150,{leading:!1,trailing:!0})),e.addEventListener(e.Events.RESIZE_ON_AD+this.presenter.elementId,function(){setTimeout(t.onResize.bind(t),10)}),this.answersContainer.addEventListener("click",function(e){t.ignoreUserInput||t.onUserAnswered(e)}),this.shareInGame.addEventListener("click",function(e){t.ignoreUserInput||t.presenter.onShareInGame(e.target)}),e.addEventListener(this.inGameTimerEndedEvent,function(){return t.presenter.onUserAnswered(0,null)}),this.logoContainer.addEventListener("click",function(e){return t.presenter.onPoweredBy(e.target===t.poweredBy)}),n.forEach([this.questionsContainer,this.imageContainer],function(e){e.addEventListener("click",function(){t.ignoreUserInput||t.presenter.openCurrentQuestionLink()})})},onResize:function(){var t=this.element.clientWidth;this.element.classList.remove("cbola-d-trivia-multi-sm"),this.element.classList.remove("cbola-d-trivia-multi-md"),500>t?this.element.classList.add("cbola-d-trivia-multi-sm"):575>t&&this.element.classList.add("cbola-d-trivia-multi-md")},onUserAnswered:function(e){for(var i=e.target;i!==e.currentTarget&&i;){if(i.classList.contains("cbola-d-trivia-multi__answer")){var o=t.dataset(i,"answerId");if(o)return this.presenter.onUserAnswered(o,i),this}i=i.parentElement}},reset:function(){return this.uiItems=[],this.uiItemsLength=0,this.lastImageIdx=0,this.answersContainer.innerHTML="",this.imageContainer.innerHTML="",this.questionsContainer.innerHTML="",this.setScore("0"),this},applyViewOptions:function(t){var e=this;if(this.options=t,this.options.wid=this.presenter.widgetId,this.options.elementId=this.presenter.elementId,s.injectThemeStyle(document,"cbola_layer_121_theme.css",this.options),this.inGameTimer.setDuration(t.DesktopMultiTriviaInGameTimerDuration),t.BrandImg?(this.poweredBy.style["background"]="url('"+t.BrandImg+"') no-repeat 0 50% / contain",this.poweredBy.style["width"]="95%",this.poweredBy.style["margin-right"]="5%",this.poweredBy.classList.remove("cbola-d-trivia-multi__carambola_logo")):Cbola.Env.PageProperties.isTablet||Cbola.Env.PageProperties.isMobile||(this.logoContainer.addEventListener("mouseenter",function(){clearTimeout(e.logoInVisibleTimeout),e.logoVisibleTimeout=setTimeout(function(){e.addThisWidgetContact.classList.remove("cbola-fade-out")},750)}),this.logoContainer.addEventListener("mouseleave",function(){clearTimeout(e.logoVisibleTimeout),e.logoInVisibleTimeout=setTimeout(function(){e.addThisWidgetContact.classList.add("cbola-fade-out")},500)})),t.DesktopMultiTriviaDisplayAnswerLetters&&43!==Cbola.Config.abTestId)switch(this.answersContainer.classList.add("cbola-d-trivia-multi__answers-letters"),Cbola.Config.abTestId){case 41:this.answersContainer.classList.add("cbola-d-trivia-multi__tabbed-answer");break;case 42:this.answersContainer.classList.add("cbola-d-trivia-multi__circle-answer")}if(t.DesktopMultiTriviaAdvertisementTitle){var i=Cbola.Templates.createElement("advertisement_title.html");this.presenter.topContainer.insertBefore(i,this.container)}this.gameEndingScreen.applyViewOptions(t)},adjustLanguage:function(){this.element.querySelector(".cbola-d-trivia-multi-footer__your-score").textContent=o.vocabulary("yourScore"),this.element.querySelector(".cbola-d-trivia-multi-footer__question").textContent=o.vocabulary("question"),this.element.classList.add("cbola-d-trivia-multi--"+o.getLanguage()),this.gameEndingScreen.adjustLanguage()},addItems:function(t){for(var e=Cbola.Templates.createFragmentFromTemplate("desktop_trivia_multi_image.html",{Items:t}),i=Cbola.Templates.createFragmentFromTemplate("desktop_trivia_multi_questions.html",{Items:t}),o=Cbola.Templates.createFragmentFromTemplate("desktop_trivia_multi_answers.html",{Items:t}),n=e.querySelectorAll(".cbola-d-trivia-multi_image-loader"),a=e.querySelectorAll(".cbola-loader"),r=i.querySelectorAll(".cbola-d-trivia-multi__question"),s=o.querySelectorAll(".cbola-d-trivia-multi__answers-list"),l=0;l<t.length;l++)this.uiItems.push({answerElem:s.item(l),descElem:r.item(l),imgElem:n.item(l),imgCover:n.item(l).querySelector(".cbola-d-trivia-multi__image"),imgUrl:t[l].Image,loaderElem:a.item(l)});return this.uiItemsLength=this.uiItems.length,this.setProgress("1"),this.answersContainer.appendChild(o),this.questionsContainer.appendChild(i),this.imageContainer.appendChild(e),
this},attach:function(t){i.getOpenSans(),i.getOswald(),i.getRoboto(),this.isAttached||(this.isAttached=!0,n.isUndefined(this.styleElem)&&(this.styleElem=s.injectMainStyle(window.document,"cbola_layer_121.css")),t.appendChild(this.element),this.container=t,this.onResize())},detach:function(){this.isAttached&&(this.isAttached=!1,this.container.removeChild(this.element),window.document.head.removeChild(this.styleElem),this.styleElem=void 0)},onLoad:function(){var t=function(){this.container.removeEventListener("mouseenter",t),this.presenter.onMouseEnter()}.bind(this);this.container.addEventListener("mouseenter",t)},gotoQuestion:function(t){var e=this,i=void 0,o=void 0;!this.ignoreUserInput&&t&&(this.disableUserInput(600),i=this.uiItems[t-1],o=this.uiItems[t],l({toPrev:i.descElem,toActive:o.descElem}),l({toPrev:i.imgElem,toActive:o.imgElem,className:"cbola-d-trivia-multi__image"}),l({toPrev:i.answerElem,toActive:o.answerElem}),this.inGameTimer.setDuration(this.options.DesktopMultiTriviaInGameTimerDuration),setTimeout(function(){e.inGameTimer.startTimer()},600),this.loadImagesIfNeeded(t),this.setProgress(t+1))},loadImagesIfNeeded:function(t){return this.lastImageIdx<t+2&&this.loadNextImages(2),this},loadNextImages:function(t){for(var e=this.lastImageIdx+t,i=this.lastImageIdx;i<Math.min(e,this.uiItemsLength);i++,this.lastImageIdx++){var o=new Image;o.itemImage=this.uiItems[i].imgElem,o.itemImageCover=this.uiItems[i].imgCover,o.loaderElem=this.uiItems[i].loaderElem,o.onload=function(){this.itemImage.removeChild(this.loaderElem),this.itemImageCover.style["background-image"]='url("'+this.src+'")'},o.src=this.uiItems[i].imgUrl}},disableUserInput:function(t){var e=this;this.ignoreUserInput=!0,setTimeout(function(){e.presenter.isViewable&&(e.ignoreUserInput=!1)},t)},setTitle:function(t){return this.titleElem.innerHTML=t,this},setScore:function(t){this.scoreElem.textContent=t},setProgress:function(t){this.progressElem.textContent=t+"/"+this.uiItemsLength},startGame:function(){this.ignoreUserInput=!1,this.inGameTimer.startTimer()},playFeedbackAnimation:function(t,e,i,o){var a=this.uiItems[t],r=a.answerElem.querySelectorAll(".cbola-d-trivia-multi__answer"),s=void 0,l=void 0,c=void 0,d=void 0,m=void 0;this.inGameTimer.stopTimer(),n.isNil(i)||(m=r[i]),s=!n.isNil(e)&&e===m,l=s?"correct":"wrong",c=!s&&e?1100:600,d=!s&&e?400:0,this.disableUserInput(c),n.isNil(e)||e.classList.add("cbola-d-trivia-multi__answer-"+l),m&&!s&&setTimeout(function(){return m.classList.add("cbola-d-trivia-multi__answer-correct")},400),m&&setTimeout(function(){n.forEach(r,function(t){t!==m&&t!==e&&t.classList.add("cbola-d-trivia-multi__answer-fade")})},Math.max(d-300,0)),setTimeout(function(){o&&o()},c)},applyGameEndedUI:function(){var t=this;this.uiItems[this.uiItemsLength-1].answerElem.style["pointer-events"]="none",this.footer.classList.add("cbola-fade-out"),this.options.DesktopMultiTriviaEndGameImg&&(this.titleElem.style["opacity"]=.3,this.answersContainer.style["opacity"]=.3),setTimeout(function(){t.inGameTimerWrapper.classList.add("cbola-fade-out")},600)},removeGameEndedUI:function(){this.footer.classList.remove("cbola-fade-out"),this.inGameTimerWrapper.classList.remove("cbola-fade-out")},resumeTimer:function(t){var e=this;this.pausedTimer=this.pausedTimer||(t?this.gameEndingScreen.endGameTimer:this.inGameTimer),this.pausedTimer&&(this.pausedTimer.startTimer(),a.info("MultiTriviaView resumed timer: ",this.pausedTimer),this.pausedTimer=null,requestAnimationFrame(function(){e.ignoreUserInput=!1}))},pauseTimer:function(t){this.ignoreUserInput=!0,this.pausedTimer=t?this.gameEndingScreen.getTimer():this.inGameTimer,this.pausedTimer&&(a.info("MultiTriviaView paused timer: ",this.pausedTimer),this.pausedTimer.stopTimer().reset())}};var m=function(){function t(e){_classCallCheck(this,t),this.hostingView=e.view,this.presenter=e.presenter,this.containingElement=e.view.element,this.bind()}return _createClass(t,[{key:"bind",value:function(){this.element=this.containingElement.querySelector(".cbola-d-trivia-multi-game-end"),this.shareEndGame=this.element.querySelector(".cbola-d-trivia-multi-game-end__share");var t=this.element.querySelector(".cbola-d-trivia-multi-game-end__timer-placeholder");this.endGameTimer=new r({type:r.Types.RUN}).init(),this.endGameTimerEndedEvent=this.endGameTimer.replacePlaceholder(t).getTimerEndedEvent(),this.startNextOverlay=this.containingElement.querySelector(".cbola-d-trivia-multi__next-game"),this.startNextQuizButton=this.startNextOverlay.querySelector(".cbola-d-trivia-multi__start-next-button"),this.addEventHandlers()}},{key:"addEventHandlers",value:function(){var t=this;this.shareEndGame.addEventListener("click",function(e){t.presenter.onShareEndGame(e.target),e.stopPropagation()}),e.addEventListener(this.endGameTimerEndedEvent,function(){a.info("MultiTriviaView started next game by timerEnd"),t.presenter.startNextGame(!0)}),this.startNextQuizButton.addEventListener("click",function(){t.endGameTimer.stopTimer(),a.info("MultiTriviaView started next game by click"),t.presenter.startNextGame(!1)})}},{key:"applyViewOptions",value:function(t){var e=this;this.options=t,t.DesktopMultiTriviaEndGameLink&&this.element.addEventListener("click",function(){e.presenter.endGameClickTracking(),window.open(t.DesktopMultiTriviaEndGameLink)})}},{key:"adjustLanguage",value:function(){this.element.querySelector(".cbola-d-trivia-multi-game-end__challenge").textContent=o.vocabulary("challenge"),this.element.querySelector(".cbola-d-trivia-multi-game-end__your-friends").textContent=o.vocabulary("yourFriends"),this.element.querySelector(".cbola-d-trivia-multi-game-end__next-quiz").textContent=o.vocabulary("nextQuiz","startsIn"),this.startNextQuizButton.textContent=o.vocabulary("start","nextQuiz")}},{key:"setGameEndedText",value:function(t){return this.element.querySelector(".cbola-d-trivia-multi-game-end__text").textContent=t,this.element.querySelector(".cbola-d-trivia-multi-game-end__score").textContent=this.presenter.getGameScore()+"/"+this.hostingView.uiItemsLength,this}},{key:"setNextGameUI",value:function(t){return t&&!this.options.DesktopMultiTriviaEndGameImg?this.nextGameTeaser(t):this.freezeEndingScreen(),this}},{key:"nextGameTeaser",value:function(t){var e=this,i=c(o.vocabulary("upNext")+": "+t.shortTitle);this.hostingView.questionsContainer.appendChild(i),setTimeout(function(){var t=e.hostingView.uiItems[e.hostingView.uiItemsLength-1].answerElem.querySelector(".cbola-d-trivia-multi__answer-wrong");t&&(t.classList.remove("cbola-d-trivia-multi__answer-wrong"),t.classList.add("cbola-d-trivia-multi__answer-fade"));var o=e.hostingView.uiItems[e.hostingView.uiItemsLength-1].answerElem.querySelector(".cbola-d-trivia-multi__answer-correct");o&&(o.classList.remove("cbola-d-trivia-multi__answer-correct"),o.classList.add("cbola-d-trivia-multi__answer-fade")),l({toPrev:e.hostingView.uiItems[e.hostingView.uiItemsLength-1].descElem,toActive:i}),e.endGameTimer.setDuration(e.options.DesktopMultiTriviaEndGameTimerDuration),e.startNextOverlay.classList.remove("cbola-hidden")},600)}},{key:"freezeEndingScreen",value:function(){var t=this;if(this.element.querySelector(".cbola-d-trivia-multi-game-end__teaser").classList.add("cbola-fade-out"),this.options.DesktopMultiTriviaEndGameImg){var e=c(o.vocabulary("thankYouForPlaying"));this.hostingView.questionsContainer.appendChild(e),setTimeout(function(){l({toPrev:t.hostingView.uiItems[t.hostingView.uiItems.length-1].descElem,toActive:e})},600),this.endGameTimer=null}else this.element.querySelector(".cbola-d-trivia-multi__game").style["opacity"]=.3}},{key:"toggleGameEndedAnimation",value:function(t){return t?this.openEndingScreen():this.closeEndingScreen(),this}},{key:"openEndingScreen",value:function(){var t=this;this.element.classList.add("cbola-d-trivia-multi-game-end--active"),setTimeout(function(){t.endGameTimer&&t.endGameTimer.startTimer()},600)}},{key:"closeEndingScreen",value:function(){this.startNextOverlay.classList.add("cbola-hidden"),this.element.classList.remove("cbola-d-trivia-multi-game-end--active")}},{key:"getTimer",value:function(){return this.endGameTimer}}]),t}();return d}();